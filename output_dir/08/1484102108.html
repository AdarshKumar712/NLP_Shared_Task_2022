<!doctype html>
<html lang='en'>
<head>
    <!-- Google fonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,600i,700,800" rel="stylesheet">
            <!-- used for header text on Flipp ads -->
        <link href="https://fonts.googleapis.com/css?family=Lilita+One" rel="stylesheet">
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.2.0/css/all.css"
          crossorigin="anonymous" >

            <meta property="og:title" content="Missing kayaker pulled from St. Joseph River in Niles has died"/>
        <meta property="og:description" content="The man who was pulled from the St. Joseph River in Niles around noon on Wednesday has died, according to law enforcement."/>
        <meta property="og:type" content="website"/>
        <meta property="og:url" content="https://www.abc57.com/news/crews-searching-for-missing-kayaker-in-niles"/>
        <meta property="og:image" content="https://newscdn.weigelbroadcasting.com/LGbmx-1577898607-154385-blog-searchforkayaker.jpg"/>
        <meta property="og:image:width" content="880"/>
        <meta property="og:image:height" content="495"/>
        <link rel="image_src" href="https://newscdn.weigelbroadcasting.com/LGbmx-1577898607-154385-blog-searchforkayaker.jpg" />
        <meta property="og:site_name" content="ABC57"/>
        <meta property="fb:admins" content="567665230"/>
                    <meta name="Description" content="ABC57 News in South Bend, Ind. covers all of Michiana including St. Joseph, Elkhart, Kosciusko, LaPorte and Marshall counties in Indiana and Berrien, Cass, Van Buren and St. Joseph counties in Mich.">
            <meta name="KEYWORDS" content="Michiana, South Bend News, Mishawaka News, Berrien County News, Dowagiac News, La Porte News, La Grange News, Warsaw News, Plymouth News, Sturgis News, Buchanan News, Niles News, Elkhart News, Goshen News, ABC 57, ABC 57 Weather, Michiana Weather, Notre Dame Sports, South Bend Cubs, Notre Dame News.">
            <meta name="news_keywords" content="Michiana, South Bend News, Mishawaka News, Berrien County News, Dowagiac News, La Porte News, La Grange News, Warsaw News, Plymouth News, Sturgis News, Buchanan News, Niles News, Elkhart News, Goshen News, ABC 57, ABC 57 Weather, Michiana Weather, Notre Dame Sports, South Bend Cubs, Notre Dame News.">
            <meta name="owner" content="WBND">
            <meta property="fb:app_id" content="1571125042932041"/>
                            <link rel="canonical" href="https://www.abc57.com/news/crews-searching-for-missing-kayaker-in-niles">
                        <meta name="twitter:card" content="summary"><meta name="twitter:title" content="Missing kayaker pulled from St. Joseph River in Niles has died">
            <meta name="twitter:description" content="The man who was pulled from the St. Joseph River in Niles around noon on Wednesday has died, according to law enforcement.">
        <meta property="fb:pages" content="100510823358664,119162531570115,452172825176170">


    


    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="theme-color" content="#ffffff">

    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/7.0.0/normalize.min.css">
    <link rel="stylesheet" type="text/css" href="/css/rrssb.css">
    <link rel="stylesheet" type="text/css" href="/css/style.css?v87.92">
    <link rel="stylesheet" type="text/css" href="/css/style_abc57.css?v89">
    <!-- remove time cache-breaker -->
    <link rel="stylesheet" type="text/css" href="/css/video_player.css?v=100">

    <!-- <link rel="stylesheet" type="text/css" href="/css/extras.css"> -->
    <link href="/css/font-awesome.min.css" rel="stylesheet" type="text/css">
            <link href="/js/videojs7/video-js.css?v1" rel="stylesheet">
    <link rel="stylesheet" href="/js/videojs7/videojs.ads.css?v1" />
    <link rel="stylesheet" href="/js/videojs7/videojs.ima.css?v1" />
    <script src="/js/imagesloaded.pkgd.min.js"></script>
        <title>Missing kayaker pulled from St. Joseph River in Niles has died</title>

    <!--[if lt IE 9]>
    <script>
        document.createElement('header');
        document.createElement('nav');
        document.createElement('section');
        document.createElement('article');
        document.createElement('aside');
        document.createElement('footer');
        document.createElement('hgroup');
    </script>
    <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/rrssb.min.js"></script>
    <script src="/js/jquery.marquee.min.js"></script>
    <script src="/js/jquery.bxslider.min.js"></script>
    <script src="/js/jquery.sticky.min.js"></script>
    <script src="/js/scripts.js?v29"></script>
            <link rel="stylesheet" href="/css/twemoji-awesome.css" />
        <script src="https://www.google.com/recaptcha/api.js?onload=CaptchaCallback&render=explicit" async defer></script>
        


    <!-- Google DFP -->
    <script src="//partner.googleadservices.com/gampad/google_service.js"></script>
    <script src="/js/prebid1.16.0.js?v3"></script>
    <script>
        GS_googleAddAdSenseService("ca-pub-0852133682462285");
        GS_googleEnableAllServices();
    </script>

	<script async src="https://www.googletagservices.com/tag/js/gpt.js"></script>
    <script>
        var googletag = googletag || {};
        googletag.cmd = googletag.cmd || [];
    </script>
    <!-- AdLightning after googletag defined... before any google commands created -->
    <!-- only need this one script now -->
    <script src='https://tagan.adlightning.com/metv/op.js'></script>
    <script>
        googletag.cmd.push(function() {
            //googletag.pubads().set("adsense_background_color", "FFFFFF");
            googletag.pubads().setTargeting("page", "index.php");
                            googletag.pubads().setTargeting("site", "abc57.com");
            
            googletag.pubads().setTargeting("page_type", "story");

            
            
            
                                                googletag.pubads().setTargeting("tag", ["berrien county news","local news abc57"]);
                                    });
    </script>


    <script>
       var DFP_SLOTS = new Array();
       var DFP_ACCOUNT_ID = '7089059';       
       var AMAZON_SLOTS = new Array();
        var width = window.innerWidth || document.documentElement.clientWidth;       
       function build_slot(fullSizeName, adSize, id){
            //alert("building slot: " + fullSizeName + " with adsize: " + '[' + adSize[0] + ", " + adSize[1] + "] id: " + id);
            var adSlot = googletag.defineSlot("/" + DFP_ACCOUNT_ID + "/" + fullSizeName, adSize, id).addService(googletag.pubads());

            return adSlot;
        }


        var SITE_NAME = 'abc57';
        var allSlots = new Array();
        var REQUEST_TIME = 10000;
        var WAITING = false;
        var allAds = new Array();
        var allSizes = new Array();
        allSizes[SITE_NAME + '_btf'] = "728x90,728x90,468x60,320x50";
        if(width > 850){          
            allSizes[SITE_NAME + '_sidebar1'] = "300x250,200x200,200x200,200x200";
            allSizes[SITE_NAME + '_sidebar2'] = "300x600,160x600,160x600,160x600";
        }
        else{
            allSizes[SITE_NAME + '_btf2'] = "728x90,728x90,468x60,320x50";
            allSizes[SITE_NAME + '_atf'] = "728x90,728x90,468x60,320x50";              
        }      
        allSizes[SITE_NAME + '_middle'] = "728x90,468x60,320x50";
        allSizes[SITE_NAME + '_logo'] = "120x50,90x35";
        //allSizes[SITE_NAME + '_footer'] = "728x90,728x90,468x60,320x50";
        //allSizes[SITE_NAME + '_page'] = "468x60,468x60,468x60,320x50";
        //allSizes[SITE_NAME + '_middle'] = "728x90,728x90,468x60,320x50";
        //allSizes[SITE_NAME + '_atf_promo'] = "452x90";
        

            var slots = new Array();
            slots.push(SITE_NAME + '_btf'); 
            if(width > 850){          
                slots.push(SITE_NAME + '_sidebar1');
                slots.push(SITE_NAME + '_sidebar2'); 
            }else{
                slots.push(SITE_NAME + '_btf2');
                slots.push(SITE_NAME + '_atf');                
            }
            
                        slots.push(SITE_NAME + '_logo');
            
            
            //fill each slot... every slot may have a different width threshold array
            for(var a = 0; a < slots.length; a++){

              var slotName = slots[a];
              var widths = [1260,900,500,-1];
              if(slotName == SITE_NAME + '_btf'){
                  widths = [800,800,550,-1];
              }else if(slotName == SITE_NAME + '_sidebar1'){
                  widths = [1100,850,550,-1];
              }else if(slotName == SITE_NAME + '_btf2'){
                  widths = [800,800,550,-1];
              }else if(slotName == SITE_NAME +'_sidebar2'){
                  widths = [1100,850,550,-1];
              }else if(slotName == SITE_NAME +'_atf'){
                  widths = [800,800,550,-1];
              }else if(slotName == SITE_NAME +'_middle'){
                  widths = [1150,550,-1];
              }else if(slotName == SITE_NAME +'_logo'){
                  widths = [600,-1];
              }

              for(var w = 0; w < widths.length;w++){
                  var aWidth = widths[w];
                  if(width > aWidth){
                    var id = slotName;
                    var sizeIndex = w;
                    var sizeName = slotName;
                    var mySizes = allSizes[id].split(",");
                    var adData = mySizes[sizeIndex];
                    var theWidth = parseInt(adData.split('x')[0]);
                    var theHeight = parseInt(adData.split('x')[1]);

                    var adSize = [theWidth, theHeight];

                    var adArr = sizeName.split('_');

                    if(adArr[1] == 'sidebar1' && width <= 850){
                        continue;
                    }
                    if(adArr[1] == 'sidebar2' && width <= 850){
                        continue;
                    }
                    if(adArr[1] == 'btf2' && width > 850){
                        continue;
                    }
                    if(adArr[1] == 'atf' && width > 850){
                        continue;
                    }
                                        if(adArr[1] == 'middle'){
                        continue;
                    }
                    
                    var fullSizeName = adArr[0] + "_" + adData + "_" + adArr[1];

                    var itemArr = new Array();
                    itemArr['id'] = id;
                    itemArr['full_size_name'] = fullSizeName;
                    itemArr['ad_size'] = adSize;
                    
                    //console.log("adding slot");
                    //console.log(itemArr);                    

                    DFP_SLOTS.push(itemArr);
                                        if((theWidth == 160 && theHeight == 600) ||
                              (theWidth == 300 && theHeight == 250) ||
                              (theWidth == 300 && theHeight == 600) ||
                              (theWidth == 320 && theHeight == 50) ||
                              (theWidth == 468 && theHeight == 60) ||
                              (theWidth == 728 && theHeight == 90)){
                          if(sizeName == (SITE_NAME +'_logo')){
                              console.log("skipping logo ad");
                          }else{

                              var amazonObject = {
                                  slotID: id,
                                  slotName: "/7089059/" + fullSizeName,
                                  sizes: [adSize]
                              };
                              AMAZON_SLOTS.push(amazonObject);
                              //console.log("Amazon slot size match " + theWidth + " , " + theHeight + " for " + fullSizeName);
                              //console.log(amazonObject);                        
                          }
                      }                    
                    
                    break;
                  }
                  
              }
            }




        googletag.cmd.push(function() {



            for(var x = 0; x < DFP_SLOTS.length; x++){
                var dSlot = DFP_SLOTS[x];
                var adSlot = build_slot(dSlot['full_size_name'], dSlot['ad_size'], dSlot['id']);
                allSlots.push(adSlot);
            }

            if(width <= 550){
                var atfPromo = googletag.defineSlot('/7089059/abc57_320x50_ATF_promo', [320, 50], 'abc57_promo').addService(googletag.pubads());
                allSlots.push(atfPromo);
            }else if(width >= 1250){
                var atfPromo = googletag.defineSlot('/7089059/abc57_452x90_atf_promo', [452, 90], 'abc57_promo').addService(googletag.pubads());
                allSlots.push(atfPromo);                
            }
            
            			// Syncor ad in right rail
			if(width > 1100){
				googletag.defineSlot('/7089059/abc57_300x250_sidebar3', [300, 250], 'abc57_sidebar3').addService(googletag.pubads());
			}

            //googletag.pubads().enableSingleRequest();
                            //googletag.pubads().collapseEmptyDivs();
                                                    googletag.pubads().disableInitialLoad();
                
                googletag.enableServices();
                        //alert("enabling");
            //googletag.openConsole();
        });
    </script>

    
 <script>     
     var amazonBids = true;
     
          
        //load the apstag.js library
        !function(a9,a,p,s,t,A,g){if(a[a9])return;function q(c,r){a[a9]._Q.push([c,r])}a[a9]={init:function(){q("i",arguments)},fetchBids:function(){q("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]};A=p.createElement(s);A.async=!0;A.src=t;g=p.getElementsByTagName(s)[0];g.parentNode.insertBefore(A,g)}("apstag",window,document,"script","//c.amazon-adsystem.com/aax2/apstag.js");
    
        
        amazonBids = false;
        apstag.init({
             pubID: 'c5284f18-82aa-4599-abba-7e1a65c7b555', //enter your pub ID here as shown above, it must within quotes
             adServer: 'googletag'
        });
        apstag.fetchBids({
             slots: AMAZON_SLOTS,
             timeout: 2000
        }, function(bids) {
            console.log("amazon bids");
            console.log(bids);
            // set apstag targeting on googletag, then trigger the first DFP request in googletag's disableInitialLoad integration
            googletag.cmd.push(function(){
                 apstag.setDisplayBids();
                 amazonBids = true;
                 //googletag.pubads().refresh();
            });
        });

         
        var oathNetworkId = "11399.1";
        var oathPlacements = new Array();
                    oathPlacements['abc57_300x600_sidebar2'] = '4865774';
            oathPlacements['abc57_160x600_sidebar2'] = '4865775';
            oathPlacements['abc57_300x250_sidebar1'] = '4865776';
            oathPlacements['abc57_728x90_btf'] = '4865777';
            oathPlacements['abc57_320x50_btf2'] = '4865779';
            oathPlacements['abc57_320x50_btf'] = '4865780';
            oathPlacements['abc57_320x50_atf'] = '4865781';
        
        //cbs58_728x90_btf2
        //cbs58_300x600_sidebar2
        //cbs58_728x90_middle
        var sovrnPlacements = new Array();
                sovrnPlacements['abc57_160x600_sidebar2'] = '574554';
        sovrnPlacements['abc57_300x250_sidebar1'] = '574555';
        sovrnPlacements['abc57_300x600_sidebar2'] = '574556';
        sovrnPlacements['abc57_320x50_ATF'] = '574557';
        sovrnPlacements['abc57_320x50_BTF'] = '574558';
        sovrnPlacements['abc57_320x50_BTF2'] = '574559';
        sovrnPlacements['abc57_468x60_ATF'] = '574560';
        sovrnPlacements['abc57_468x60_BTF'] = '574561';
        sovrnPlacements['abc57_468x60_BTF2'] = '574562';
        sovrnPlacements['abc57_728x90_BTF'] = '574563';
        

        var appnexusPlacements = new Array();
                appnexusPlacements['abc57_160x600_sidebar2'] = '13659565';
        appnexusPlacements['abc57_300x250_sidebar1'] = '13659566';
        appnexusPlacements['abc57_300x600_sidebar2'] = '13659567';
        appnexusPlacements['abc57_320x50_atf'] = '13659568';
        appnexusPlacements['abc57_320x50_btf'] = '13659569';
        appnexusPlacements['abc57_320x50_btf2'] = '13659570';
        appnexusPlacements['abc57_468x60_atf'] = '13659571';
        appnexusPlacements['abc57_468x60_btf'] = '13659572';
        appnexusPlacements['abc57_468x60_btf2'] = '13659573';
        appnexusPlacements['abc57_728x90_btf'] = '13659574';
        
        var rubiconPlacements = new Array();

                rubiconPlacements['abc57_300x250_sidebar1'] = '884066';
        rubiconPlacements['abc57_300x600_sidebar2'] = '884068';
        rubiconPlacements['abc57_728x90_ATF'] = '884072';
        rubiconPlacements['abc57_160x600_sidebar2'] = '884070';
        rubiconPlacements['abc57_728x90_BTF'] = '884074';
        rubiconPlacements['abc57_728x90_BTF2'] = '884076';
        rubiconPlacements['abc57_320x50_BTF'] = '884082';
        rubiconPlacements['abc57_320x50_BTF2'] = '884086';
        rubiconPlacements['abc57_320x50_ATF'] = '884078';
                function getPlacementId(adName, bidder){
            var theArray = new Array();
            if(bidder == 'oath'){
                theArray = oathPlacements;
            }
            else if(bidder == 'sovrn'){
                theArray = sovrnPlacements;
            }
            else if(bidder == 'appnexus'){
                theArray = appnexusPlacements;
            }
            else if(bidder == 'rubicon'){
                theArray = rubiconPlacements;
            }
            //alert("the array length " + theArray.length + " " + bidder);

            for(adKey in theArray){
                var adLower = adKey.toLowerCase();
                //console.log("adnamexxx " + adName + " vs " + adLower);
                if(adName == adLower){
                    //console.log(bidder + " found " + adName);
                    return theArray[adKey];
                }
            }
            return null;
        }


        function build_prebid(fullSizeName, adSize, id){
            var my_sizes = [
                adSize
            ];

            var sovrnId = getPlacementId(fullSizeName, 'sovrn');
            var oathId = getPlacementId(fullSizeName, 'oath');
            var appnexusId = getPlacementId(fullSizeName, 'appnexus');
            var rubiconId = getPlacementId(fullSizeName, 'rubicon');
            var allBids = new Array();
            
            //remove OATH pre matt's request
            /*
            if(oathId === null){
                console.log("no oath bid for " + fullSizeName);
            }else{
                if(fullSizeName.indexOf('320x50') !== -1){
                    var thePosition = fullSizeName.split("_")[2];
                    var mobileDcn = '';
                    mobileDcn = '2c9d2b5001666636f5973a9d615e0044';
                    allBids.push({
                            bidder: 'onemobile',
                            params: {
                                dcn: mobileDcn,
                                pos: thePosition
                            }
                        });
                }else{
                    allBids.push({
                            bidder: 'onedisplay',
                            params: {
                                placement: oathId,
                                network: "11399.1"
                            }
                        });
                }
            }
            */
            if(sovrnId === null){
                console.log("no sovrn bid for " + fullSizeName);
            }else{
                allBids.push({
                        bidder: 'sovrn',
                        params: {
                            tagid: sovrnId
                        }
                    });
            }

            if(rubiconId === null){
                console.log("no rubicon bid for " + fullSizeName);
            }else{
                var rubiconSite = '';
                rubiconSite = '181062';                if(fullSizeName.indexOf('320x50') !== -1){
                    //site id is different for mobile
                    rubiconSite = '181072';                }
                allBids.push({
                        bidder: 'rubicon',
                        params: {
                            accountId: '17798',
                            siteId: rubiconSite,
                            zoneId: rubiconId
                        }
                    });
            }

            if(appnexusId === null){
                console.log("no appnexus bid for " + fullSizeName);
            }else{
                allBids.push({
                        bidder: 'appnexusAst',
                        params: {
                            placementId : appnexusId
                        }
                    });
            }
            if(allBids.length <= 0){
                return null;
            }

            var adUnit = {
                code: "/7089059/" + fullSizeName,
                mediaTypes: {
                    banner: {
                        sizes: my_sizes
                    }
                },
                bids: allBids
            };

            return adUnit;
        }
        var allAdUnits = new Array();
        var PREBID_TIMEOUT = 1000;

        for(var x = 0; x < DFP_SLOTS.length; x++){
            var dSlot = DFP_SLOTS[x];
            var adUnit = build_prebid(dSlot['full_size_name'], dSlot['ad_size'], dSlot['id']);
            if(adUnit !== null){
                allAdUnits.push(adUnit);
            }
        }
        console.log("------- PREBID AD UNITS ----------");
        console.log(allAdUnits);

            /*
            var sizes = [
                [300, 250]
            ];
            var adUnits = [{
                code: '/19968336/header-bid-tag-1',
                mediaTypes: {
                    banner: {
                        sizes: sizes
                    }
                },
                bids: [{
                    bidder: 'appnexus',
                    params: {
                        placementId: 13144370
                    }
                }]
            }];
            */

            // ======== DO NOT EDIT BELOW THIS LINE =========== //
            /*
            var googletag = googletag || {};
            googletag.cmd = googletag.cmd || [];
            googletag.cmd.push(function() {
                googletag.pubads().disableInitialLoad();
            });
            */
            var pbjs = pbjs || {};
            pbjs.que = pbjs.que || [];

            pbjs.que.push(function() {
                pbjs.setConfig({ priceGranularity: "dense" });
                                    var siteId = '554320b1-2594-444b-81e4-0cfb7d17791a';

                                         siteId = 'ff8b1242-cd4a-4c2a-89be-4c959a2724bc';
                                            //if $site_name eq 'telemundowi'}
                        //site: '554320b1-2594-444b-81e4-0cfb7d17791a',

                    pbjs.enableAnalytics([{
                        provider: 'pubwise',
                        options: {
                            site: siteId,
                            endpoint:'https://api.pubwise.io/api/v4/event/add/'
                            }
                        }]
                    );
                                pbjs.addAdUnits(allAdUnits);
                pbjs.requestBids({
                    bidsBackHandler: initAdserver
                });
            });

            function refreshAdsIfReady(){
                if(googletag.pubadsReady && amazonBids){
                    console.log("refreshing ads");
                    googletag.pubads().refresh(allSlots, {
                        changeCorrelator: true
                    });
                }else{
                    console.log("not ready");
                    setTimeout(function(){
                        refreshAdsIfReady();
                    }, 100);
                }
            }


            function initAdserver() {
                if (pbjs.initAdserverSet) return;
                pbjs.initAdserverSet = true;
                googletag.cmd.push(function() {
                    pbjs.que.push(function() {
                        pbjs.setTargetingForGPTAsync();
                        refreshAdsIfReady();
                    });
                });
            }

            setTimeout(function() {

                initAdserver();
            }, PREBID_TIMEOUT);

            /*
            googletag.cmd.push(function() {
                googletag.defineSlot('/19968336/header-bid-tag-1', sizes, 'div-1')
                	.addService(googletag.pubads());
                googletag.pubads().enableSingleRequest();
                googletag.enableServices();
            });
             */

            $(document).ready(function(){

                $('body').on('click', '#debug_prebid', function(){
                    alert("debugging prebid");
                    var responses = pbjs.getBidResponses();
                    var winners = pbjs.getAllWinningBids();
                    var output = [];
                    Object.keys(responses).forEach(function(adUnitCode) {
                      var response = responses[adUnitCode];
                      response.bids.forEach(function(bid) {
                        output.push({
                          bid: bid,
                          adunit: adUnitCode,
                          adId: bid.adId,
                          bidder: bid.bidder,
                          time: bid.timeToRespond,
                          cpm: bid.cpm,
                          msg: bid.statusMessage,
                          rendered: !!winners.find(function(winner) {
                            return winner.adId==bid.adId;
                          })
                        });
                      });
                    });
                    if (output.length) {
                      if (console.table) {
                        console.table(output);
                      } else {
                        for (var j = 0; j < output.length; j++) {
                          console.log(output[j]);
                        }
                      }
                    } else {
                      console.warn('NO prebid responses');
                    }
                });
                            });

    </script>
 


    <script>
        if (!Date.now) {
            Date.now = function() { return new Date().getTime(); }
        }

        </script>



    <!-- Google Analytics -->
        	        
    <script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-56368842-1', 'auto');
		ga('send', 'pageview');
    </script>
    

    <!-- Begin comScore Tag -->
    <script>
		var _comscore = _comscore || [];
		_comscore.push({ c1: "2", c2: "23481286" });
		(function() {
			var s = document.createElement("script"), el = document.getElementsByTagName("script")[0]; s.async = true;
			s.src = (document.location.protocol == "https:" ? "https://sb" : "http://b") + ".scorecardresearch.com/beacon.js";
			el.parentNode.insertBefore(s, el);
		})();
    </script>
    <noscript>
        <img src="http://b.scorecardresearch.com/p?c1=2&c2=23481286&cv=2.0&cj=1" />
    </noscript>
    <!-- End comScore Tag -->

    <!-- Traffic Widget -->
    
    <!-- Nativo ads -->
    	<script src="//s.ntv.io/serve/load.js" async></script>
                <!-- log errors - only if flag set -->
        
    
</head>
<body>
	<!-- TAKEOVER -->
    
	<div id="fb-root"></div>
	<script>
            var theAppId = "808704082583441";
                            theAppId = "989981024397295";
            
		(function(d, s, id) {
			var js, fjs = d.getElementsByTagName(s)[0];
			if (d.getElementById(id)) return;
			js = d.createElement(s); js.id = id;
			js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.8&appId=" + theAppId;
			fjs.parentNode.insertBefore(js, fjs);
		}(document, 'script', 'facebook-jssdk'));
    </script>


    <!-- Twitter -->
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

    

    <style>
.market-alert-container {
	background-color: #009ec6;
	background-position: 50%;
	text-align: center;
}

.market-alert-container .market-alert-text {
	display: flex;
	flex-direction: column;
	color: white;
	font-size: 1.8rem;
	line-height: 2.2rem;
	width: 95%;
	margin: 0 auto;
	letter-spacing: 0.3px;
}

.market-alert-container .market-alert-text a {
	color: #000000;
	font-weight: bold;
}

.market-alert-text p {
	margin: 1.5rem 0 1.5rem;
}

i.market-alert-close {
	color: white;
	cursor: pointer;
	position: relative;
	font-size: 2rem;
	padding: 0.2rem 0.45rem;
	float: right;
	top: 1rem;
	right: 1rem;
}

i.market-alert-close:hover,
i.market-alert-close:focus {
	color: black;
}

.market-alert-container + .market-alert-container {
	border-top: 1px solid;
}

.market-alert-container	.btn-primary {
	display: inline-block;
	font-size: 1.6rem;
	text-transform: uppercase;
	padding: 1.1rem 5.7rem;
}

.lg-col-wrapper .market-alert-container {
	margin: -3rem 0 5rem;
}

.btn-primary.text-brand-black, .form-wrap input[type="submit"].text-brand-black, .form-wrap button.text-brand-black {
    color: #252525;
}
.btn-primary.white, .form-wrap input[type="submit"].white, .form-wrap button.white {
    background-color: #fff;
}
.btn-primary, .form-wrap input[type="submit"], .form-wrap button {
    color: #fff;
    font-size: 2rem;
    font-weight: 600;
    text-decoration: none;
    text-align: center;
    border: 2px solid transparent;
    border-radius: 50px;
    white-space: nowrap;
    padding: 1.3rem 2.8rem;
    margin-bottom: 1rem;
    opacity: 1;
}

.btn-primary.inverted-white:hover, .form-wrap input[type="submit"].inverted-white:hover, .form-wrap button.inverted-white:hover {
    color: #fff;
    border: 2px solid #fff;
    -webkit-filter: none;
    filter: none;
    background: transparent;
}

.btn-primary:hover, .form-wrap input[type="submit"]:hover, .form-wrap button:hover, .btn-primary:focus, .form-wrap input[type="submit"]:focus, .form-wrap button:focus, .btn-primary:active, .form-wrap input[type="submit"]:active, .form-wrap button:active {
    -webkit-filter: brightness(115%);
    filter: brightness(115%);
    text-decoration: none;
}

@media screen and (max-width: 900px) {
	.market-alert-container .rescan-alert-text {
		font-size: 2rem;
	}
}
</style>

<script>
    $(document).ready(function(){
        $('.market-alert-close').on('click', function(e){
            if(e.target) targ = e.target;
            else if (e.srcElement) targ = e.srcElement;
            if(targ.nodeType==3) targ = targ.parentNode;

            var alt_box = $(targ.parentNode);

            alt_box.fadeOut();

        });        
    });
</script>




    <header>
    	<div class="section-inner clearfix">
        	<a href="/">
                <img class="logo logo-abc57" src="/images/logo_abc57.png" alt="ABC57 South Bend">
            	<img class="logo-stacked logo-stacked-abc57" src="/images/logo_abc57_stacked.png">
            </a>
            <div class="header-contact">
                <span><span>Tip Line:</span>
                    574-344-5557</span> <span class="header-contact-spacer">|</span>
                    <a href="mailto:news57@abc57.com">news57@abc57.com</a>
                                </div>
            <div class="header-social-search">
                                                <a target="_blank" rel="noopener" href="https://www.facebook.com/abc57"><i class="header-facebook fa fa-facebook" aria-hidden="true"></i></a>
                <a target="_blank" rel="noopener" href="https://twitter.com/ABC57News"><i class="header-twitter fa fa-twitter" aria-hidden="true"></i></a>
                <button class="main-nav-search-btn"><i class="fa fa-search" aria-hidden="true"></i></button>
                <button class="main-nav-menu-btn"><i class="fa fa-bars" aria-hidden="true"></i></button>
                <form id="search_form" action="/search/" method="GET">
                    <div class="header-search-input-wrap">
                        <input type="text" name="q" placeholder="Search....">
                        <button name="submit" type="submit"><i class="fa fa-search" aria-hidden="true"></i></button>
                    </div>
                </form>
            </div>
                    </div>
        <div id="main-nav">
        	<nav class="section-inner clearfix">
                <span class="main-nav-close-btn"><i class="fa fa-chevron-left" aria-hidden="true"></i> Close</span>
                <ul>
                    
                                            <li><a href="/">Home</a></li>
                                                                <li class="submenu-wrap">
                            <a href="/news">News<!--<i class="submenu-wrap-arrow submenu-wrap-arrow-down fa fa-chevron-down" aria-hidden="true"></i>--> <i class="submenu-wrap-arrow submenu-wrap-arrow-right fa fa-chevron-right" aria-hidden="true"></i></a>
                                                            <ul class="submenu">
                                	<li class="submenu-back-btn"><span><i class="fa fa-chevron-left" aria-hidden="true"></i> Back</span></li>
                                    <li><a href="/news">News Home</a></li>
                                                                            <li><a href="/57-minute-miracle">57 Minute Miracle</a></li>
                                                                            <li><a href="/abc57-investigates">ABC57 Investigates</a></li>
                                                                            <li><a href="/addicted-america">Addicted America</a></li>
                                                                            <li><a href="/cool-schools">Cool Schools</a></li>
                                                                            <li><a href="https://www.abc57.com/southbend/linda-weldy/">Linda Weldy</a></li>
                                                                            <li><a href="/made-in-michiana">Made in Michiana</a></li>
                                                                            <li><a href="/michiana-2027">Michiana 2027</a></li>
                                                                            <li><a href="/military-greetings">Military Greetings</a></li>
                                                                            <li><a href="/the-mongo-murders">The Mongo Murders</a></li>
                                                                            <li><a href="/real-michiana">Real Michiana</a></li>
                                                                            <li><a href="/the-river">The River</a></li>
                                                                            <li><a href="https://www.abc57.com/news/wall-of-honor-2018">Wall of Honor</a></li>
                                                                            <li><a href="https://www.abc57.com/james-miller-homicide">Who killed James Miller?</a></li>
                                                                            <li><a href="/your-voice-your-vote">Your Voice, Your Vote</a></li>
                                    
                                </ul>
                                                    </li>
                                            <li class="submenu-wrap">
                            <a href="/weather">Weather<!--<i class="submenu-wrap-arrow submenu-wrap-arrow-down fa fa-chevron-down" aria-hidden="true"></i>--> <i class="submenu-wrap-arrow submenu-wrap-arrow-right fa fa-chevron-right" aria-hidden="true"></i></a>
                                                            <ul class="submenu">
                                	<li class="submenu-back-btn"><span><i class="fa fa-chevron-left" aria-hidden="true"></i> Back</span></li>
                                    <li><a href="/weather">Weather Home</a></li>
                                                                            <li><a href="https://www.abc57.com/weather/bus-stop-forecast">Bus stop forecast</a></li>
                                                                            <li><a href="/weather_map">Interactive radar</a></li>
                                                                            <li><a href="https://www.abc57.com/project-blizzard">Project Blizzard</a></li>
                                                                            <li><a href="/project-tornado">Project Tornado                                                                            </a></li>
                                                                            <li><a href="/closings">School closings</a></li>
                                                                            <li><a href="/weather/10-day-forecast">Ten day forecast</a></li>
                                                                            <li><a href="http://www.abc57.com/news/download-abc57s-weather-app-for-your-mobile-devices/">Weather app</a></li>
                                    
                                </ul>
                                                    </li>
                                            <li class="submenu-wrap">
                            <a href="/sports">Sports<!--<i class="submenu-wrap-arrow submenu-wrap-arrow-down fa fa-chevron-down" aria-hidden="true"></i>--> <i class="submenu-wrap-arrow submenu-wrap-arrow-right fa fa-chevron-right" aria-hidden="true"></i></a>
                                                            <ul class="submenu">
                                	<li class="submenu-back-btn"><span><i class="fa fa-chevron-left" aria-hidden="true"></i> Back</span></li>
                                    <li><a href="/sports">Sports Home</a></li>
                                                                            <li><a href="/57-tipoff">57 Tipoff</a></li>
                                                                            <li><a href="/cub-reporter">Cub Reporter</a></li>
                                                                            <li><a href="/friday-night-football">Friday Night Football</a></li>
                                                                            <li><a href="/notre-dame-sports">Notre Dame Sports</a></li>
                                                                            <li><a href="/saturday-kickoff">Saturday Kickoff</a></li>
                                                                            <li><a href="/south-bend-cubs">South Bend Cubs</a></li>
                                                                            <li><a href="/sports-tv-schedules">Sports TV Schedules</a></li>
                                    
                                </ul>
                                                    </li>
                                            <li class="submenu-wrap">
                            <a href="/about">About Us<!--<i class="submenu-wrap-arrow submenu-wrap-arrow-down fa fa-chevron-down" aria-hidden="true"></i>--> <i class="submenu-wrap-arrow submenu-wrap-arrow-right fa fa-chevron-right" aria-hidden="true"></i></a>
                                                            <ul class="submenu">
                                	<li class="submenu-back-btn"><span><i class="fa fa-chevron-left" aria-hidden="true"></i> Back</span></li>
                                    <li><a href="/about">About Us Home</a></li>
                                                                            <li><a href="/abc57-program-schedule">ABC57 Program schedule                                                                            </a></li>
                                                                            <li><a href="/careers ">Careers</a></li>
                                                                            <li><a href="/contact">Contact us</a></li>
                                                                            <li><a href="/bios">Meet our team</a></li>
                                                                            <li><a href="/reception-issues">Reception issues                                                                            </a></li>
                                                                            <li><a href="/when-to-watch">When to watch                                                                            </a></li>
                                                                            <li><a href="/where-to-watch">Where to watch</a></li>
                                    
                                </ul>
                                                    </li>
                                            <li class="submenu-wrap">
                            <a href="/sweepstakes">Sweepstakes<!--<i class="submenu-wrap-arrow submenu-wrap-arrow-down fa fa-chevron-down" aria-hidden="true"></i>--> <i class="submenu-wrap-arrow submenu-wrap-arrow-right fa fa-chevron-right" aria-hidden="true"></i></a>
                                                            <ul class="submenu">
                                	<li class="submenu-back-btn"><span><i class="fa fa-chevron-left" aria-hidden="true"></i> Back</span></li>
                                    <li><a href="/sweepstakes">Sweepstakes Home</a></li>
                                                                            <li><a href="/sweepstakes-winners">Sweepstakes winners</a></li>
                                    
                                </ul>
                                                    </li>
                    
                    <li><a href="http://metv.com/setmarket.php?marketID=46" target="_blank" rel="noopener">M<span class="lowercase-text">e</span>TV</a></li>
                </ul>
            </nav>
        </div>
    </header>
            

    
    <!-- TAKEOVER -->
    
    
    <div id="wrapper" class="clearfix">
    	<!-- HIDE TOP ADS FOR TAKEOVERS -->
                <div class="header-ads">
                            <div class="header-ad-leaderboard">
                    <div id="abc57_btf">
                        <script>
                            googletag.cmd.push(function() { googletag.display('abc57_btf'); });
                        </script>
                    </div>
                </div>
                                    <div class="header-ad-promo">
                                <div id="abc57_promo">
                    <div id="managed_ad" >
                        <a id="managed_ad_link" href="https://www.abc57.com/sounds-of-the-season-2019">
                        </a>
                    </div>
                    <script>

                        var promoLabel = "Promo";
                                                    promoLabel = "sounds-of-the-season-12-1-19-1-3-19";
                                                function trackPromoClick(url){
                          var eventCategory = 'PromoAd';
                          if (window.ga) {

                                var tracker = ga.getAll()[0];
                                if (tracker)
                                    tracker.send("event", {
                                  'eventCategory': eventCategory,
                                  'eventAction': "promoclick",
                                  'eventLabel': promoLabel,
                                  'eventValue': 1,
                                  'nonInteraction': true,
                                  'hitCallback' : function(){
                                      window.location = url;
                                  }
                                });
                          } else{
                              window.location = url;
                          }
                        }

                        var width = window.innerWidth || document.documentElement.clientWidth;
                        if(width > 1250 || width <= 550){
                                                           var image = new Image();
                                image.onload = function() {

                                  $('#managed_ad_link').append(image);
                                };
                               if(width > 1250){
                                   image.width = 452;
                                   image.height = 90;
                                   image.src = "https://newscdn.weigelbroadcasting.com/Ae3CZ-1512152691-27-promo_ads-soundsoftheseason.jpg";

                               }else if(width <= 550){
                                   image.width = 320;
                                   image.height = 50;
                                   image.src = "https://newscdn.weigelbroadcasting.com/Ae3CZ-1512152691-27-promo_ads-soundsoftheseason.jpg";
                               }

                               $('#managed_ad_link').on('click', function(e){
                                   e.preventDefault();
                                   trackPromoClick(this.href);
                                   return false;
                               });
                                                    }
                    </script>
                </div>
                            </div>
                    </div>
        
       

        <div id="main-content">
                        <div class="content-header">
                                <h1>Missing kayaker pulled from St. Joseph River in Niles has died</h1>
                <div class="content-byline">
                                                                     <span>By:</span>
                                                    <a class="content-byline-author" href="/bios/melissa-hudson">Melissa Hudson</a>
                                                                        <a class="content-byline-facebook" href="https://www.facebook.com/MelissaHudsonABC57">Facebook</a>
                        
                         |                                                     <a class="content-byline-twitter" href="https://twitter.com/MelHudsonABC57">Twitter</a>
                                                            </div>
                <div class="content-date-posted">

                    <span>Posted:</span>                         Jan  1, 2020 11:36 AM EST                                                                | <span>Updated:</span> Jan  1, 2020  1:39 PM EST                                                        </div>
            </div>
            <div class="content-wrap clearfix">
            	<div class="content-share-wrap">
                	                    <div class="content-share">
                        <ul class="rrssb-buttons">
                            <li class="rrssb-facebook">
                                <!--  Replace with your URL. For best results, make sure you page has the proper FB Open Graph tags in header:
                                https://developers.facebook.com/docs/opengraph/howtos/maximizing-distribution-media-content/ -->
                                <a href="https://www.facebook.com/sharer/sharer.php?u=https://www.abc57.com/news/crews-searching-for-missing-kayaker-in-niles" class="popup">
                                    <span class="rrssb-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid" width="29" height="29" viewBox="0 0 29 29">
                                            <path d="M26.4 0H2.6C1.714 0 0 1.715 0 2.6v23.8c0 .884 1.715 2.6 2.6 2.6h12.393V17.988h-3.996v-3.98h3.997v-3.062c0-3.746 2.835-5.97 6.177-5.97 1.6 0 2.444.173 2.845.226v3.792H21.18c-1.817 0-2.156.9-2.156 2.168v2.847h5.045l-.66 3.978h-4.386V29H26.4c.884 0 2.6-1.716 2.6-2.6V2.6c0-.885-1.716-2.6-2.6-2.6z" class="cls-2" fill-rule="evenodd" />
                                        </svg>
                                    </span>
                                    <span class="rrssb-text">facebook</span>
                                </a>
                            </li>
                            <li class="rrssb-twitter">
                                <!-- Replace href with your Meta and URL information  -->
                                <a href="http://twitter.com/home?status=https://www.abc57.com/news/crews-searching-for-missing-kayaker-in-niles" class="popup">
                                    <span class="rrssb-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">
                                            <path d="M24.253 8.756C24.69 17.08 18.297 24.182 9.97 24.62c-3.122.162-6.22-.646-8.86-2.32 2.702.18 5.375-.648 7.507-2.32-2.072-.248-3.818-1.662-4.49-3.64.802.13 1.62.077 2.4-.154-2.482-.466-4.312-2.586-4.412-5.11.688.276 1.426.408 2.168.387-2.135-1.65-2.73-4.62-1.394-6.965C5.574 7.816 9.54 9.84 13.802 10.07c-.842-2.738.694-5.64 3.434-6.48 2.018-.624 4.212.043 5.546 1.682 1.186-.213 2.318-.662 3.33-1.317-.386 1.256-1.248 2.312-2.4 2.942 1.048-.106 2.07-.394 3.02-.85-.458 1.182-1.343 2.15-2.48 2.71z" />
                                        </svg>
                                    </span>
                                    <span class="rrssb-text">twitter</span>
                                </a>
                            </li>
                            <!--<li class="rrssb-pinterest">
                                <a href="http://pinterest.com/pin/create/button/?url=">
                                    <span class="rrssb-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">
                                            <path d="M14.02 1.57c-7.06 0-12.784 5.723-12.784 12.785S6.96 27.14 14.02 27.14c7.062 0 12.786-5.725 12.786-12.785 0-7.06-5.724-12.785-12.785-12.785zm1.24 17.085c-1.16-.09-1.648-.666-2.558-1.22-.5 2.627-1.113 5.146-2.925 6.46-.56-3.972.822-6.952 1.462-10.117-1.094-1.84.13-5.545 2.437-4.632 2.837 1.123-2.458 6.842 1.1 7.557 3.71.744 5.226-6.44 2.924-8.775-3.324-3.374-9.677-.077-8.896 4.754.19 1.178 1.408 1.538.49 3.168-2.13-.472-2.764-2.15-2.683-4.388.132-3.662 3.292-6.227 6.46-6.582 4.008-.448 7.772 1.474 8.29 5.24.58 4.254-1.815 8.864-6.1 8.532v.003z" />
                                        </svg>
                                    </span>
                                    <span class="rrssb-text">pinterest</span>
                                </a>
                            </li>
                            <li class="rrssb-googleplus">
                                <a href="https://plus.google.com/share?url=" class="popup">
                                    <span class="rrssb-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">
                                            <path d="M14.703 15.854l-1.22-.948c-.37-.308-.88-.715-.88-1.46 0-.747.51-1.222.95-1.662 1.42-1.12 2.84-2.31 2.84-4.817 0-2.58-1.62-3.937-2.4-4.58h2.098l2.203-1.384h-6.67c-1.83 0-4.467.433-6.398 2.027C3.768 4.287 3.06 6.018 3.06 7.576c0 2.634 2.02 5.328 5.603 5.328.34 0 .71-.033 1.083-.068-.167.408-.336.748-.336 1.324 0 1.04.55 1.685 1.01 2.297-1.523.104-4.37.273-6.466 1.562-1.998 1.187-2.605 2.915-2.605 4.136 0 2.512 2.357 4.84 7.288 4.84 5.822 0 8.904-3.223 8.904-6.41.008-2.327-1.36-3.49-2.83-4.73h-.01zM10.27 11.95c-2.913 0-4.232-3.764-4.232-6.036 0-.884.168-1.797.744-2.51.543-.68 1.49-1.12 2.372-1.12 2.807 0 4.256 3.797 4.256 6.24 0 .613-.067 1.695-.845 2.48-.537.55-1.438.947-2.295.95v-.003zm.032 13.66c-3.62 0-5.957-1.733-5.957-4.143 0-2.408 2.165-3.223 2.91-3.492 1.422-.48 3.25-.545 3.556-.545.34 0 .52 0 .767.034 2.574 1.838 3.706 2.757 3.706 4.48-.002 2.072-1.736 3.664-4.982 3.648l.002.017zM23.254 11.89V8.52H21.57v3.37H18.2v1.714h3.367v3.4h1.684v-3.4h3.4V11.89" />
                                        </svg>
                                    </span>
                                    <span class="rrssb-text">google+</span>
                                </a>
                            </li>-->
                            <li class="rrssb-email">
                                <!-- Replace subject with your message using URL Endocding: http://meyerweb.com/eric/tools/dencoder/ -->
                                <a id="mail_link" href="mailto:?subject=Missing kayaker pulled from St. Joseph River in Niles has died&body=https%3A%2F%2Fwww.abc57.com%2Fnews%2Fcrews-searching-for-missing-kayaker-in-niles">
                                    <span class="rrssb-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">
                                            <path d="M20.11 26.147c-2.335 1.05-4.36 1.4-7.124 1.4C6.524 27.548.84 22.916.84 15.284.84 7.343 6.602.45 15.4.45c6.854 0 11.8 4.7 11.8 11.252 0 5.684-3.193 9.265-7.398 9.3-1.83 0-3.153-.934-3.347-2.997h-.077c-1.208 1.986-2.96 2.997-5.023 2.997-2.532 0-4.36-1.868-4.36-5.062 0-4.75 3.503-9.07 9.11-9.07 1.713 0 3.7.4 4.6.972l-1.17 7.203c-.387 2.298-.115 3.3 1 3.4 1.674 0 3.774-2.102 3.774-6.58 0-5.06-3.27-8.994-9.304-8.994C9.05 2.87 3.83 7.545 3.83 14.97c0 6.5 4.2 10.2 10 10.202 1.987 0 4.09-.43 5.647-1.245l.634 2.22zM16.647 10.1c-.31-.078-.7-.155-1.207-.155-2.572 0-4.596 2.53-4.596 5.53 0 1.5.7 2.4 1.9 2.4 1.44 0 2.96-1.83 3.31-4.088l.592-3.72z" />
                                        </svg>
                                    </span>
                                    <span class="rrssb-text">email</span>
                                </a>
                            </li>
                        </ul>
					</div><!-- .content-share-wrap -->
                </div>

                                                            <img class="content-header-img" src="https://newscdn.weigelbroadcasting.com/RQmDs-1577898607-154385-blog-searchforkayaker.jpg" />
                                                                            <p>NILES, Mich. -- The man who was pulled from the St. Joseph River in Niles around noon on Wednesday has died, according to law enforcement.</p><p>Around 8:30 a.m., four men launched a kayak near the dam at a legal launch site, according to Niles Fire Chief Larry Lamb.</p><p>“We had four adult males enter that actually entered the water just up there on the other side of the dam. Two actually had a lot of kayaking experience and the other two didn’t have any," Lamb said.</p><p>At some point all four men entered the water.</p><p>One paddled to safety and called for help.</p><p>A second male was out of the water by the time first responders arrived.</p><p>The third was rescued from the water by first responders.</p><p>All three were in stable condition.</p><p>Emergency crews spent the morning searching for the fourth kayaker.</p><p>“The last known location for the fourth victim was up here near the dam area. So we investigated, there’s a cable system up there and a large log and we were able to shake the log free and recover the fourth victim,” Lamb said.</p><p>The fourth man was found and transported to the hospital. He was pronounced deceased a short time after being taken to the hospital, according to law enforcement.</p><p>“We would like to make sure that people know that they shouldn’t be going into the river unless they really know what they’re doing, especially above a dam,” Lamb said.</p>

                                <div class="content-share-wrap">
                    <span class="content-share-wrap-title">Share this article:</span>                     <div class="content-share">
                        <ul class="rrssb-buttons">
                            <li class="rrssb-facebook">
                                <!--  Replace with your URL. For best results, make sure you page has the proper FB Open Graph tags in header:
                                https://developers.facebook.com/docs/opengraph/howtos/maximizing-distribution-media-content/ -->
                                <a href="https://www.facebook.com/sharer/sharer.php?u=https://www.abc57.com/news/crews-searching-for-missing-kayaker-in-niles" class="popup">
                                    <span class="rrssb-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid" width="29" height="29" viewBox="0 0 29 29">
                                            <path d="M26.4 0H2.6C1.714 0 0 1.715 0 2.6v23.8c0 .884 1.715 2.6 2.6 2.6h12.393V17.988h-3.996v-3.98h3.997v-3.062c0-3.746 2.835-5.97 6.177-5.97 1.6 0 2.444.173 2.845.226v3.792H21.18c-1.817 0-2.156.9-2.156 2.168v2.847h5.045l-.66 3.978h-4.386V29H26.4c.884 0 2.6-1.716 2.6-2.6V2.6c0-.885-1.716-2.6-2.6-2.6z" class="cls-2" fill-rule="evenodd" />
                                        </svg>
                                    </span>
                                    <span class="rrssb-text">facebook</span>
                                </a>
                            </li>
                            <li class="rrssb-twitter">
                                <!-- Replace href with your Meta and URL information  -->
                                <a href="http://twitter.com/home?status=https://www.abc57.com/news/crews-searching-for-missing-kayaker-in-niles" class="popup">
                                    <span class="rrssb-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">
                                            <path d="M24.253 8.756C24.69 17.08 18.297 24.182 9.97 24.62c-3.122.162-6.22-.646-8.86-2.32 2.702.18 5.375-.648 7.507-2.32-2.072-.248-3.818-1.662-4.49-3.64.802.13 1.62.077 2.4-.154-2.482-.466-4.312-2.586-4.412-5.11.688.276 1.426.408 2.168.387-2.135-1.65-2.73-4.62-1.394-6.965C5.574 7.816 9.54 9.84 13.802 10.07c-.842-2.738.694-5.64 3.434-6.48 2.018-.624 4.212.043 5.546 1.682 1.186-.213 2.318-.662 3.33-1.317-.386 1.256-1.248 2.312-2.4 2.942 1.048-.106 2.07-.394 3.02-.85-.458 1.182-1.343 2.15-2.48 2.71z" />
                                        </svg>
                                    </span>
                                    <span class="rrssb-text">twitter</span>
                                </a>
                            </li>
                            <!--<li class="rrssb-pinterest">
                                <a href="http://pinterest.com/pin/create/button/?url=">
                                    <span class="rrssb-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">
                                            <path d="M14.02 1.57c-7.06 0-12.784 5.723-12.784 12.785S6.96 27.14 14.02 27.14c7.062 0 12.786-5.725 12.786-12.785 0-7.06-5.724-12.785-12.785-12.785zm1.24 17.085c-1.16-.09-1.648-.666-2.558-1.22-.5 2.627-1.113 5.146-2.925 6.46-.56-3.972.822-6.952 1.462-10.117-1.094-1.84.13-5.545 2.437-4.632 2.837 1.123-2.458 6.842 1.1 7.557 3.71.744 5.226-6.44 2.924-8.775-3.324-3.374-9.677-.077-8.896 4.754.19 1.178 1.408 1.538.49 3.168-2.13-.472-2.764-2.15-2.683-4.388.132-3.662 3.292-6.227 6.46-6.582 4.008-.448 7.772 1.474 8.29 5.24.58 4.254-1.815 8.864-6.1 8.532v.003z" />
                                        </svg>
                                    </span>
                                    <span class="rrssb-text">pinterest</span>
                                </a>
                            </li>
                            <li class="rrssb-googleplus">
                                <a href="https://plus.google.com/share?url=" class="popup">
                                    <span class="rrssb-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">
                                            <path d="M14.703 15.854l-1.22-.948c-.37-.308-.88-.715-.88-1.46 0-.747.51-1.222.95-1.662 1.42-1.12 2.84-2.31 2.84-4.817 0-2.58-1.62-3.937-2.4-4.58h2.098l2.203-1.384h-6.67c-1.83 0-4.467.433-6.398 2.027C3.768 4.287 3.06 6.018 3.06 7.576c0 2.634 2.02 5.328 5.603 5.328.34 0 .71-.033 1.083-.068-.167.408-.336.748-.336 1.324 0 1.04.55 1.685 1.01 2.297-1.523.104-4.37.273-6.466 1.562-1.998 1.187-2.605 2.915-2.605 4.136 0 2.512 2.357 4.84 7.288 4.84 5.822 0 8.904-3.223 8.904-6.41.008-2.327-1.36-3.49-2.83-4.73h-.01zM10.27 11.95c-2.913 0-4.232-3.764-4.232-6.036 0-.884.168-1.797.744-2.51.543-.68 1.49-1.12 2.372-1.12 2.807 0 4.256 3.797 4.256 6.24 0 .613-.067 1.695-.845 2.48-.537.55-1.438.947-2.295.95v-.003zm.032 13.66c-3.62 0-5.957-1.733-5.957-4.143 0-2.408 2.165-3.223 2.91-3.492 1.422-.48 3.25-.545 3.556-.545.34 0 .52 0 .767.034 2.574 1.838 3.706 2.757 3.706 4.48-.002 2.072-1.736 3.664-4.982 3.648l.002.017zM23.254 11.89V8.52H21.57v3.37H18.2v1.714h3.367v3.4h1.684v-3.4h3.4V11.89" />
                                        </svg>
                                    </span>
                                    <span class="rrssb-text">google+</span>
                                </a>
                            </li>-->
                            <li class="rrssb-email">
                                <!-- Replace subject with your message using URL Endocding: http://meyerweb.com/eric/tools/dencoder/ -->
                                <a id="mail_link" href="mailto:?subject=Missing kayaker pulled from St. Joseph River in Niles has died&body=https%3A%2F%2Fwww.abc57.com%2Fnews%2Fcrews-searching-for-missing-kayaker-in-niles">
                                    <span class="rrssb-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">
                                            <path d="M20.11 26.147c-2.335 1.05-4.36 1.4-7.124 1.4C6.524 27.548.84 22.916.84 15.284.84 7.343 6.602.45 15.4.45c6.854 0 11.8 4.7 11.8 11.252 0 5.684-3.193 9.265-7.398 9.3-1.83 0-3.153-.934-3.347-2.997h-.077c-1.208 1.986-2.96 2.997-5.023 2.997-2.532 0-4.36-1.868-4.36-5.062 0-4.75 3.503-9.07 9.11-9.07 1.713 0 3.7.4 4.6.972l-1.17 7.203c-.387 2.298-.115 3.3 1 3.4 1.674 0 3.774-2.102 3.774-6.58 0-5.06-3.27-8.994-9.304-8.994C9.05 2.87 3.83 7.545 3.83 14.97c0 6.5 4.2 10.2 10 10.202 1.987 0 4.09-.43 5.647-1.245l.634 2.22zM16.647 10.1c-.31-.078-.7-.155-1.207-.155-2.572 0-4.596 2.53-4.596 5.53 0 1.5.7 2.4 1.9 2.4 1.44 0 2.96-1.83 3.31-4.088l.592-3.72z" />
                                        </svg>
                                    </span>
                                    <span class="rrssb-text">email</span>
                                </a>
                            </li>
                        </ul>
					</div><!-- .content-share-wrap -->
                </div>
                <div class="content-flipp-ads">
                                            <div class="content-flipp-ads-header">
                            <span>Save with</span> <img src="/images/abc57_logo_flipp_white.png">
                        </div>
                        <div class="content-flipp-ads-inner">
                            <div id="circularhub_module_17044"></div>
                            <script src="//api.circularhub.com/17044/3e5259a0666a65d0/circularhub_module.js"></script>
                        </div>
                                    </div>
            </div>

                        <!-- outstream player -->
            <script src="https://content.jwplatform.com/libraries/ZJ4w8V38.js"></script><link rel="stylesheet" href="https://outstreamplayer.com/tags/abc57/outstream.css">
            <div class="jw-ad" style="margin-bottom:40px;"><div class="jw-ad-media-container"><div id="player"></div></div></div>
            <script type="text/javascript" src="https://outstreamplayer.com/tags/abc57/outstream.js"></script>
            <!-- end outstream player -->
                                        <link rel="stylesheet" type="text/css" href="/css/wcs/wcs-style-abc57.css?v53">


<section id="wcs-main-wrapper">
	<div id="wcs-overlay-modal" class="wcs-overlay">
	<!-- FLAGGING COMMENTS -->
	<!-- <div class="wcs-modal-wrap wcs-modal-flagging">
		Are you sure you want to flag this comment?
		<div class="wcs-modal-btns">
			<button class="wcs-cancel-btn">Cancel</button> <button class="wcs-submit-btn">Submit</button>
		</div>
	</div> -->

	<!-- DELETING COMMENTS -->
	<div class="wcs-modal-wrap wcs-modal-deleting">
        <span class="wcs-modal-innertext">Are you sure you want to delete this comment?</span>
		<div class="wcs-modal-btns">
			<button class="wcs-cancel-btn wcs-modal-btns-cancel">Cancel</button> <button class="wcs-submit-btn wcs-modal-btns-submit">Delete</button>
		</div>
	</div>
</div>
	<div id="wcs-overlay-sidebar" class="wcs-overlay">
	<span class="wcs-slideout-close-btn">
		<span>Close</span>
		<i class="fas fa-times"></i>
	</span>
	<div id="wcs-slideout-wrapper">
		
	</div>
</div>
        
<script type="text/html" id="template_registration_header_email">
	<div id="wcs-email-registration-header">
        <h1>Create a new account</h1>
        <p>Already have an account? <a href="#!" id="wcs-signin-link">Click here to sign in.</a></p>
    </div>    
</script>
<script type="text/html" id="template_registration_header_social">
	<div id="wcs-email-registration-social">    
        <h1>You're almost there!</h1>
        <p>Fill out the form fields below to complete your registration.</p>
    </div>
</script>

<script type="text/html" id="template_registration_header_success">
	<div id="wcs-email-registration-social">    
        <h1>Thank You for Registering!</h1>
        <p>
            You will receive an email confirmation with a link to activate your account.  
        </p>
    </div>
</script>
<style>
    .wcs-profile-settings-other-provider{
        display:none;
    }
</style>

<script type="text/html" id="template_profile_form">
	<form class="wcs-profile-settings-form">
		<div class="wcs-profile-settings-form-section">
			<label for="fullName">Full name <span>*</span></label>
			<input type="text" name="fullName">
			<span class="wcs-settings-form-err-msg wcs-settings-form-err-full-name"></span>
		</div>

		<div class="wcs-profile-settings-form-section">
			<label for="wcs_email">Email <span>*</span></label>
			<input type="email" name="wcs_email" id="wcs_email">
			<!-- READ-ONLY HTML BELOW -->
			<!-- <input class="wcs-profile-settings-form-readonly" type="email" name="email" readonly>
			<span class="wcs-settings-form-disclaimer">This email address is tied to your google account and can't be edited</span> -->
			<span class="wcs-settings-form-err-msg wcs-settings-form-err-email"></span>
		</div>

		<!-- USERNAME / PASSWORD -->
		<div class="wcs-profile-settings-form-section wcs-profile-settings-form-section-multi wcs-profile-settings-email-username">        
			<div class="wcs-profile-settings-form-section-inner">
				<label for="username1">Username <span>*</span></label>
				<input type="text" name="username1">
				<span class="wcs-settings-form-err-msg wcs-settings-form-err-username1"></span>
			</div>
			
			<!-- UPDATE PASSWORD LINK -->
			<div class="wcs-profile-settings-form-section-inner wcs-settings-form-password-updater" style="display:none;">
				<label for="password">Password <span>*</span></label>
				<a class="wcs-profile-settings-update-password" href="#!">Click here to update your password</a>
			</div>
		</div>
		<div class="wcs-profile-settings-form-section wcs-profile-settings-social-username" style="display:none;">
			<div class="wcs-profile-settings-form-section-inner">
				<label for="social_username">Username <span>*</span></label>
				<input id="social_username" type="text" name="social_username">
				<span class="wcs-settings-form-err-msg wcs-settings-form-err-social-username"></span>                
			</div>
		</div>

		<div class="wcs-profile-settings-form-section wcs-profile-signup-username">        
			<label for="username">Username <span>*</span></label>
			<input id="username" type="text" name="username">
			<span class="wcs-settings-form-err-msg wcs-settings-form-err-username"></span>
		</div>

		<div class="wcs-profile-settings-form-section wcs-profile-settings-form-section-multi wcs-profile-signup-password">
			<div class="wcs-profile-settings-form-section-inner">
				<label for="password">Password <span>*</span></label>
				<input type="password" name="password">
				<span class="wcs-settings-form-err-msg wcs-settings-form-err-password"></span>
			</div>
			<div class="wcs-profile-settings-form-section-inner">
				<label for="password2">Re-enter password <span>*</span></label>
				<input type="password" name="password2">
				<span class="wcs-settings-form-err-msg wcs-settings-form-err-password2"></span>
			</div>
		</div> 
        

		<!-- USERNAME ONLY -->
		<!-- <div class="wcs-profile-settings-form-section">
			<label for="username">Username <span>*</span></label>
			<input type="text" name="username">
			<span class="wcs-settings-form-err-msg">Please enter a username</span>
		</div> -->

		<fieldset>
			<legend>Optional:</legend>
			<div class="wcs-profile-settings-form-section wcs-profile-settings-form-section-multi">
				<div class="wcs-profile-settings-form-section-inner wcs-profile-settings-form-section-inner-multi">
					<div>
						<label for="dobMonth">Date of birth</label>
						<select name="dobMonth">
	                        <option value=""></option>
							<option value="1">January</option>
							<option value="2">February</option>
							<option value="3">March</option>
							<option value="4">April</option>
							<option value="5">May</option>
							<option value="6">June</option>
							<option value="7">July</option>
							<option value="8">August</option>
							<option value="9">September</option>
							<option value="10">October</option>
							<option value="11">November</option>
							<option value="12">December</option>
						</select>
						<span class="wcs-settings-form-err-msg wcs-settings-form-err-dob"></span>
					</div>
					<div>
						<select name="dobDay">
	                        <option value=""></option>                        
															<option value="1">1</option>
															<option value="2">2</option>
															<option value="3">3</option>
															<option value="4">4</option>
															<option value="5">5</option>
															<option value="6">6</option>
															<option value="7">7</option>
															<option value="8">8</option>
															<option value="9">9</option>
															<option value="10">10</option>
															<option value="11">11</option>
															<option value="12">12</option>
															<option value="13">13</option>
															<option value="14">14</option>
															<option value="15">15</option>
															<option value="16">16</option>
															<option value="17">17</option>
															<option value="18">18</option>
															<option value="19">19</option>
															<option value="20">20</option>
															<option value="21">21</option>
															<option value="22">22</option>
															<option value="23">23</option>
															<option value="24">24</option>
															<option value="25">25</option>
															<option value="26">26</option>
															<option value="27">27</option>
															<option value="28">28</option>
															<option value="29">29</option>
															<option value="30">30</option>
															<option value="31">31</option>
							
						</select>
					</div>
					<div>
						<select name="dobYear">
								                        <option value=""></option>
															<option value="2002">2002</option>
								2002
															<option value="2001">2001</option>
								2001
															<option value="2000">2000</option>
								2000
															<option value="1999">1999</option>
								1999
															<option value="1998">1998</option>
								1998
															<option value="1997">1997</option>
								1997
															<option value="1996">1996</option>
								1996
															<option value="1995">1995</option>
								1995
															<option value="1994">1994</option>
								1994
															<option value="1993">1993</option>
								1993
															<option value="1992">1992</option>
								1992
															<option value="1991">1991</option>
								1991
															<option value="1990">1990</option>
								1990
															<option value="1989">1989</option>
								1989
															<option value="1988">1988</option>
								1988
															<option value="1987">1987</option>
								1987
															<option value="1986">1986</option>
								1986
															<option value="1985">1985</option>
								1985
															<option value="1984">1984</option>
								1984
															<option value="1983">1983</option>
								1983
															<option value="1982">1982</option>
								1982
															<option value="1981">1981</option>
								1981
															<option value="1980">1980</option>
								1980
															<option value="1979">1979</option>
								1979
															<option value="1978">1978</option>
								1978
															<option value="1977">1977</option>
								1977
															<option value="1976">1976</option>
								1976
															<option value="1975">1975</option>
								1975
															<option value="1974">1974</option>
								1974
															<option value="1973">1973</option>
								1973
															<option value="1972">1972</option>
								1972
															<option value="1971">1971</option>
								1971
															<option value="1970">1970</option>
								1970
															<option value="1969">1969</option>
								1969
															<option value="1968">1968</option>
								1968
															<option value="1967">1967</option>
								1967
															<option value="1966">1966</option>
								1966
															<option value="1965">1965</option>
								1965
															<option value="1964">1964</option>
								1964
															<option value="1963">1963</option>
								1963
															<option value="1962">1962</option>
								1962
															<option value="1961">1961</option>
								1961
															<option value="1960">1960</option>
								1960
															<option value="1959">1959</option>
								1959
															<option value="1958">1958</option>
								1958
															<option value="1957">1957</option>
								1957
															<option value="1956">1956</option>
								1956
															<option value="1955">1955</option>
								1955
															<option value="1954">1954</option>
								1954
															<option value="1953">1953</option>
								1953
															<option value="1952">1952</option>
								1952
															<option value="1951">1951</option>
								1951
															<option value="1950">1950</option>
								1950
															<option value="1949">1949</option>
								1949
															<option value="1948">1948</option>
								1948
															<option value="1947">1947</option>
								1947
															<option value="1946">1946</option>
								1946
															<option value="1945">1945</option>
								1945
															<option value="1944">1944</option>
								1944
															<option value="1943">1943</option>
								1943
															<option value="1942">1942</option>
								1942
															<option value="1941">1941</option>
								1941
															<option value="1940">1940</option>
								1940
															<option value="1939">1939</option>
								1939
															<option value="1938">1938</option>
								1938
															<option value="1937">1937</option>
								1937
															<option value="1936">1936</option>
								1936
															<option value="1935">1935</option>
								1935
															<option value="1934">1934</option>
								1934
															<option value="1933">1933</option>
								1933
															<option value="1932">1932</option>
								1932
															<option value="1931">1931</option>
								1931
															<option value="1930">1930</option>
								1930
															<option value="1929">1929</option>
								1929
															<option value="1928">1928</option>
								1928
															<option value="1927">1927</option>
								1927
															<option value="1926">1926</option>
								1926
															<option value="1925">1925</option>
								1925
															<option value="1924">1924</option>
								1924
															<option value="1923">1923</option>
								1923
															<option value="1922">1922</option>
								1922
															<option value="1921">1921</option>
								1921
															<option value="1920">1920</option>
								1920
															<option value="1919">1919</option>
								1919
															<option value="1918">1918</option>
								1918
															<option value="1917">1917</option>
								1917
															<option value="1916">1916</option>
								1916
															<option value="1915">1915</option>
								1915
															<option value="1914">1914</option>
								1914
															<option value="1913">1913</option>
								1913
															<option value="1912">1912</option>
								1912
															<option value="1911">1911</option>
								1911
															<option value="1910">1910</option>
								1910
															<option value="1909">1909</option>
								1909
															<option value="1908">1908</option>
								1908
															<option value="1907">1907</option>
								1907
															<option value="1906">1906</option>
								1906
															<option value="1905">1905</option>
								1905
															<option value="1904">1904</option>
								1904
															<option value="1903">1903</option>
								1903
															<option value="1902">1902</option>
								1902
															<option value="1901">1901</option>
								1901
															<option value="1900">1900</option>
								1900
							
						</select>
					</div>
				</div>
				<div class="wcs-profile-settings-form-section-inner">
					<label for="gender">Gender</label>
					<select name="gender">
	                    <option value=""></option>                    
						<option value="M">Male</option>
						<option value="F">Female</option>
					</select>
	                <span class="wcs-settings-form-err-msg wcs-settings-form-err-gender"></span>  
				</div>
			</div>

			<div class="wcs-profile-settings-form-section wcs-profile-settings-form-section-multi">
				<div class="wcs-profile-settings-form-section-inner">
					<label for="zipcode">ZIP code<!--  <span>*</span> --></label>
					<input id="zipcode" type="text" maxlength="5" name="zipcode">
					<!-- <span class="wcs-settings-form-err-msg wcs-settings-form-err-zipcode"></span> -->
				</div>
				<div class="wcs-profile-settings-form-section-inner">
					<label for="provider">Choose your provider<!--  <span>*</span> --></label>
					<select id="provider" name="provider">
						<option value=""></option>
                                                                                                    <option value="WBND">South Bend - WBND (Over the air) 57.2</option>
                                                    <option value="WBND">South Bend - Xfinity 244 / 357</option>
                                                    <option value="Cablevision">South Bend - Quality Cablevision 57.2</option>
                                                    <option value="RTC">South Bend - RTC 54</option>
                                                    <option value="Mediacom">South Bend - Mediacom 101</option>
                                                    <option value="Lightstream">South Bend - Lightstream 19.2</option>
                                                    <option value="DISH South Bend-Elkhart">DISH South Bend-Elkhart, IN - DISH 247</option>
                                                    <option value="AT&T U-verse">South Bend AT&T U-verse - AT&T U-Verse 136 / 1136</option>
                                                					</select>
					<!-- <span class="wcs-settings-form-err-msg wcs-settings-form-err-provider"></span> -->
				</div>
			</div>

			<div class="wcs-profile-settings-form-section wcs-profile-settings-other-provider">
				<label for="other_provider">Other provider<!--  <span>*</span> --></label>
				<input id="other_provider" type="text" name="other_provider">
				<!-- <span class="wcs-settings-form-err-msg wcs-settings-form-err-other-provider"></span> -->
			</div>
			<div class="wcs-profile-settings-optional">
				We request this information so we can better serve you, our viewers. For example, on-air programming may be improved or viewer issues may be resolved sooner. We will not share this information with third parties or use it to track you on the Internet.
			</div>
		</fieldset>

		<div class="wcs-profile-settings-form-section">
			<div class="wcs-profile-settings-form-checkbox-wrap wcs-profile-settings-newsletter-container">
				<input type="checkbox" name="newsletter_signup" value="newsletter_signup" id="newsletter_signup" checked>
				<label class="wcs-checkbox-label" for="newsletter_signup">Sign up for the abc57 newsletter</label>
			</div>
		</div>

        <div class="wcs-profile-settings-form-section">
			<div id="recaptcha_site" class="g-recaptcha" data-sitekey="6Ld4mkkUAAAAAJFe_lkejOM7du9YdGoOCalXgNsi"></div>                         
			<span class="wcs-settings-form-err-msg wcs-settings-form-err-captcha"></span>
        </div>

        <div class="wcs-profile-settings-form-section wcs-profile-registration-terms">
			<b>By submitting this form you are accepting the <a href="/terms-of-use/" target="_blank">Terms of Service</a> and agreeing that you are 18 years of age or older.</b>
        </div>
		
		<div class="wcs-profile-settings-edit-message"></div>

        <input type="hidden" name="is_social" value="0"/>
        <input type="hidden" name="is_update" value="0"/>
		<div class="wcs-profile-settings-form-submit">
			<button class="wcs-cancel-btn" type="button">Cancel</button>
			<input class="wcs-submit-btn" type="submit" name="submit" value="Submit">
		</div>
	</form>
</script>

<script type="text/html" id="template_profile_header">
	<div class="wcs-profile-header">
		<div class="wcs-profile-header-logout">
			<a href="/social_auth/logout"><i class="fas fa-sign-out-alt"></i> Logout</a>
		</div>
		<div class="wcs-profile-header-user">
			<div class="wcs-profile-header-user-avatar">
				<img class="wcs-avatar" src="">
				<span class="wcs-popout-wrapper">
					<a class="wcs-update-avatar-trigger" href="#!">Update Image</a>
					<div class="wcs-popout">
						<ul class="wcs-popout-avatar">
	<li class="wcs-popout-avatar-upload">
		<label for="image-uploader">Upload a file: &nbsp;<span id="avatar_upload_notice"></span></label>
	    <input id="avatar_uploader" name="image-uploader" style="" type="file" value=""/>
        <!--
	    <div class="wcs-popout-file-upload-dropzone">
	        Or drag a file here to upload
	    </div>
        -->
	</li>     

</ul>
					</div>
				</span>
			</div>
			<div class="wcs-profile-header-user-meta">
				<h1 class="wcs-profile-header-fullname wcs-verified-user"></h1>
				<span class="wcs-profile-header-username"></span>
	            <span class="wcs-profile-header-likes"><i class="fas fa-heart"></i> <span class="wcs-user-karma-number"></span> likes</span>
			</div>
		</div>
		<nav class="wcs-profile-nav">
			<ul>
	            <li class="wcs-profile-nav-tab wcs-profile-nav-active"><a href="#!">Comments (<span class="wcs-comment-count"></span>)</a></li>
				<li class="wcs-profile-nav-tab"><a href="#!">Settings</a></li>
			</ul>
		</nav>
	</div>
</script>

<script type="text/html" id="template_profile_display_wrapper">
	<div class="wcs-profile-body">
	    <div class="wcs-profile-comments-wrap">    
            <div class="wcs-profile-comments-load-more" style="display:none;">
                <button class="view-more-btn view-more-profilecomment" name="view-more-comments" type="button">Load more comments <i class="fas fa-angle-down"></i></button>
            </div>    
	    </div>
	    <div class="wcs-profile-settings-wrap">        
	    </div>
	</div>
</script>

<script type="text/html" id="template_profile_loggedin_header">
    <div class="wcs-profile-settings-loggedin">
        <h2></h2>
        <p></p>
    </div>        
</script>       
<script type="text/html" id="template_login_header">
	<h1>Log in</h1>
	<p>Don't have an account? <a id="wcs-register-link" href="#!">Click here to register.</a></p>
</script>


<script type="text/html" id="template_login_form">
	<div class="wcs-login-wrapper">
		<div class="wcs-login-type-heading">
			<span>Log in with your social media account</span>
		</div>
		<div class="wcs-post-comment-login">
	        <button type="button" class="wcs-login-btn wcs-login-google">
	            <span class="wcs-login-btn-icon"><i class="fab fa-google"></i></span>
	            <span class="wcs-login-btn-text">Google</span>
	        </button>
	        <button type="button" class="wcs-login-btn wcs-login-facebook">
	            <span class="wcs-login-btn-icon"><i class="fab fa-facebook-f"></i></span>
	            <span class="wcs-login-btn-text">Facebook</span>
	        </button>
	        <button type="button" class="wcs-login-btn wcs-login-twitter">
	            <span class="wcs-login-btn-icon"><i class="fab fa-twitter"></i></span>
	            <span class="wcs-login-btn-text">Twitter</span>
	        </button>
	    </div>

	    <div class="wcs-login-type-heading">
			<span>Or with your email address</span>
		</div>
		<form class="wcs-profile-settings-form">
			<div class="wcs-profile-settings-form-section wcs-profile-settings-form-section-multi">
				<div class="wcs-profile-settings-form-section-inner">
					<label for="username">Username <span>*</span></label>
					<input type="text" name="username">
					<span class="wcs-settings-form-err-msg wcs-settings-form-err-username"></span>
				</div>

				<div class="wcs-profile-settings-form-section-inner">
					<label for="password">Password <span>*</span></label>
					<input type="password" name="password">
					<span class="wcs-settings-form-err-msg wcs-settings-form-err-password"></span>
				</div>
			</div>
            <div class="wcs-profile-settings-login-message">
                <span class="wcs-settings-form-err-msg wcs-settings-form-err-generic"></span>
            </div>

			<div class="wcs-profile-settings-form-submit">
				<a class="wcs-login-forgot-un-pw" href="#!">Forgot username/password?</a>
				<button class="wcs-cancel-btn" type="button">Cancel</button>
				<input class="wcs-submit-btn" type="submit" name="submit" value="Submit">
			</div>
		</form>
	</div>
</script>

<script type="text/html" id="template_forgotpass_success">
	<div id="wcs-email-registration-social">    
        <h1>Instructions on how to reset your password have been emailed to you.</h1>        
        <p>
            Please allow a few minutes for the email to be sent and then follow the instructions in the email. 
        </p>
    </div>
</script>

<script type="text/html" id="template_forgotpass_form">    
	<div class="wcs-profile-settings-wrap">
        <h1>Forgot Username/Password</h1>
		<p>Enter your email address to retrieve your username and/or reset your password. <a id="wcs-login-link" href="#!">Click here to return to the login page.</a></p>
		<form class="wcs-profile-settings-form">
            <div class="wcs-profile-settings-form-section">
                <label for="wcs_email">Email <span>*</span></label>
                <span class="wcs-settings-form-err-msg wcs-settings-form-err-email"></span>
                <input type="email" name="wcs_email">
            </div>
            <div class="wcs-profile-settings-form-section">
                <span class="wcs-settings-form-err-msg wcs-settings-form-err-captcha"></span>
                <div id="recaptcha_site" class="g-recaptcha" data-sitekey="6Ld4mkkUAAAAAJFe_lkejOM7du9YdGoOCalXgNsi"></div>                         
            </div>
			<div class="wcs-profile-settings-form-submit">
				<button class="wcs-cancel-btn" type="button">Cancel</button>
				<input class="wcs-submit-btn" type="submit" name="submit" value="Submit">
			</div>
		</form>
	</div>
</script>

<script type="text/html" id="template_update_password">
	<div class="wcs-profile-settings-wrap">
		<h1>Update password</h1>
		<p>Update your password below. <a href="#!" class='wcs-update-password-settings-link'>Click here to return to your profile.</a></p>
		<form class="wcs-profile-settings-form">
            <div class="wcs-profile-settings-form-section">
                <label for="password">Current password <span>*</span></label>
                <span class="wcs-settings-form-err-msg wcs-settings-form-err-password"></span>
				<input type="password" name="password" id="password">
            </div>

            <div class="wcs-profile-settings-form-section">
                <label for="password1">New password <span>*</span></label>
                <span class="wcs-settings-form-err-msg wcs-settings-form-err-password1"></span>
				<input type="password" name="password1" id="password1">
            </div>

            <div class="wcs-profile-settings-form-section">
                <label for="email">Confirm new password <span>*</span></label>
                <span class="wcs-settings-form-err-msg wcs-settings-form-err-password2"></span>
				<input type="password" name="password2" id="password2">
            </div>

            <div class="wcs-profile-settings-form-section">
                <span class="wcs-settings-form-err-msg wcs-settings-form-err-captcha"></span>
                <div id="recaptcha_site" class="g-recaptcha" data-sitekey="6Ld4mkkUAAAAAJFe_lkejOM7du9YdGoOCalXgNsi"></div>                         
            </div>
			<div class="wcs-profile-settings-form-submit">
				<button class="wcs-cancel-btn" type="button">Cancel</button>
				<input class="wcs-submit-btn" type="submit" name="submit" value="Submit">
			</div>
		</form>
	</div>
</script>

<script type="text/html" id="template_updatepass_success">
	<div id="wcs-email-registration-social">    
        <h1>Your password has been updated!</h1>        
        <p>
            The next time you login you'll need to use your new password. 
        </p>
    </div>
</script>  
	<div id="wcs-comments-wrapper">
	<h2>0 Comments</h2>
	<div class="wcs-post-comment">
		<!-- LOGGED OUT -->
		<div class="wcs-post-comment-header wcs-post-comment-header-loggedout" >
			<img class="wcs-avatar" src="/images/wcs_logged_out_user.gif">
			<div class="wcs-post-comment-intro">
				Post a comment
			</div>
		</div>

		<!-- LOGGED IN -->
		<div class="wcs-post-comment-header" style="display:none;">
			<img class="wcs-avatar" src="/images/wcs_logged_out_user.gif">
			<!-- <a href="#!" data-userid="" class="wcs-user-trigger"><img class="wcs-avatar" src=""></a> -->
			<div class="wcs-post-comment-intro">
				<!-- Post a comment -->
				<span class="wcs-post-comment-username">Hello, <a data-userid="" class="wcs-user-trigger wcs-user-displayname" href="#!"></a></span>
				<div class="wcs-post-comment-user-profile-controls">
					<button class="wcs-post-comment-user-profile-controls-menu-btn"><i class="fas fa-cog"></i></button>
					<div class="wcs-post-comment-user-profile-controls-menu wcs-post-comment-controls-closed">
						<a data-userid="" class="wcs-post-comment-user-settings wcs-user-trigger" href="#!"><i class="fas fa-cog"></i> Settings</a><span> / </span><a href="/social_auth/logout/"><i class="fas fa-sign-out-alt"></i> Logout </a>
					</div>
				</div>
			</div>
		</div>

		<form class="wcs-post-comment-form">
			<textarea id="topcomment_text" placeholder="Leave a comment"></textarea>
			<!-- LOGGED OUT BELOW -->
			<div class="wcs-post-comment-login" >
                				<span>Sign up with:</span>                    
                				<button type="button" class="wcs-login-btn wcs-login-google">
					<span class="wcs-login-btn-icon"><i class="fab fa-google"></i></span>
					<span class="wcs-login-btn-text">Google</span>
				</button>
				<button type="button" class="wcs-login-btn wcs-login-facebook">
					<span class="wcs-login-btn-icon"><i class="fab fa-facebook-f"></i></span>
					<span class="wcs-login-btn-text">Facebook</span>
				</button>
				<button type="button" class="wcs-login-btn wcs-login-twitter">
					<span class="wcs-login-btn-icon"><i class="fab fa-twitter"></i></span>
					<span class="wcs-login-btn-text">Twitter</span>
				</button>
				<button type="button" class="wcs-login-btn wcs-login-email">
					<span class="wcs-login-btn-icon"><i class="far fa-envelope"></i></span>
					<span class="wcs-login-btn-text">Email</span>
				</button>
			</div>

			<!-- LOGGED IN BELOW -->
			<div class="wcs-post-comment-logged-in-btns" style="display:none;">
				<div class="wcs-post-comment-media-btns">
					<span class="wcs-popout-wrapper">
                        <a class="wcs-post-comment-media-emoji" href="#!"><i class="far fa-smile"></i></a>
                        <div class="wcs-popout">
                            <ul class="wcs-popout-emojis">
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="smile">
                <i class="twa twa-2x twa-smile"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="laughing">
                <i class="twa twa-2x twa-laughing"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="blush">
                <i class="twa twa-2x twa-blush"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="smiley">
                <i class="twa twa-2x twa-smiley"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="relaxed">
                <i class="twa twa-2x twa-relaxed"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="smirk">
                <i class="twa twa-2x twa-smirk"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="heart-eyes">
                <i class="twa twa-2x twa-heart-eyes"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="kissing-heart">
                <i class="twa twa-2x twa-kissing-heart"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="kissing-closed-eyes">
                <i class="twa twa-2x twa-kissing-closed-eyes"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="flushed">
                <i class="twa twa-2x twa-flushed"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="relieved">
                <i class="twa twa-2x twa-relieved"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="satisfied">
                <i class="twa twa-2x twa-satisfied"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="grin">
                <i class="twa twa-2x twa-grin"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="wink">
                <i class="twa twa-2x twa-wink"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="stuck-out-tongue-winking-eye">
                <i class="twa twa-2x twa-stuck-out-tongue-winking-eye"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="stuck-out-tongue-closed-eyes">
                <i class="twa twa-2x twa-stuck-out-tongue-closed-eyes"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="grinning">
                <i class="twa twa-2x twa-grinning"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="kissing">
                <i class="twa twa-2x twa-kissing"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="kissing-smiling-eyes">
                <i class="twa twa-2x twa-kissing-smiling-eyes"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="stuck-out-tongue">
                <i class="twa twa-2x twa-stuck-out-tongue"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="sleeping">
                <i class="twa twa-2x twa-sleeping"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="worried">
                <i class="twa twa-2x twa-worried"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="frowning">
                <i class="twa twa-2x twa-frowning"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="anguished">
                <i class="twa twa-2x twa-anguished"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="open-mouth">
                <i class="twa twa-2x twa-open-mouth"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="grimacing">
                <i class="twa twa-2x twa-grimacing"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="confused">
                <i class="twa twa-2x twa-confused"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="hushed">
                <i class="twa twa-2x twa-hushed"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="expressionless">
                <i class="twa twa-2x twa-expressionless"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="unamused">
                <i class="twa twa-2x twa-unamused"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="sweat-smile">
                <i class="twa twa-2x twa-sweat-smile"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="sweat">
                <i class="twa twa-2x twa-sweat"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="weary">
                <i class="twa twa-2x twa-weary"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="pensive">
                <i class="twa twa-2x twa-pensive"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="disappointed">
                <i class="twa twa-2x twa-disappointed"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="confounded">
                <i class="twa twa-2x twa-confounded"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="dizzy-face">
                <i class="twa twa-2x twa-dizzy-face"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="fearful">
                <i class="twa twa-2x twa-fearful"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="cold-sweat">
                <i class="twa twa-2x twa-cold-sweat"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="persevere">
                <i class="twa twa-2x twa-persevere"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="cry">
                <i class="twa twa-2x twa-cry"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="sob">
                <i class="twa twa-2x twa-sob"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="joy">
                <i class="twa twa-2x twa-joy"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="heart">
                <i class="twa twa-2x twa-heart"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="sparkles">
                <i class="twa twa-2x twa-sparkles"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="star">
                <i class="twa twa-2x twa-star"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="thumbsup">
                <i class="twa twa-2x twa-thumbsup"></i>
            </a>
        </li>
    
</ul>
                        </div>
                    </span>
                    <span class="wcs-popout-wrapper">
                        <a class="wcs-post-comment-media-video" href="#!"><i class="fab fa-youtube"></i></a>
                        <div class="wcs-popout">
                            <div class="wcs-popout-youtube">
    <input class="youtube_url" style="" type="text" placeholder="Paste youtube url here..." value=""/>
    <button type="button" class="wcs-submit-btn youtube-add btn btn-link">Add</button>
</div>
                        </div>
                    </span>
                    <span class="wcs-popout-wrapper">
                        <a class="wcs-post-comment-media-image" href="#!"><i class="far fa-image"></i></a>
                        <div class="wcs-popout">
                            <div class="wcs-popout-image">
    <label for="image-uploader">Upload a file:</label>
    <input class="image_uploader" name="image-uploader" style="" type="file" value=""/>
    <div class="wcs-popout-file-upload-dropzone">
        Or drag a file here to upload
    </div>
</div>
                        </div>
                    </span>
				</div>
				<div class="wcs-post-comment-submit">
					<input class="wcs-submit-btn wcs-post-comment-button" type="submit" value="Post">
				</div>
			</div>
		</form>
	</div>
        
	<div class="wcs-comments">
		<!-- <a class="wcs-learn" href="https://abc57.com/">Click here to learn about ABC57's new commenting system!</a> -->
		
        		<div class="wcs-comments-no-comments">Be the first to leave a comment!</div>
                <button data-ancestorid="0" class="view-more-btn view-more-newcomment" name="view-more-comments" type="button" style="display:none;">Load new comments <i class="fas fa-angle-down"></i></button>                    
        <div class="wcs-comment-container">
        	<!-- COMMENT REMOVED LAYOUT -->			
	        
			
        </div>
            </div>
</div>
<div id="wcs-overlay-modal" class="wcs-overlay">
	<!-- FLAGGING COMMENTS -->
	<!-- <div class="wcs-modal-wrap wcs-modal-flagging">
		Are you sure you want to flag this comment?
		<div class="wcs-modal-btns">
			<button class="wcs-cancel-btn">Cancel</button> <button class="wcs-submit-btn">Submit</button>
		</div>
	</div> -->

	<!-- DELETING COMMENTS -->
	<div class="wcs-modal-wrap wcs-modal-deleting">
        <span class="wcs-modal-innertext">Are you sure you want to delete this comment?</span>
		<div class="wcs-modal-btns">
			<button class="wcs-cancel-btn wcs-modal-btns-cancel">Cancel</button> <button class="wcs-submit-btn wcs-modal-btns-submit">Delete</button>
		</div>
	</div>
</div>

<!-- TEMPLATES -->
<script type="text/html" id="template_reply_container">
    <div class="wcs-reply-container">
        <h4>Reply to <a class="wcs-reply-username wcs-user-trigger wcs-verified-user" href="#!"></a></h4>        
        <textarea id="subcomment_text" class="subcomment_text wcs-reply-textarea" placeholder="Leave a comment"></textarea>
        <div class="wcs-post-comment-logged-in-btns">
            <div class="wcs-post-comment-media-btns">
                <span class="wcs-popout-wrapper">
                    <a class="wcs-post-comment-media-emoji" href="#!"><i class="far fa-smile"></i></a>
                    <div class="wcs-popout">
                        <ul class="wcs-popout-emojis">
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="smile">
                <i class="twa twa-2x twa-smile"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="laughing">
                <i class="twa twa-2x twa-laughing"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="blush">
                <i class="twa twa-2x twa-blush"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="smiley">
                <i class="twa twa-2x twa-smiley"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="relaxed">
                <i class="twa twa-2x twa-relaxed"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="smirk">
                <i class="twa twa-2x twa-smirk"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="heart-eyes">
                <i class="twa twa-2x twa-heart-eyes"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="kissing-heart">
                <i class="twa twa-2x twa-kissing-heart"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="kissing-closed-eyes">
                <i class="twa twa-2x twa-kissing-closed-eyes"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="flushed">
                <i class="twa twa-2x twa-flushed"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="relieved">
                <i class="twa twa-2x twa-relieved"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="satisfied">
                <i class="twa twa-2x twa-satisfied"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="grin">
                <i class="twa twa-2x twa-grin"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="wink">
                <i class="twa twa-2x twa-wink"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="stuck-out-tongue-winking-eye">
                <i class="twa twa-2x twa-stuck-out-tongue-winking-eye"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="stuck-out-tongue-closed-eyes">
                <i class="twa twa-2x twa-stuck-out-tongue-closed-eyes"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="grinning">
                <i class="twa twa-2x twa-grinning"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="kissing">
                <i class="twa twa-2x twa-kissing"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="kissing-smiling-eyes">
                <i class="twa twa-2x twa-kissing-smiling-eyes"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="stuck-out-tongue">
                <i class="twa twa-2x twa-stuck-out-tongue"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="sleeping">
                <i class="twa twa-2x twa-sleeping"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="worried">
                <i class="twa twa-2x twa-worried"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="frowning">
                <i class="twa twa-2x twa-frowning"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="anguished">
                <i class="twa twa-2x twa-anguished"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="open-mouth">
                <i class="twa twa-2x twa-open-mouth"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="grimacing">
                <i class="twa twa-2x twa-grimacing"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="confused">
                <i class="twa twa-2x twa-confused"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="hushed">
                <i class="twa twa-2x twa-hushed"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="expressionless">
                <i class="twa twa-2x twa-expressionless"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="unamused">
                <i class="twa twa-2x twa-unamused"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="sweat-smile">
                <i class="twa twa-2x twa-sweat-smile"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="sweat">
                <i class="twa twa-2x twa-sweat"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="weary">
                <i class="twa twa-2x twa-weary"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="pensive">
                <i class="twa twa-2x twa-pensive"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="disappointed">
                <i class="twa twa-2x twa-disappointed"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="confounded">
                <i class="twa twa-2x twa-confounded"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="dizzy-face">
                <i class="twa twa-2x twa-dizzy-face"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="fearful">
                <i class="twa twa-2x twa-fearful"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="cold-sweat">
                <i class="twa twa-2x twa-cold-sweat"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="persevere">
                <i class="twa twa-2x twa-persevere"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="cry">
                <i class="twa twa-2x twa-cry"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="sob">
                <i class="twa twa-2x twa-sob"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="joy">
                <i class="twa twa-2x twa-joy"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="heart">
                <i class="twa twa-2x twa-heart"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="sparkles">
                <i class="twa twa-2x twa-sparkles"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="star">
                <i class="twa twa-2x twa-star"></i>
            </a>
        </li>
            <li>
            <a href="javascript:void(0);" class="selectemoji" data-emoji="thumbsup">
                <i class="twa twa-2x twa-thumbsup"></i>
            </a>
        </li>
    
</ul>
                    </div>
                </span>
                <span class="wcs-popout-wrapper">
                    <a class="wcs-post-comment-media-video" href="#!"><i class="fab fa-youtube"></i></a>
                    <div class="wcs-popout">
                        <div class="wcs-popout-youtube">
    <input class="youtube_url" style="" type="text" placeholder="Paste youtube url here..." value=""/>
    <button type="button" class="wcs-submit-btn youtube-add btn btn-link">Add</button>
</div>
                    </div>
                </span>
                <span class="wcs-popout-wrapper">
                    <a class="wcs-post-comment-media-image" href="#!"><i class="far fa-image"></i></a>
                    <div class="wcs-popout">
                        <div class="wcs-popout-image">
    <label for="image-uploader">Upload a file:</label>
    <input class="image_uploader" name="image-uploader" style="" type="file" value=""/>
    <div class="wcs-popout-file-upload-dropzone">
        Or drag a file here to upload
    </div>
</div>
                    </div>
                </span>
            </div>
            <div class="wcs-post-comment-submit">
                <input class="wcs-submit-btn wcs-post-comment-button" type="submit" value="Post">
            </div>
        </div>  
    </div>
</script>

<script type="text/html" id="template_reply_popup">
	<div class="wcs-popup-overlay" data-container-type="reply">
	    <div class="wcs-reply-container">
	    	<span class="wcs-reply-close-btn"><i class="fas fa-times"></i></span>
	        <textarea placeholder="Leave a reply"></textarea>
	        <div class="wcs-post-comment-logged-in-btns">
	            <div class="wcs-post-comment-media-btns">
	                <a class="wcs-post-comment-media-emoji" href="#!"><i class="far fa-smile"></i></a>
	                <a class="wcs-post-comment-media-video" href="#!"><i class="fab fa-youtube"></i></a>
	                <a class="wcs-post-comment-media-image" href="#!"><i class="far fa-image"></i></a>
	            </div>
	            <div class="wcs-post-comment-submit">
	                <input class="wcs-submit-btn wcs-post-comment-button" type="submit" value="Post">
	            </div>
	        </div>  
	    </div>
	</div>        
</script>

<script type="text/html" id="template_acomment">
    <div  class="wcs-comment-item">
        <span class="wcs-comment-flag"><i class="fas fa-flag"></i></span>
        <div class="wcs-comment-item-header">
            <a href="#!" class="wcs-user-trigger"><img class="wcs-avatar" src=""></a>
            <div class="wcs-comment-item-header-meta">
                <span class="wcs-comment-item-username">
                    <a href="#!" data-userid="" class="wcs-user-trigger wcs-user-displayname"></a>
                    <i class="fas fa-share"></i>
                    <a data-userid="" class="wcs-user-trigger wcs-other-user" href="#!"></a>
                </span>
                <span class="wcs-comment-item-date">Seconds Ago</span>
            </div>
        </div>
        <div class="wcs-comment-item-text">            
        </div>
        <div class="wcs-comment-item-footer">
            <a href="#!" class="wcs-like-btn wcs-like-trigger"><i class="fas fa-heart"></i></a> 
            <a href="#!" class="wcs-reply-trigger"><i class="fas fa-comment-alt"></i> <span>Reply</span></a>
            <!-- <span class="wcs-popout-wrapper">
                <a href="#!" class="wcs-share-trigger"><i class="fas fa-share-alt"></i> <span>Share</span></a>
                <div class="wcs-popout">
                    <div class="wcs-popout-share">
    <a class="wcs-popout-share-btn wcs-popout-share-btn-facebook" target="_blank" href="javascript:void(0);">
    	<i class="fab fa-facebook-f"></i>
    </a>
    <a class="wcs-popout-share-btn wcs-popout-share-btn-twitter" target="_blank" href="javascript:void(0);">
    	<i class="fab fa-twitter"></i>
    </a>
    <a class="wcs-popout-share-btn wcs-popout-share-btn-email" href="javascript:void(0);">
    	<i class="far fa-envelope"></i>
    </a>
</div>
                </div>
            </span> -->
            <a href="#!" class="wcs-delete-trigger"><i class="fas fa-trash-alt"></i> <span>Delete</span></a>
        </div>
    </div>    
</script>

<script type="text/html" id="template_deleted_comment">
    <div data-replyinfo="" data-id="" id="" class="wcs-comment-item wcs-comment-item-parent">
        <div class="wcs-comment-item-header">
            <a data-userid="deleted" href="" class="wcs-user-trigger"><img class="wcs-avatar" src="/images/wcs_logged_out_user.gif"></a>
            <div class="wcs-comment-item-header-meta">
                <span class="wcs-comment-item-username">
                    <span class="wcs-comment-item-username-removed">Deleted</span>
                </span>
                <span class="wcs-comment-item-date"></span>
            </div>
        </div>
        <span class="wcs-comment-item-text-removed">This comment has been removed.</span>
    </div>   
</script>

<script type="text/html" id="template_loadinganimation">
 	<div class="wcs-loading-animation-overlay">
 		<div class="wcs-loading-animation">
			<div class="wcs-bounce1"></div>
			<div class="wcs-bounce2"></div>
			<div class="wcs-bounce3"></div>
		</div>
	</div>
</script>

<script type="text/html" id="template_listcomment">
    <div class="wcs-profile-comments-item">
        <h2 class="wcs-comment-post-title"><a href=""></a></h2>
        <div class="wcs-comment-item-header">
            <a href="#!" class="wcs-user-trigger"><img class="wcs-avatar wcs-avatar-img" src="http://placehold.it/50x50"></a>
            <div class="wcs-comment-item-header-meta">
                <span class="wcs-comment-item-username">
                    <a href="#!" class="wcs-user-trigger wcs-user-displayname wcs-verified-user"></a> <i class="fas fa-share"></i> <a class="wcs-user-trigger wcs-other-user wcs-verified-user" href="#!">Other User</a>
                </span>
                <span class="wcs-comment-item-date">3 hours ago</span>
            </div>
        </div>
        <div class="wcs-comment-item-text">
            Donec efficitur ut ligula suscipit vehicula. Morbi ut cursus est. Integer ligula lectus, fringilla sed commodo sed, laoreet et massa.
        </div>
        <div class="wcs-comment-item-footer">
            <a href="#!" class="wcs-view-in-discussion-trigger">
                <i class="fas fa-external-link-alt"></i> View in Discussion
            </a>
        </div>
    </div>    
</script>
<script src="/js/reconnecting-websocket.min.js"></script>    
<script type='text/javascript'>
    var WCS = WCS || {};
    console.log('WCS: ', WCS)
    WCS.SITE_URL = "//www.abc57.com/";
    WCS.THREAD_ID = 146179;
    WCS.TALKUMS_SITE_ID = 3; 
    WCS.REPLY_PARENT_ID = -1;
    WCS.REPLY_ANCESTOR_ID = -1;
    WCS.REPLY_PARENT_ADMIN = -1;
    WCS.REPLY_LEVEL = -1;
    WCS.FLAG_ID = -1;
    WCS.IS_POSTING = false;
    WCS.IS_LIKING = false;
    WCS.USER_ID = "-1";
    WCS.USER = "";
    WCS.USER_DISPLAY_NAME = "";
    WCS.socket = null;
    /*
    WCS.socketoptions = {
                  path: '/socketcluster/',
                  port: 3000,
                  hostname: '54.175.141.4'
          };
    */
    WCS.socketoptions = {
                  path: '/socketcluster/',
                  port: 8000,
                  hostname: '127.0.0.1'
          };   
    WCS.errorMax = 2;
    WCS.errorCount = 0;    
    WCS.TOTAL_COMMENTS = 0;
    WCS.termsAccepted = 0;
    WCS.emailConfirmed =  0;
    WCS.EMOJI_TARGET = 0;
    WCS.YOUTUBE_TARGET = 0;
    WCS.UPLOAD_TARGET = 0;
    WCS.DROP_FILE_NAME = "";
    WCS.DROP_FILE_TYPE = "";
    WCS.THREAD_URL = '/news/crews-searching-for-missing-kayaker-in-niles';
    WCS.BASE_THREAD_URL = '/news/crews-searching-for-missing-kayaker-in-niles';
    WCS.THREAD_TITLE = 'Crews searching for missing kayaker in Niles';
    WCS.SHARE_COMMENT_ID = '';
    WCS.FACEBOOK_SHARE = 'https://www.facebook.com/sharer/sharer.php?u=' + WCS.THREAD_URL;
    WCS.TWITTER_SHARE = 'https://twitter.com/home?status=' + WCS.THREAD_URL;
    WCS.PROFILE_OPEN = false;
    WCS.SIDEBAR_PAGE = "";
    WCS.POPUP_OPEN = false;
    WCS.CAPTCHA_SITE_KEY = '6LfwBUQUAAAAALPuABuclB4DSrMCClNMTn6204M7';
    WCS.REPLY_BOX = null;
    WCS.FILTER_TYPE = "newest"; //oldest, top
    WCS.FILTER_PAGE = 0;
    WCS.MODAL_CALLBACK = null;
    WCS.MODAL_OPEN = false;
    WCS.PROFILE_USER_ID = -1;
    WCS.RETURN_USER = false;
    WCS.SETTINGS_DATA = null;
    WCS.MAX_ID = 0;    
    WCS.NEW_COMMENT_TOTAL = 0;
    WCS.LOADING_NEW_COMMENTS = false;
    WCS.PROFILE_COMMENT_PAGE = 0;
    WCS.PROFILE_COMMENT_USER = -1;

        
WCS.OPEN_SIDEBAR = function(){
    $('#wcs-overlay-sidebar').addClass('wcs-overlay-open');
    $('#wcs-slideout-wrapper').addClass('wcs-slideout-open');
    $('body').addClass('wcs-no-scroll');    
    
    //dont set WCS.PROFILE_OPEN yet... 
    //sometimes have to wait for events to be done or it will close immediated
};

WCS.CLOSE_SIDEBAR = function(){
    $('#wcs-overlay-sidebar').removeClass('wcs-overlay-open');
    $('#wcs-slideout-wrapper').removeClass('wcs-slideout-open');
    $('#wcs-overlay-sidebar').removeClass('wcs-overlay-open');
    
    $('body').removeClass('wcs-no-scroll');
    WCS.PROFILE_USER_ID = -1;
    WCS.PROFILE_OPEN = false;    
};
        
(function(){    
    /****** USERNAME - SHOW SIDEBAR ********/
    $('body').on("click", function(e) {
        if(WCS.PROFILE_OPEN){
            if ($(e.target).closest('#wcs-slideout-wrapper').length === 0) {
                //alert("closing because " + $(e.target).closest('#wcs-slideout-wrapper').length);   
                //console.log(e.target);
                WCS.CLOSE_SIDEBAR();
            }
        }
        if(WCS.POPUP_OPEN){            
            if(e.target && $(e.target).closest('.wcs-post-comment-media-btns').length <= 0 && 
                    $(e.target).closest('.wcs-profile-header-user-avatar').length <= 0 && 
                    $(e.target).closest('.wcs-popout-wrapper').length <= 0){
                $('.wcs-popout').removeClass('wcs-popout-active');              
                WCS.POPUP_OPEN = false;
            }else{
                
            }
        }
        if(WCS.MODAL_OPEN){
            //close the modal if click is on background... meaning on wcs-overlay-modal            
            if(e.target && e.target.id == 'wcs-overlay-modal'){
                if(WCS.MODAL_CALLBACK !== null){
                    WCS.MODAL_CALLBACK(false);
                }
                $('#wcs-overlay-modal').removeClass('wcs-overlay-open');
                WCS.MODAL_OPEN = false;
            }   
        }
    });
  
    $('#wcs-main-wrapper').on('click', '.wcs-user-trigger', function(e){    
        //closes automatically if don't set this first
        e.preventDefault();
        var me = this;
        if($(this).data('userid') == 'deleted'){
            return false;
        }
            
        
        var openSettings = false;
        var hideSettings = false;
        var userId = parseInt($(this).data('userid'));
        if(userId == WCS.PROFILE_USER_ID){  
            //do nothing because the same user
            return false;
        }
        if(isNaN(userId)){
            //shouldn't happen
            alert("User could not be found");
            return;
        }
        WCS.PROFILE_OPEN = false;
        WCS.loadSidebarTemplate('loading');
        
        

        if(!$('#wcs-overlay-sidebar').hasClass('wcs-overlay-open')){ 
            WCS.OPEN_SIDEBAR();
        }
        if($(me).hasClass('wcs-post-comment-user-settings')){
            openSettings = true;   
        }else{                  
            if(parseInt(WCS.USER_ID) !== userId){
                hideSettings = true;     
            }       
        }         
        var endpoint = 'get_user_public_profile';
        if(!hideSettings){
            endpoint = 'get_user_private_profile';
        }
        $.ajax({
            url: '/ajax_comments/' + endpoint,
            data: {
                 user_id: userId,
                 get_comments: 1                     
            },
            type: 'POST',
            dataType: 'json',
            success: function(resp) 
            {
                WCS.PROFILE_USER_ID = userId;
                WCS.PROFILE_OPEN = true;         
                //if not logged in hide settings tab
                if($(me).hasClass('wcs-post-comment-user-settings')){
                    if(WCS.termsAccepted == 1){                            
                        WCS.loadSidebarTemplate('profile_user');                       
                    }else{
                        WCS.force_action('accept_terms', true);
                        return;
                    }      
                }else{                  
                    if(parseInt(WCS.USER_ID) !== userId){
                        WCS.loadSidebarTemplate('profile_other');       
                    }else{
                        if(WCS.termsAccepted == 1){                            
                            WCS.loadSidebarTemplate('profile_user');                       
                        }else{
                            WCS.force_action('accept_terms', true);
                            return;
                        }
                    }        
                }                
                setTimeout(function(){
                console.log('data');
                console.log(resp);
                var user = resp['user'];
                var comments = resp['comments'];                   
                $('.wcs-profile-header-fullname').text(user['short_name']);
                if(user['is_admin'] == 1){
                    $('.wcs-profile-header-fullname').addClass('wcs-verified-user');                    
                }else{                    
                    $('.wcs-profile-header-fullname').removeClass('wcs-verified-user');                                        
                }
                //use profile_url because two people from different services could have same name, but not same profile url
                $('.wcs-profile-header-username').text("@" + user['display_name']);                    
                $('.wcs-profile-header-user-avatar .wcs-avatar').attr('src', user['profile_image']);                   
                $('.wcs-comment-count').text(user['comment_count']);
                $('.wcs-user-karma-number').text(user['karma']);

                //$('.wcs-profile-header-likes span').text(user['total_likes']);
                //$('.wcs-profile-nav a.wcs-comments-total span').text();
                $('.wcs-profile-comments-wrap .wcs-profile-comments-item').remove();                
                WCS.appendProfileComments(comments, resp['has_more']);
                WCS.PROFILE_COMMENT_PAGE = 0;
                WCS.PROFILE_COMMENT_USER = userId;
                                
                $('.wcs-profile-nav-tab').removeClass('wcs-profile-nav-active');
                if(openSettings){
                    $('.wcs-profile-comments-wrap').hide();
                    $('.wcs-profile-settings-wrap').show();
                    $('.wcs-profile-nav-tab').eq(1).addClass('wcs-profile-nav-active');                   
                }else{
                    $('.wcs-profile-comments-wrap').show();
                    $('.wcs-profile-settings-wrap').hide();                        
                    $('.wcs-profile-nav-tab').eq(0).addClass('wcs-profile-nav-active');                        
                }
                if(hideSettings){
                    $('.wcs-profile-nav-tab').eq( 1 ).hide();
                    $('.wcs-update-avatar-trigger').hide();
                }else{
                	$('.wcs-profile-header-logout').show();
                	$('.wcs-profile-header').addClass('wcs-profile-header-logged-in')
                    $('.wcs-profile-nav-tab').eq( 1 ).show();                        
                }
                var isSocial = false;
                if(user['service'] == 'google' || user['service'] == 'facebook' || user['service'] == 'twitter'){                    
                    isSocial = true;
                }

                WCS.setupProfileForm('settings', isSocial);  
                if(!hideSettings){
                    //hide terms because registration is already done
                    $('.wcs-profile-settings-terms-container').hide();
                    $('input[name="is_update"]').val(1);
                    WCS.fillSettingsData(user);
                    //ugh, need to save this for the password update form
                    WCS.SETTINGS_DATA = user;
                }
                }, 50);
            },
            error: function(response) 
            {
                console.log(response.responseText);
                console.log(response);                    
            }
        });             
        
    });
    
    $('#wcs-main-wrapper').on('click', '.wcs-comment-flag', function(e){
        var me = this;
        console.log("this");
        console.log(this);
        if($(this).hasClass("wcs-comment-flag-active")){
            WCS.showModal("This comment is already flagged and will be reviewed by our staff.", "OK", function(){});
            return false;
        }
        e.preventDefault();
        WCS.showModal("Are you sure you want to flag this comment?", "Flag", function(doit){          
            if(!doit){
                return false;
            }
            var $commentObj = $(me).closest('.wcs-comment-item');
            var commentId = $commentObj.data('id');
 
            $.ajax({
                url: '/ajax_comments/flag_comment',
                data: {
                     comment_id: commentId
                },
                type: 'POST',
                dataType: 'json',
                success: function(resp) 
                {
                    if(resp['success'] == 'true'){
                        $(me).addClass('wcs-comment-flag-active');
                    }else{
                        WCS.showModal(resp['msg'], "OK", function(){});
                    }
                },
                error: function(response) 
                {
                    alert("Error");
                    console.log(response.responseText);
                    console.log(response);                    
                }
            });        
            
            
        });
        
          
    }); 
        
    /** LIKE REPLY SHARE DELETE  **/
    $('#wcs-main-wrapper').on('click', '.wcs-like-trigger', function(e){
        e.preventDefault();
        var $commentObj = $(this).closest('.wcs-comment-item');
        var commentId = $commentObj.data('id');
        var replyInfo = $commentObj.data('replyinfo');
        var posterId = replyInfo.split('|')[0];
        var me = this;
        var isLike = 1;
        if($(this).text().trim().indexOf('Unlike') === 0){
            isLike = 0;
        }
        if(WCS.IS_LIKING){
            return;
        }
        WCS.IS_LIKING = true;
        
        $.ajax({
            url: '/ajax_comments/do_upvote',
            data: {
                 comment_id: commentId,
                 thread_id: WCS.THREAD_ID,
                 poster_id : posterId,
                 like_it : isLike
            },
            type: 'POST',
            dataType: 'json',
            success: function(resp) 
            {
                WCS.IS_LIKING = false;
                if(resp['success'] == 'false'){
                    if(resp['action']){
                        WCS.force_action(resp['action']);                        
                    }else{
                        WCS.showModal(resp['msg'], "OK", function(){});
                    }
                    return;                    
                }
                var totalText = "";
                if(resp['total'] > 0){
                    totalText = " (" + resp['total'] + ')';
                }
                if(isLike == 1){                                        
                    $(me).html('<i class="fas fa-heart"></i>' + " Unlike" + totalText);      
                    $(me).addClass('wcs-like-btn-active');                    
                }else{
                    $(me).html('<i class="fas fa-heart"></i>' + " Like" + totalText);        
                    $(me).removeClass('wcs-like-btn-active');
                }                
            },
            error: function(response) 
            {

            }
        }); 
    });
    
    
    //assumes reply comments are expanded
    var getLevel = function(cid, level){
        
        if($('#comment_' + cid).hasClass('wcs-comment-item-parent')){
            return level;
        }
        var replyInfo = $('#comment_' + cid).data('replyinfo');
        console.log("replyinfo");
        console.log(replyInfo);
        if(!replyInfo){
            return level;
        }
        var parentId = replyInfo.split('|')[2];
        level++;
        getLevel(parentId, level);
    };
    
    $('#wcs-main-wrapper').on('click', '.wcs-reply-trigger', function(e){
        //console.log(this);
        e.preventDefault();
        if(WCS.USER_ID < 0){
            WCS.showModal("Please login to reply to this comment", "OK", function(){});
            return false;            
        }
        
        $('.wcs-reply-container').removeClass('wcs-reply-container-open');
        var $topComment = $(this).closest('.wcs-comment-item-parent');
        var $parentComment = $(this).closest('.wcs-comment-item');
        var replyInfo = $parentComment.data('replyinfo');
        var isAdmin = $parentComment.data('isadmin');
        var parentId =  $parentComment.data('id');
        var parentUserid = replyInfo.split('|')[0];
        var parentName = replyInfo.split('|')[1];        
        var ancestorId = $topComment.data('id');
        var commentId = $parentComment.data('id');
        
        //var replyHtml = $('#template_reply_container').html();
        WCS.REPLY_ANCESTOR_ID = ancestorId;
        WCS.REPLY_PARENT_ID = commentId;        
        WCS.REPLY_PARENT_NAME = parentName;
        WCS.REPLY_PARENT_ADMIN = isAdmin;
        //do we even need a level?  probably not unless we change the structure again
        WCS.REPLY_LEVEL = getLevel(commentId, 1);
        var $replyBox = $topComment.find('.wcs-reply-container');

        $replyBox.addClass('wcs-reply-container-open');

        // scroll to reply block
        var itemTop = $replyBox.offset().top;
        console.log('Scroll top: ', itemTop);
        $('html,body').stop().animate({
            scrollTop: itemTop-100
        }, 800, function(){
        	$replyBox.children('textarea').focus();
        });

        //$replyBox.children('textarea').focus();
        
        $replyBox.find('.wcs-reply-username').text(parentName);
        $replyBox.find('.wcs-reply-username').attr('data-userid', parentUserid);
        if(isAdmin == 1){
            $replyBox.find('.wcs-reply-username').addClass('wcs-verified-user');
        }
        else{
            $replyBox.find('.wcs-reply-username').removeClass('wcs-verified-user');            
        }
        //WCS.REPLY_BOX = $replyBox;
        
    });    
    
    
    $('#wcs-main-wrapper').on('click', '.wcs-share-trigger', function(e){        
        e.preventDefault();
        $(this).next().addClass('wcs-popout-active');
        var $commentObj = $(this).closest('.wcs-comment-item');
        var shareId = $commentObj.data('id');        
       // WCS.POPUP_OPEN = true;
        var text = $commentObj.find('.wcs-comment-item-text').text().trim();
        var cutString = function(s, n){
            var cut= s.indexOf(' ', n);
            if(cut== -1) return s;
            return s.substring(0, cut)
        }
        text = cutString(text, 150)        
        WCS.FACEBOOK_SHARE = 'https://www.facebook.com/sharer/sharer.php?u=' + WCS.THREAD_URL + "#comment_" + shareId;
        WCS.TWITTER_SHARE = 'https://twitter.com/home?status=' + text + "... " + WCS.THREAD_URL + "#comment_" + shareId;        
        $(this).next().find('.wcs-popout-share-btn-facebook').attr('href', WCS.FACEBOOK_SHARE);
        $(this).next().find('.wcs-popout-share-btn-twitter').attr('href', WCS.TWITTER_SHARE);
        
        WCS.THREAD_TITLE = WCS.THREAD_TITLE.replaceAll('&#039;', "'");
        WCS.THREAD_TITLE = WCS.THREAD_TITLE.replaceAll('&quot;', "'");
        WCS.THREAD_TITLE = WCS.THREAD_TITLE.replaceAll('&amp;', "&");
        
        var mailData = "subject=" + encodeURIComponent("Svengoolie - " + WCS.THREAD_TITLE) + "&body=" + encodeURIComponent(text);
        var mailShare = "mailto:?" + mailData;
        $(this).next().find('.wcs-popout-share-btn-email').attr('href', mailShare);
        
        $(this).next().find('.wcs-popout-share-btn-facebook').prop("target","_blank");
        $(this).next().find('.wcs-popout-share-btn-twitter').prop("target","_blank");
        
        WCS.POPUP_OPEN = true;        
    });    
    $('#wcs-main-wrapper').on('click', '.wcs-popout-share-btn', function(e){
        $('.wcs-popout').removeClass('wcs-popout-active'); 
        WCS.POPUP_OPEN = false;         
    });
    
    
    $('#wcs-main-wrapper').on('click', '.wcs-delete-trigger', function(e){            
        e.preventDefault();
        var me = this;
        WCS.showModal("Are you sure you want to delete this comment?", "Delete", function(doit){          
            if(!doit){
                return false;
            }
            
            var $commentObj = $(me).closest('.wcs-comment-item');
            var deleteId = $commentObj.data('id');
            $.ajax({
                url: '/ajax_comments/delete_comment',
                data: {
                     comment_id: deleteId
                },
                type: 'POST',
                dataType: 'json',
                success: function(resp) 
                {
                    if(resp['success'] == 'true'){
                        if(resp['delete_type'] == 2){
                            var $elem = $('#comment_' + deleteId);
                            $elem.addClass('wcs-comment-item-deleted');
                            setTimeout(function(){
                                $elem.remove();
                            }, 500);
                        }else{
                            WCS.setDeleted(deleteId);
                        }
                    }else{
                        WCS.showModal(resp['msg'], "OK", function(){});
                    }
                },
                error: function(response) 
                {
                    alert("Error");
                    console.log(response.responseText);
                    console.log(response);                    
                }
            }); 
        });
    });      

    /******** Profile Avatar Select Popup ***********/
    $('#wcs-main-wrapper').on('click', '.wcs-update-avatar-trigger', function(e){
        e.preventDefault();
        $(this).next().addClass('wcs-popout-active');
        WCS.POPUP_OPEN = true;        
    });

    $('#wcs-main-wrapper').on('click', '.selectmoji', function(e){
        e.preventDefault();
        var currEmoji = $(this).data('emoji');
        $.ajax({
            url: '/ajax_comments/update_emoji',
            data: {
                 emoji_file: currEmoji,
            },
            type: 'POST',
            dataType: 'json',
            success: function(resp) 
            {              
                console.log("emokiji arespoinse");
                console.log(resp);
                if(resp['success'] == 'false'){
                    WCS.showModal(resp['msg'], "OK", function(){});
                }else{
                    $('.wcs-popout').removeClass('wcs-popout-active'); 
                    WCS.POPUP_OPEN = false;
                    //go through each comment, activate delete if user matches
                    $('.wcs-comment-item-reply').each(function(){
                        var replyInfo = $(this).data('replyinfo');
                        var userId = replyInfo.split('|')[0];
                        //console.log("comment userid " + userId + " vs " + WCS.USER_ID);
                        if(WCS.USER_ID == userId){
                            //console.log("setting avatar1 " + resp['profile_image']);
                            $(this).find('.wcs-avatar').attr('src', resp['profile_image']);
                            //new Date().getTime()
                        }
                    });
                    $('.wcs-comment-item-parent').each(function(){
                        var replyInfo = $(this).data('replyinfo');
                        var userId = replyInfo.split('|')[0];
                        //console.log("comment userid " + userId + " vs " + WCS.USER_ID);        
                        if(WCS.USER_ID == userId){
                            //console.log("setting avatar2 " + resp['profile_image']);
                            $(this).find('.wcs-avatar').first().attr('src', resp['profile_image']);
                        }
                    });                
                    //loggedinDisplay(resp);
                    loginSuccess(resp, true, true);
                }
            },
            error: function(response) 
            {
                alert("Error");
                console.log(response.responseText);
                console.log(response);                    
            }
        });     
    });
    /******** emoji, youtube, image embed **********/
    
    $('#wcs-main-wrapper').on('click', '.wcs-post-comment-media-emoji,.wcs-post-comment-media-video,.wcs-post-comment-media-image', function(e){
        
        //add wcs-selected-textarea to the area we want to insert emoji
        var $topComment = $(this).closest('.wcs-comment-item-parent');
        $('.wcs-selected-textarea').removeClass('wcs-selected-textarea');
        var $textarea = $('#topcomment_text');        
        if($topComment.length > 0){
            $textarea = $topComment.find('.wcs-reply-textarea');                  
        }
        $textarea.addClass('wcs-selected-textarea');       
        //display the popup
        $('.wcs-popout').removeClass('wcs-popout-active');
        $(this).next().addClass('wcs-popout-active');
        WCS.POPUP_OPEN = true;
        console.log("this is");
        console.log(this);        
        var me = this;
        //only add these events when popup is open
        if($(this).hasClass('wcs-post-comment-media-image')){
            var holder = $(this).next().find('.wcs-popout-file-upload-dropzone').get(0);

            holder.ondragenter = function(e) { holder.textContent = 'Or drag a file here to upload'; 
                         e.stopPropagation(); e.preventDefault();};
            holder.ondragover = function (e) { e.stopPropagation(); e.preventDefault(); return false; };
            holder.ondragend = function () { 
                //this.className = ''; 
                return false; 
            };
            holder.ondrop = function (e) {
              //this.className = '';
              e.preventDefault();
              e.stopPropagation();
              $(this).closest('.wcs-post-comment-media-btns').find('.wcs-popout-file-upload-dropzone').html('<i class="fa fa-sync fa-spin fa-3x"></i>');       

              WCS.readfiles(e.dataTransfer.files, function(theid, msg){
                if(theid === null){
                    WCS.showModal(msg, "OK", function(){});
                    return;
                }     
                var imageUrl = 'https://weigel-comments.s3.us-east-1.amazonaws.com/' + theid;        
                $('.wcs-selected-textarea').val($('.wcs-selected-textarea').val() + "[image=" + imageUrl + "]");
                $(me).closest('.wcs-post-comment-media-btns').find('.wcs-popout-file-upload-dropzone').html('Or drag a file here to upload'); 
                $('.wcs-popout').removeClass('wcs-popout-active');
                WCS.POPUP_OPEN = false;                      
              });
            }             
        }
        
        e.preventDefault();
        return false;
    });
    
    $('#wcs-main-wrapper').on('click', '.selectemoji', function(){         
        var elem =$('#talkums_text').get(0);
        var theEmoji = $(this).data('emoji');
        $('.wcs-selected-textarea').val($('.wcs-selected-textarea').val() + ":" + theEmoji + ":");
        
        $('.wcs-popout').removeClass('wcs-popout-active');              
        WCS.POPUP_OPEN = false;
    });
    
    $('#wcs-main-wrapper').on('click', '.youtube-add', function(e){
        e.preventDefault();
       var theUrl = $(this).closest('.wcs-post-comment-media-btns').find('.youtube_url').val(); 
        var regExp = /^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
        var youtubeId = "";
        var match = theUrl.match(regExp);
        if (match && match[2].length == 11) {
          youtubeId = match[2];
        } else {
            WCS.showModal("Please enter a valid youtube url", "OK", function(){});
            return false;
        }       
        var myUrl = "https://www.youtube.com/watch?v=" + youtubeId;
       $('.wcs-selected-textarea').val($('.wcs-selected-textarea').val() + "[youtube=" + myUrl + "]");
       $('.wcs-popout').removeClass('wcs-popout-active');              
       WCS.POPUP_OPEN = false;       
    });
    
    $('#wcs-main-wrapper').on('change', '.image_uploader', function(){
        var me = this;
        $(this).closest('.wcs-post-comment-media-btns').find('.wcs-popout-file-upload-dropzone').html('<i class="fa fa-sync fa-spin fa-3x"></i>');       
        WCS.doS3Upload(null, function(theid, msg){
            if(theid === null){
                WCS.showModal(msg, "OK", function(){});
                return;
            }            
            var imageUrl = 'https://weigel-comments.s3.us-east-1.amazonaws.com/' + theid;        
            $('.wcs-selected-textarea').val($('.wcs-selected-textarea').val() + "[image=" + imageUrl + "]");
            $(me).closest('.wcs-post-comment-media-btns').find('.wcs-popout-file-upload-dropzone').html('Or drag a file here to upload'); 
            $('.wcs-popout').removeClass('wcs-popout-active');     
            WCS.resetFormElement($(me));
            
            WCS.POPUP_OPEN = false;                
        });          
    });   
    $('#wcs-main-wrapper').on('change', '#avatar_uploader', function(){    
        $(this).closest('.wcs-popout-avatar').find('#avatar_upload_notice').html('<i class="fa fa-sync fa-spin"></i>');   
        var me = this;
        WCS.doS3Upload('avatar', function(theid, msg){
            if(theid === null){
                WCS.resetFormElement($(me)); 
                $(me).closest('.wcs-popout-avatar').find('#avatar_upload_notice').html('');
                WCS.CLOSE_SIDEBAR();
                WCS.showModal(msg, "OK", function(){});
                return;
            }
            var imageUrl = 'https://weigel-comments.s3.us-east-1.amazonaws.com/' + theid;   

            console.log(imageUrl);                        
            $.ajax({
                url: '/ajax_comments/update_avatar',
                data: {
                     user_upload: imageUrl,
                },
                type: 'POST',
                dataType: 'json',
                success: function(resp) 
                {                   
                    WCS.resetFormElement($(me));                
                    $(me).closest('.wcs-popout-avatar').find('#avatar_upload_notice').html('');
                    if(resp['success'] == 'true'){
                        //close avatar window
                        //go through each comment, activate delete if user matches
                        $('.wcs-comment-item-reply').each(function(){
                            var replyInfo = $(this).data('replyinfo');
                            var userId = replyInfo.split('|')[0];
                            //console.log("comment userid " + userId + " vs " + WCS.USER_ID);
                            if(WCS.USER_ID == userId){
                                $(this).find('.wcs-avatar').attr('src', resp['profile_image'] + "?" + new Date().getTime());
                            }
                        });
                        $('.wcs-comment-item-parent').each(function(){
                            var replyInfo = $(this).data('replyinfo');
                            var userId = replyInfo.split('|')[0];
                            //console.log("comment userid " + userId + " vs " + WCS.USER_ID);        
                            if(WCS.USER_ID == userId){
                                $(this).find('.wcs-avatar').first().attr('src', resp['profile_image'] + "?" + new Date().getTime());
                            }
                        });                
                        //loggedinDisplay(resp);
                        loginSuccess(resp, true, true);
                    }else{
                        if(resp['msg']){
                            WCS.showModal(resp['msg'], "OK", function(){});
                        }                        
                    }
                },
                error: function(response) 
                {
                    alert("Error");
                    console.log(response.responseText);
                    console.log(response);                    
                }
            });                 
            
        });          
        
    });     

    $('#wcs-main-wrapper').on('click', '.wcs-post-comment-button', function(e){
        var text = $('#topcomment_text').val();
        var isReply = $(this).closest('.wcs-reply-container').length > 0 ? true : false;
        if(isReply){
            var $textarea = $(this).closest('.wcs-reply-container').find('.wcs-reply-textarea');
            text = $textarea.val();
            $textarea.addClass('wcs-reply-textarea-submitting');
        }
        WCS.doComment(isReply, text);
        e.preventDefault();
        return;
    });
    
    $('#wcs-main-wrapper').on('click', '.wcs-login-google', function(e){       
        e.preventDefault();
        WCS.doAuthWindow('google'); 
        return false;
        
    });
    $('#wcs-main-wrapper').on('click', '.wcs-login-twitter', function(e){       
        e.preventDefault();
        WCS.doAuthWindow('twitter'); 
        return false;
    });
    $('#wcs-main-wrapper').on('click', '.wcs-login-facebook', function(e){       
        e.preventDefault();
        WCS.doAuthWindow('facebook'); 
        return false;
    });
    $('.wcs-login-email').on('click', function(e){       
        if(WCS.RETURN_USER){
            WCS.loadSidebarTemplate('login')
            WCS.setupProfileForm('login');            
        }else{
            WCS.loadSidebarTemplate('register')
            WCS.setupProfileForm('register');
        }
    });
    
    $('.wcs-comment-filter-trigger').on('click', function(e){
        e.preventDefault();
        $('.wcs-comment-filter-trigger').removeClass('wcs-comments-filter-active');
        var newFilterType = this.id.split('-')[2];
        if(newFilterType == WCS.FILTER_TYPE){
            //do nothing, we're using the same filter
            $(this).addClass('wcs-comments-filter-active');
            return false;
        }
        WCS.FILTER_TYPE = newFilterType;
        WCS.FILTER_PAGE = 0;
        
        $(this).addClass('wcs-comments-filter-active');
          
        WCS.refreshAllComments();        
    });
    
     $('#wcs-main-wrapper').on('click', '.view-more-btn', function(e){
         if($(this).hasClass('view-more-topcomment')){
            WCS.FILTER_PAGE++;
            WCS.refreshAllComments();             
         }else if($(this).hasClass('view-more-newcomment')){
            WCS.LOADING_NEW_COMMENTS = true;
            WCS.loadNewComments();
            var html = $('#template_loadinganimation').html();              
            $('.view-more-newcomment').after(html); 
            $('.view-more-newcomment').hide();
         }else if($(this).hasClass('view-more-profilecomment')){
            WCS.PROFILE_COMMENT_PAGE++;
            //WCS.PROFILE_COMMENT_USER = userId;
            WCS.loadMoreProfileComments();
         }
     });

    var comCheckInterval;
    function startCheck(){
         console.log("focus");
         WCS.checkNewComments();
         comCheckInterval = window.setInterval(WCS.checkNewComments,120000);
     }
     function stopCheck(){
        console.log('blur');
        window.clearInterval(comCheckInterval);
     }
    
     window.addEventListener('focus', startCheck);
     window.addEventListener('blur', stopCheck);
    
     comCheckInterval = setInterval(function(){
        WCS.checkNewComments();                  
     }, 120000);
     
     $('#wcs-main-wrapper').on('click', '.view-prev-replies', function(e){
        var ancestorId = $(this).data('ancestorid');
        var $container = $('#comment_' + ancestorId);
        var loadingHtml = $('#template_loadinganimation').html();      
        
        $container.find('.view-more-subcomment').before(loadingHtml);
        $container.find('.view-more-subcomment').remove();
        $.ajax({
            url: '/ajax_comments/get_all_children_comments',
            data: {
                 ancestor_id: ancestorId,
                 thread_id: WCS.THREAD_ID,
            },
            type: 'POST',
            dataType: 'json',
            success: function(data) 
            {                   
                if(data.length <= 0){
                    return;
                }
                $container.find('.wcs-loading-animation-overlay').remove();
                console.log("children");

                //alert("adding child to " + '#comment_' + resp['parent_id']);
                var $futureComment = $container.find('.wcs-comment-item-reply').first();                 

                $(data).each(function(i, resp){
                    console.log("adding child ");
                    console.log(resp);
                    var $comment = $($('#template_acomment').html());

                    $comment.find('.wcs-user-trigger img').attr('src', resp['profile_image']);
                    $comment.find('.wcs-user-trigger').attr('data-userid', resp['user_id']);

                    $comment.find('.wcs-other-user').attr('data-userid', resp['parent_userid']);
                    $comment.attr('data-replyinfo', resp['parent_id'] + "|" + resp['parent_username']);  
                    $comment.attr('data-isadmin', resp['is_admin']);  

                    $comment.find('.wcs-other-user').html(resp['parent_username']);             
                    $comment.find('.wcs-user-displayname').html(resp['display_name']);
                    $comment.find('.wcs-comment-item-date').html(resp['timeago']);
                    $comment.find('.wcs-comment-item-text').html(resp['generated_comment']);
                    var totalText = "";
                    if(resp['upvotes'] > 0){
                        totalText = " (" + resp['upvotes'] + ')';
                    }
                    var html = "";
                    if(resp['upvoted']){                                        
                        html = '<i class="fas fa-heart"></i>' + " Unlike" + totalText;
                        $comment.find('.wcs-like-trigger').addClass('wcs-like-btn-active');                            
                    }else{
                        html = '<i class="fas fa-heart"></i>' + " Like" + totalText;                              
                    }                    
                    $comment.find('.wcs-like-trigger').html(html);   

                    $comment.attr('data-id', resp['id']); 
                    $comment.attr('id',  "comment_" + resp['id']);
                    if(WCS.USER_ID != resp['user_id']){
                        $comment.find('.wcs-delete-trigger').attr('style', 'display:none');                
                    }
                    $comment.addClass('wcs-comment-item-reply');
                    $futureComment.before($comment);               
                });                  
            },
            error: function(response) 
            {
                alert("Error");
                console.log(response.responseText);
                console.log(response);                    
            }
        });           
     });
     setTimeout(function(){
        if(window.location.href.indexOf('#') > 0){
           var possibleComment = window.location.href.split('#')[1];
           if(possibleComment.indexOf('comment_') === 0){
              var commentId = parseInt(possibleComment.split('_')[1]);

              WCS.loadNewComments(commentId, function(){
                  setTimeout(function(){
                      //so we can add the hash here... otherwise it will be same and not move to location
                      var elem = document.getElementById(possibleComment);
                      elem.scrollIntoView();
                      //hash doesn't work if you already have the hash
                      //window.location.href = origUrl + "#" + possibleComment;
                  }, 2000);                
              });
           }
       }     
         
     }, 500);
})();    

WCS.loadSidebarTemplate = function(theType, isSocial){    
    $('#wcs-slideout-wrapper').empty();
   if(theType == 'register'){
        var $container = $('<div class="wcs-profile-registration-wrap wcs-profile-settings-wrap">');
        var innerHtml = $('#template_registration_header_email').html() + $('#template_profile_form').html();
        if(isSocial){
            innerHtml = $('#template_registration_header_social').html() + $('#template_profile_form').html();
        }
        
        $container.append(innerHtml);  

        $('#wcs-slideout-wrapper').append($container);           
   }
   else if(theType == 'login'){
       var $container = $('<div class="wcs-profile-settings-wrap">');
       var innerHtml = $('#template_login_header').html() + $('#template_login_form').html();
       $container.append(innerHtml);          
       $('#wcs-slideout-wrapper').append($container);           
   }
   else if(theType == 'profile_user'){
       var headerHtml = $('#template_profile_header').html();
       var formHtml = $('#template_profile_form').html();
       var $settingsBody = $($('#template_profile_display_wrapper').html());
       $settingsBody.find('.wcs-profile-settings-wrap').append(formHtml);
       
       $('#wcs-slideout-wrapper').append(headerHtml);  
       
       $('#wcs-slideout-wrapper').append($settingsBody);         
   }
   else if(theType == 'profile_other'){      
       var headerHtml = $('#template_profile_header').html();
       var wrapper = $('#template_profile_display_wrapper').html();
       
              
       $('#wcs-slideout-wrapper').append(headerHtml + wrapper);         
   }
   else if(theType == 'forgot_password'){
       var wrapper = $('#template_forgotpass_form').html();              
       $('#wcs-slideout-wrapper').append(wrapper);              
   }
   else if(theType == 'update_password'){
       var wrapper = $('#template_update_password').html();
       $('#wcs-slideout-wrapper').append(wrapper);                     
   }
   else if(theType == 'loading'){
        var html = $('#template_loadinganimation').html();
       $('#wcs-slideout-wrapper').append(html);                      
   }
};


WCS.doAuthWindow  = function(authType){
    var windowWidth = 600;
    var windowHeight = 360;
    if(authType == 'facebook'){
        windowWidth = 800;
        windowHeight = 480;
    }else if(authType == 'twitter'){
        windowWidth = 500;
        windowHeight = 700;
    }
    var authWindow = window.open(WCS.SITE_URL + 'iframelogin/social_login?service=' + authType, '_blank', 'toolbars=0,width=' + windowWidth + ',height=' + windowHeight + ',left=200,top=200,scrollbars=1,resizable=1,location=no');    
};

WCS.doComment = function(isReply, theText){

    var parentId = 0;
    var parentAdmin = 0;
    var ancestorId = 0;
    var replyLevel = 0;
    if(isReply){
        parentId = WCS.REPLY_PARENT_ID;
        parentAdmin = WCS.REPLY_PARENT_ADMIN;
        ancestorId = WCS.REPLY_ANCESTOR_ID;        
        replyLevel = parseInt(WCS.REPLY_LEVEL);
        replyLevel++;
    }
    
    if(WCS.IS_POSTING){
        return false;
    }        


    //Decrement counter, so user's own comment doesn't show up as 'new'
    newCommentCount = newCommentCount - 1;

    WCS.IS_POSTING = true;
    $.ajax({
        url: '/ajax_comments/post_comment',
        data: {
             thread_id: WCS.THREAD_ID,
             thread_url: WCS.THREAD_URL,             
             site_id: WCS.TALKUMS_SITE_ID,
             ancestor_id : ancestorId,
             parent_id : parentId,
             parent_admin: parentAdmin,
             level : replyLevel,
             post_text: theText
        },
        type: 'POST',
        dataType: 'json',
        success: function(resp) 
        {         
            console.log("post comment data");
            console.log(resp);
            if(resp['success'] == 'false'){
                if(resp['action']){
                    WCS.force_action(resp['action']);                        
                }
                else if(resp['msg']){
                    WCS.showModal(resp['msg'], "OK", function(){});
                }
                WCS.IS_POSTING = false; 
                return;                
            }
            if(parentId > 0){
                $('.subcomment_text').val("");
            }else{
                $('#topcomment_text').val("");            
            }
            //$('.wcs-reply-container').remove();                
            WCS.IS_POSTING = false; 
            var $comment = $($('#template_acomment').html());
            
    
            $comment.find('.wcs-user-trigger img').attr('src', resp['profile_image']);
            $comment.find('.wcs-user-trigger').attr('data-userid', resp['user_id']);
            
            if(resp['parent_userid']){
                $comment.find('.wcs-other-user').attr('data-userid', resp['parent_userid']);
                $comment.attr('data-replyinfo', resp['user_id'] + "|" + resp['display_name'] + "|" + parentId); 
                $comment.attr('data-isadmin', resp['is_admin']);               
                if(resp['parent_admin'] == 1){
                    $comment.find('.wcs-other-user').addClass('wcs-verified-user');
                }else{
                    $comment.find('.wcs-other-user').removeClass('wcs-verified-user');                    
                }                
                $comment.find('.wcs-other-user').html(resp['parent_username']);            
            }else{          
                $comment.attr('data-replyinfo', resp['user_id'] + "|" + resp['display_name'] + "|" + parentId);  
                $comment.attr('data-isadmin', resp['is_admin']);                  
                
                $comment.addClass('wcs-comment-item-parent');
                $comment.find('.wcs-other-user').remove();
                $comment.find('.wcs-comment-item-username i').remove();                
                //need to add reply box
                var replyBox = $('#template_reply_container').html();
                $comment.append(replyBox);
            }            
            $comment.find('.wcs-user-displayname').html(resp['display_name']);
            if(resp['is_admin'] == 1){
                $comment.find('.wcs-user-displayname').addClass('wcs-verified-user');
            }else{
                $comment.find('.wcs-user-displayname').removeClass('wcs-verified-user');                    
            }                
            $comment.find('.wcs-user-displayname').attr('data-userid', WCS.USER_ID);
            $comment.find('.wcs-user-displayname').attr('data-isadmin', resp['is_admin']);
            $comment.find('.wcs-comment-item-date').html('Just Now');
            $comment.find('.wcs-comment-item-text').html(resp['post_html']);
            $comment.find('.wcs-like-trigger').html('<i class="fas fa-heart"></i>' + " Like ");           
            $comment.attr('data-id', resp['insert_id']); 
            $comment.attr('id',  "comment_" + resp['insert_id']);
            
            if(parentId > 0){
                $comment.addClass('wcs-comment-item-reply');
                var $container = $('#comment_' + ancestorId);
                $container.find('.wcs-reply-container').before($comment);                
            }
            else{                
                $('.wcs-comment-container').prepend($comment);
            }

            // adds/removes class to animate entrance
            $comment.addClass('wcs-comment-item-added');
            setTimeout(function() {
            	$comment.removeClass('wcs-comment-item-added');
            }, 500);

            if($('.wcs-comments-no-comments').length > 0){
                $('.wcs-comments-no-comments').remove();
            }
            if(WCS.socket !== null){
                WCS.socket.publish('thread' + WCS.TALKUMS_THREADID, {user: 'user456', 
                    message: 'Hi!'});                    
            }
        },
        error: function(response) 
        {
            //Set new comment count back up if error (no actual commment)
            newCommentCount++;
            alert("Error");
            console.log(response.responseText);
            console.log(response);                    
        }
    }); 



};

WCS.setupProfileForm = function(formType, isSocial){
    WCS.SIDEBAR_PAGE = formType;   
    
    //bind evends
    if(formType == 'register' || formType == 'settings'){
        $('#zipcode').on('keypress', function(ev) {
            var keyCode = window.event ? ev.keyCode : ev.which;
            //codes for 0-9
            if (keyCode < 48 || keyCode > 57) {
                //codes for backspace, delete, enter
                if (keyCode != 0 && keyCode != 8 && keyCode != 13 && !ev.ctrlKey) {
                    ev.preventDefault();
                }
            }
        });      
        $('#zipcode').change(function(){
           //load_providers();
        });

        $("#zipcode").keyup(function(){
            //load_providers();
        }); 
        
        $('#provider').on('change', function(){
           var aProvider = $(this).val(); 
           if(aProvider == 'provider not listed'){
               $('.wcs-profile-settings-other-provider').show();
           }
           else if(aProvider == ''){
               
           }else{
               $('.wcs-profile-settings-other-provider').hide();                              
           }
        });  
        if(formType == 'register'){
            $('#username').on('keyup', function(ev) {
                //codes for 0-9
                var newVal = $(this).val();
                var code, i, len;
                var isAlphanumeric = true;
                 for (i = 0, len = newVal.length; i < len; i++) {
                   code = newVal.charCodeAt(i);
                   if (!(code > 47 && code < 58) && // numeric (0-9)
                       !(code > 64 && code < 91) && // upper alpha (A-Z)
                       !(code > 96 && code < 123) && // lower alpha (a-z)
                       !(code == 95)        ) {  // underscore
                     isAlphanumeric = false;
                   }
                 }
                if(!isAlphanumeric){
                    $('.wcs-settings-form-err-username').html("Username Invalid: spaces, hyphens and special characters are NOT allowed.");
                }else{
                    $('.wcs-settings-form-err-username').html("");
                }
            });          
        }
        
    }    
    if(formType == "register"){
        $('.wcs-profile-settings-form').attr('id', 'wcs-registration-form');    
        grecaptcha.render('recaptcha_site', {
            'sitekey' : WCS.CAPTCHA_SITE_KEY
        });    
        $('.wcs-profile-settings-email-username').hide();
        $('.wcs-profile-signup-username').show();
        $('.wcs-profile-signup-password').show();        
        
    }else if(formType == "settings"){     
        $('.wcs-profile-settings-form').attr('id', 'wcs-edit-form');         
        $('input[name="social_username"]').attr('readonly', 'readonly');
        $('input[name="social_username"]').addClass("wcs-profile-settings-form-readonly");     
        $('input[name="username1"]').attr('readonly', 'readonly');
        $('input[name="username1"]').addClass("wcs-profile-settings-form-readonly");
        $('input[name="password"]').attr('readonly', 'readonly');
        $('input[name="password"]').addClass("wcs-profile-settings-form-readonly");   
        if(isSocial){
            $('input[name="social_username"]').after('<span class="wcs-settings-form-disclaimer">Your username can' + 
                    "'" + 't be edited</span>');            
        }else{
            $('input[name="username1"]').after('<span class="wcs-settings-form-disclaimer">Your username can' + 
                    "'" + 't be edited</span>');   
            
            $('.wcs-settings-form-password-container').remove();
            $('.wcs-settings-form-password-updater').show();
            //$('.wcs-settings-form-password-updater').hide();
            
        }
        if(WCS.termsAccepted == 1){
            $('.wcs-profile-registration-terms').remove();
        }    
        
    }else if(formType == "login"){
        $('.wcs-profile-settings-form').attr('id', 'wcs-login-form');                 
    }
    else if(formType == "forgot_password"){
        $('.wcs-profile-settings-form').attr('id', 'wcs-forgotpass-form');    
        grecaptcha.render('recaptcha_site', {
            'sitekey' : WCS.CAPTCHA_SITE_KEY
        });          
    }
    else if(formType == 'update_password'){
        $('.wcs-profile-settings-form').attr('id', 'wcs-updatepass-form');    
        grecaptcha.render('recaptcha_site', {
            'sitekey' : WCS.CAPTCHA_SITE_KEY
        });                  
    }
    
    $('.wcs-cancel-btn').on('click', function(){
        WCS.CLOSE_SIDEBAR();                   
    });    
    
    
    //ugly - delay to allow dom to update, so can bind events
    setTimeout(function(){
        if(formType == "register"){
            WCS.setupRegistrationForm();
        }else if (formType == "login"){
            WCS.setupLoginForm();            
        }else if(formType == "settings"){
            WCS.setupSettingsForm();
        }
        else if(formType == "forgot_password"){
            WCS.setupForgotPass();
        }
        else if(formType == 'update_password'){
            WCS.setupUpdatePass();
        }
        if(!$('#wcs-overlay-sidebar').hasClass('wcs-overlay-open')){
            WCS.OPEN_SIDEBAR();
            WCS.PROFILE_OPEN = true;
        }            
        
    }, 10);    
};



WCS.setupRegistrationForm = function(){
    //WCS.PROFILE_OPEN = true;
    $('#wcs-signin-link').on('click', function(e){
        e.preventDefault();
        WCS.loadSidebarTemplate('login');
        WCS.setupProfileForm('login');       
        
        return false;
    });
    
    $('#wcs-registration-form').submit(function(e){      
       // alert("submitting");
       e.preventDefault();
        var html = $('#template_loadinganimation').html();
        $('#wcs-overlay-sidebar').append(html);
       
       //lets try HTML5 formdata object...       
       var formData = new FormData(document.getElementById("wcs-registration-form"));          

       var xhr = new XMLHttpRequest();
       xhr.open('POST', '/ajax_comments/register_update_site_user/', true);
       xhr.onload = function () {
          if (xhr.status === 200) 
          {
              var result = JSON.parse(xhr.responseText);
              $('#wcs-overlay-sidebar').find('.wcs-loading-animation-overlay').remove();
              if(result['success'] == "true"){                      
                    //do modal
                   // alert("do modal close");
                  var successHtml = $('#template_registration_header_success').html();
                  $('.wcs-profile-registration-wrap').empty();
                  $('.wcs-profile-registration-wrap').html(successHtml);
                  loginSuccess(result, true, true);                  
                  WCS.termsAccepted = 1;
                    var defaultComment = $('#topcomment_text').val();                   
                    if(defaultComment.trim().length > 0)
                    $.ajax({
                        url: '/ajax_comments/set_default_comment_text',
                        data: {
                             default_comment: defaultComment
                        },
                        type: 'POST',
                        dataType: 'json',
                        success: function(resp) 
                        {                            
                        },
                        error: function(response) 
                        {
                        }
                    });                  
                  
                  
                  /*
                  setTimeout(function(){
                     WCS.CLOSE_SIDEBAR();   
                  }, 10000);
                  */
              }
              else{
                  grecaptcha.reset();                  
                  //alert("failure: " + );
                  var setError = function(errorName){
                      if(result['errors'][errorName]){
                          $('.wcs-settings-form-err-' + errorName).html(result['errors'][errorName]);
                      }
                      else{
                          $('.wcs-settings-form-err-' + errorName).html("");
                      }
                      
                  };
                  
                  setError('full-name');
                  setError('email');
                  setError('username');
                  setError('password');
                  setError('social-username');
                  setError('dob');
                  setError('gender');
                  setError('zipcode');
                  setError('provider');
                  setError('other-provider');
                  //setError('terms-of-service');
                  setError('captcha');
                  if(result['msg']){
                      alert(result['msg']);
                  }

              }
          } 
          else 
          {
             alert('An error occurred!');
          }
       };

       xhr.send(formData); 
   });    
    
}
WCS.setupForgotPass = function(){
    $('#wcs-login-link').on('click', function(e){
        e.preventDefault();        
        WCS.loadSidebarTemplate('login');
        WCS.setupProfileForm('login');       
        return false;
    });  
    
    $('#wcs-forgotpass-form').submit(function(e){    
       e.preventDefault();
       var html = $('#template_loadinganimation').html();
       $('#wcs-overlay-sidebar').append(html);
       var formData = new FormData(document.getElementById("wcs-forgotpass-form"));          
       var xhr = new XMLHttpRequest();
       xhr.open('POST', '/ajax_comments/reset_password/', true);
       xhr.onload = function () {
          if (xhr.status === 200) 
          {
              var result = JSON.parse(xhr.responseText);
              console.log("results")
              console.log(result);
              $('#wcs-overlay-sidebar').find('.wcs-loading-animation-overlay').remove();              
              if(result['success'] == "true"){                      
                var successHtml = $('#template_forgotpass_success').html();
                $('.wcs-profile-settings-wrap').empty();
                $('.wcs-profile-settings-wrap').html(successHtml);
              }
              else{
                  grecaptcha.reset();                  
                  //alert("failure: " + );
                  var setError = function(errorName){
                      if(result['errors'][errorName]){
                          $('.wcs-settings-form-err-' + errorName).html(result['errors'][errorName]);
                      }
                      else{
                          $('.wcs-settings-form-err-' + errorName).html("");
                      }
                      
                  };
                  setError('email');
                  setError('captcha');
              }                
          } 
          else 
          {
             alert('An error occurred!');
          }
       };

       xhr.send(formData); 
       
       return false;
    });
    
};

WCS.setupUpdatePass = function(){
    $('.wcs-update-password-settings-link').on('click', function(e){
        e.preventDefault();      
        //Just reload with ajax call - otherwise this would get really messy
        WCS.PROFILE_USER_ID = -1;
        $('.wcs-post-comment-user-settings').trigger('click');       
        return false;        
    });  
    
    $('#wcs-updatepass-form').submit(function(e){    
       e.preventDefault();
       var html = $('#template_loadinganimation').html();
       $('#wcs-overlay-sidebar').append(html);
       var formData = new FormData(document.getElementById("wcs-updatepass-form"));          
       var xhr = new XMLHttpRequest();
       xhr.open('POST', '/ajax_comments/update_password/', true);
       xhr.onload = function () {
          if (xhr.status === 200) 
          {
              var result = JSON.parse(xhr.responseText);
              console.log("results")
              console.log(result);
              $('#wcs-overlay-sidebar').find('.wcs-loading-animation-overlay').remove();              
              if(result['success'] == "true"){       
                var successHtml = $('#template_updatepass_success').html();
                $('.wcs-profile-settings-wrap').empty();
                $('.wcs-profile-settings-wrap').html(successHtml);
              }
              else{
                  grecaptcha.reset();                  
                  //alert("failure: " + );
                  var setError = function(errorName){
                      if(result['errors'][errorName]){
                          $('.wcs-settings-form-err-' + errorName).html(result['errors'][errorName]);
                      }
                      else{
                          $('.wcs-settings-form-err-' + errorName).html("");
                      }
                      
                  };
                  setError('password');
                  setError('password1');                  
                  setError('captcha');
              }                
          } 
          else 
          {
             alert('An error occurred!');
          }
       };

       xhr.send(formData); 
       
       return false;
    });
    
};



WCS.setupLoginForm = function(){
    
    $('#wcs-register-link').on('click', function(e){
        e.preventDefault();        
        WCS.loadSidebarTemplate('register');
        WCS.setupProfileForm('register');       
        return false;
    });
    
    $('.wcs-login-forgot-un-pw').on('click', function(e){
        e.preventDefault();        
        WCS.loadSidebarTemplate('forgot_password');
        WCS.setupProfileForm('forgot_password');       
        return false;        
    });
    
    $('#wcs-login-form').submit(function(e){    
       e.preventDefault();
       var html = $('#template_loadinganimation').html();
       $('#wcs-overlay-sidebar').append(html);
       
       var formData = new FormData(document.getElementById("wcs-login-form"));          
       var xhr = new XMLHttpRequest();
       xhr.open('POST', '/ajax_comments/login_site_user/', true);
       xhr.onload = function () {
          if (xhr.status === 200) 
          {
              var result = JSON.parse(xhr.responseText);
              console.log("result");
              console.log(result);
              $('#wcs-overlay-sidebar').find('.wcs-loading-animation-overlay').remove();                 
              
              if(result['success'] == "true"){
                  //make user do the things
                  loginSuccess(result, true, false);                  
                    //do modal
                  //$('#wcs-edit-form').after("<h1 class='wcs-edit-success'>Thank you for updating your information!</h1>");
              }
              else{                 
                  //alert("failure: " + );
                  var setError = function(errorName){
                      if(result['errors'][errorName]){
                          $('.wcs-settings-form-err-' + errorName).html(result['errors'][errorName]);
                      }
                      else{
                          $('.wcs-settings-form-err-' + errorName).html("");
                      }
                      
                  };

                  setError('username');
                  setError('password');
                  setError('generic');                  
                  //if(result['msg']){
                  //   WCS.showModal(result['msg'], "OK", function(){});
                  //}
              }
          } 
          else 
          {
             alert('An error occurred!');
          }
       };

       xhr.send(formData); 
       
       return false;
    });
    
        
}

WCS.setupSettingsForm = function(){
    $('.wcs-profile-nav-tab').on('click', function(e){
        e.preventDefault();
        $('.wcs-profile-nav-tab').removeClass('wcs-profile-nav-active');
        $(this).addClass('wcs-profile-nav-active');
        if($(this).text() == 'Settings'){
            $('.wcs-profile-settings-wrap').show();
            $('.wcs-profile-comments-wrap').hide();
        }else{
            $('.wcs-profile-settings-wrap').hide();
            $('.wcs-profile-comments-wrap').show();
            
        }
    });  
          
    $('.wcs-view-in-discussion-trigger').on('click', function(e){
        e.preventDefault();
        var viewUrl = $(this).data('url'); 
        var vus = viewUrl.split('#');
        var baseUrl = vus[0];
        var commentDomId = vus[1];
        if(WCS.BASE_THREAD_URL == baseUrl && $('#' + commentDomId).length <= 0){
            var commentParts = commentDomId.split('_');
            var commentId = commentParts[1];
            var ancestorId = parseInt($(this).data('ancestorid'));
            if(ancestorId > 0){
                //fetch ancestor and it will pull in child
                commentId = ancestorId;
            }
            WCS.loadNewComments(commentId, function(){
                setTimeout(function(){
                    var elem = document.getElementById(commentDomId);
                    elem.scrollIntoView();                                        
                    WCS.CLOSE_SIDEBAR();                      
                }, 100);                                
            });                
            
        }else{
        
            window.location.href = viewUrl;

            setTimeout(function(){
                WCS.CLOSE_SIDEBAR();                      
            }, 250);
        }
    });
    
    //WCS.PROFILE_OPEN = true;
    $('#wcs-signin-link').on('click', function(e){
        e.preventDefault();
        WCS.loadSidebarTemplate('login');
        WCS.setupProfileForm('login');       
        
        return false;
    });
    
    $('.wcs-profile-settings-update-password').on('click', function(e){
        e.preventDefault();
        WCS.loadSidebarTemplate('update_password');
        WCS.setupProfileForm('update_password');       
        
        return false;       
    });
    
    //alert("setting up settings form");
    $('#wcs-edit-form').submit(function(e){      
       e.preventDefault();
       //lets try HTML5 formdata object...
       var formData = new FormData(document.getElementById("wcs-edit-form"));  

        var html = $('#template_loadinganimation').html();
        $('#wcs-overlay-sidebar').append(html);
       

       var xhr = new XMLHttpRequest();
       xhr.open('POST', '/ajax_comments/register_update_site_user/', true);
       xhr.onload = function () {
          if (xhr.status === 200) 
          {
              var result = JSON.parse(xhr.responseText);
              $('#wcs-overlay-sidebar').find('.wcs-loading-animation-overlay').remove();
              if(result['success'] == "true"){
                    //do modal
                   // alert("do modal close");
                  //alert("Some success message will display in some location");
                  $('.wcs-profile-settings-edit-message').html("<div class='wcs-profile-settings-edit-success'>Your settings have updated successfully!</div>");
              }
              else{                 
                  //alert("failure: " + );
                  var setError = function(errorName){
                      if(result['errors'][errorName]){
                          $('.wcs-settings-form-err-' + errorName).html(result['errors'][errorName]);
                      }
                      else{
                          $('.wcs-settings-form-err-' + errorName).html("");
                      }
                      
                  };
                  
                  setError('full-name');
                  setError('email');
                  setError('username');
                  setError('password');
                  setError('social-username');
                  setError('dob');
                  setError('gender');
                  setError('zipcode');
                  setError('provider');
                  setError('other-provider');
                  //setError('terms-of-service');
                  setError('captcha');
                  if(result['errors']['msg']){
                      alert(result['errors']['msg']);
                  }

              }
          } 
          else 
          {
             alert('An error occurred!');
          }
       };

       xhr.send(formData); 
    });
    
};


WCS.force_action = function(theAction, skipQuestion){
   if(theAction == 'accept_terms'){
       var res = false;
       if(!skipQuestion){
           WCS.showModal("You have not completed registration.  Do you want to complete registration to perform this action?", "Yes", 
           function(doit)
           { 
               if(!doit){
                   return false;
               }

               WCS.loadSidebarTemplate('register', true);           
                WCS.setupProfileForm('register', true);
                $.ajax({
                     url: '/ajax_comments/get_user_private_profile',
                     data: {
                          private: 'true'
                     },
                     type: 'POST',
                     dataType: 'json',
                     success: function(resp) 
                     {      
                         var user = resp['user'];
                         user['newsletter_signup'] = 1;
                         WCS.fillSettingsData(user);
                     }   
                });               
           });           
       }else{
           //it must be social registration... because you can't be logged in otherwise
           WCS.loadSidebarTemplate('register', true);           
           WCS.setupProfileForm('register', true);
           $.ajax({
                url: '/ajax_comments/get_user_private_profile',
                data: {
                     private: 'true'
                },
                type: 'POST',
                dataType: 'json',
                success: function(resp) 
                {      
                    var user = resp['user'];
                    user['newsletter_signup'] = 1;                    
                    WCS.fillSettingsData(user);
                }   
           });
           
       }
   }
   else if(theAction == 'confirm_email'){
        WCS.showModal("You have not confirmed your email.  Do you want to resend the registration email?", "Yes", function(doit)
        {       
            if(doit){
                $.ajax({
                    url: '/ajax_comments/resend_registration_email',
                    data: {
                        send: 1
                    },
                    type: 'POST',
                    dataType: 'json',
                    success: function(resp) 
                    {                         

                    },
                    error: function(response) 
                    {

                    }
                });                  
            }
        });
   }
};       

WCS.fillSettingsData = function(user){
    $('input[name="wcs_email"]').val(user['email']);
    $('input[name="fullName"]').val(user['name']);

    //is social
    if(user['service'] == 'google' || user['service'] == 'facebook' || user['service'] == 'twitter'){
        $('input[name="social_username"]').val(user['display_name']);    
        $('input[name="is_social"]').val(1);     
        $('.wcs-profile-settings-email-username').hide();
        $('.wcs-profile-signup-username').hide();
        $('.wcs-profile-signup-password').hide();
        $('.wcs-profile-settings-social-username').show();        
        if(user['email'] && user['email'].length > 3){
            $('input[name="wcs_email"]').addClass("wcs-profile-settings-form-readonly");
            $('input[name="wcs_email"]').attr('readonly', 'readonly');
            $('input[name="wcs_email"]').after('<span class="wcs-settings-form-disclaimer">This email address is tied to your ' + user['service'] + 
                    ' account and can' + "'" + 't be edited</span>');            
            
        }           
    }
    else{
        $('.wcs-profile-settings-email-username').show();
        $('.wcs-profile-signup-username').hide();
        $('.wcs-profile-signup-password').hide();        
        $('input[name="username"]').val(user['display_name']);   
        $('input[name="username1"]').val(user['display_name']);   
        $('input[name="wcs_email"]').addClass("wcs-profile-settings-form-readonly");
        if(user['email'] && user['email'].length > 3){
            $('input[name="wcs_email"]').attr('readonly', 'readonly');
            $('input[name="wcs_email"]').after('<span class="wcs-settings-form-disclaimer">This email address is tied to your ' + user['service'] + 
                    ' account and can' + "'" + 't be edited</span>');          
        }
    }
    
    
    $('input[name="zipcode"]').val(user['zipcode']); 
    var option = '';
    if(user['provider']){
        if(user['provider'].substring(0, 6) == "Other:"){
            $('input[name="other_provider"]').val(user['provider'].substring(7));
            $('.wcs-profile-settings-other-provider').show();
            option = 'provider not listed';
        }else{
            $('.wcs-profile-settings-other-provider').hide();            
            option = user['provider'];
        }   
    }
    if(user['newsletter_signup'] == 1){
        $('#newsletter_signup').attr('checked', 'checked');
    }else{
        $('#newsletter_signup').removeAttr('checked');
    }
    
    load_providers(option);
        
    $('select[name="gender"]').val(user['gender']);    
    
    if(user['dob']){
        var dobSplit = user['dob'].split('-');
        if(dobSplit.length == 3){
            var year = parseInt(dobSplit[0].replace(/\b0+/g, '')).toString();
            var month = parseInt(dobSplit[1].replace(/\b0+/g, '')).toString();
            var day = parseInt(dobSplit[2].replace(/\b0+/g, '')).toString();         
            $('select[name="dobYear"]').val(year);          
            $('select[name="dobMonth"]').val(month);                      
            $('select[name="dobDay"]').val(day);                      
        }        
    }
};

WCS.showModal = function(msg, buttonText, callback){

    $('#wcs-overlay-modal').addClass('wcs-overlay-open');

    $('.wcs-modal-innertext').html(msg);
    $('.wcs-modal-btns-cancel').off('click');
    $('.wcs-modal-btns-cancel').on('click', function(){        
        callback(false); 
        $('#wcs-overlay-modal').removeClass('wcs-overlay-open');
        WCS.MODAL_OPEN = false;        
    });
    
    $('.wcs-modal-btns-submit').html(buttonText);
    $('.wcs-modal-btns-submit').off('click');
    $('.wcs-modal-btns-submit').on('click', function(){
        callback(true);
        $('#wcs-overlay-modal').removeClass('wcs-overlay-open');
        WCS.MODAL_OPEN = false;        
    });
    WCS.MODAL_CALLBACK = callback;    
    setTimeout(function(){
        WCS.MODAL_OPEN = true;  
    }, 500);
};

WCS.setDeleted = function(commentId){
    var $comment = $('#comment_' + commentId);
    var dateHtml = $comment.find('.wcs-comment-item-date').html();
    $comment.find('.wcs-comment-flag').first().remove();
    $comment.find('.wcs-comment-item-header').first().remove();
    $comment.find('.wcs-comment-item-text').first().remove();
    $comment.find('.wcs-comment-item-footer').first().remove();

    var $deleteHeader = $($('#template_deleted_comment').html()).find('.wcs-comment-item-header').unwrap();
    var $deleteText = $($('#template_deleted_comment').html()).find('.wcs-comment-item-text-removed').unwrap();
    $comment.prepend($deleteText);        
    $comment.prepend($deleteHeader);
    setTimeout(function(){
        $comment.find('.wcs-comment-item-date').html(dateHtml);
    }, 10);
};

var newCommentCount = 0;
var conn;
if (window["WebSocket"]) {
    conn = new ReconnectingWebSocket("wss://socket2me.weigelbroadcasting.com:8080/newsthread/"+WCS.THREAD_ID);
    conn.onmessage = function (evt) {
        //alert(evt.data);
        newCommentCount++;
        if(newCommentCount>0){
            $('.view-more-newcomment').html("Load " + newCommentCount + " new comments <i class='fas fa-angle-down'></i>");
            $('.view-more-newcomment').show();
        }
        //var data = JSON.parse(evt.data);
        //var song = data[0];
    };
} else {
    //var item = document.createElement("div");
    //item.innerHTML = "<b>Your browser does not support WebSockets.</b>";
    appendLog(item);
}

var commentsLastChecked = Date.now();

WCS.checkNewComments = function(){
    //console.log("checking");
    return;
    nownow = Date.now();
    timediff = nownow - commentsLastChecked;
    if(timediff < 60000){
        //console.log("too soon");
        return;
    }
    commentsLastChecked = nownow;
   $.ajax({
        url: '/ajax_comments/get_new_comment_count',
        data: {
             max_id: WCS.MAX_ID,
             thread_id: WCS.THREAD_ID
        },
        type: 'POST',
        dataType: 'json',
        success: function(data) 
        {   
            var newTotal = parseInt(data['new_total']);
            if(newTotal > 0){
                //already updated button                
                if(WCS.NEW_COMMENT_TOTAL == newTotal){
                    return;
                }
                WCS.NEW_COMMENT_TOTAL = newTotal;
                //alert("has new comments");
                $('.view-more-newcomment').html("Load " + newTotal + " new comments <i class='fas fa-angle-down'></i>");                
                $('.view-more-newcomment').show();                
            }
        },
        error: function(response) 
        {
            console.log(response.responseText);
            console.log(response);                    
        }
    });     

};

WCS.loadNewComments = function(specificId, callback){
    var requestUrl = '/ajax_comments/get_specific_topcomment';
    if(!specificId){
        requestUrl = '/ajax_comments/get_new_comments';
    }
    $.ajax({
        url: requestUrl,
        data: {
             max_id: WCS.MAX_ID,
             thread_id: WCS.THREAD_ID,
             comment_id : specificId
        },
        type: 'POST',
        dataType: 'json',
        success: function(data) 
        {               
            var total = parseInt(data['new_total']);
            if(total > 0){
                if(data['new_max'] > 0){
                    WCS.MAX_ID = parseInt(data['new_max']);
                    WCS.NEW_COMMENT_TOTAL = 0;
                }
                
                
                var topComments = data['topcomments'];
                var subComments = data['subcomments'];

                $(topComments).each(function(i, resp){
                    var $comment = $($('#template_acomment').html());
                    if(resp['active'] == 0){
                        $comment = $($('#template_deleted_comment').html());
                        if(!resp['has_children']){
                            return;
                        }
                    }
                    
                    $comment.find('.wcs-user-trigger img').attr('src', resp['profile_image']);
                    $comment.find('.wcs-user-trigger').attr('data-userid', resp['user_id']);

                    $comment.attr('data-replyinfo', resp['user_id'] + "|" + resp['display_name'] + "|" + resp['parent_id']);  
                    $comment.attr('data-isadmin', resp['is_admin']);  
                    
                    $comment.addClass('wcs-comment-item-parent');
                    //need to add reply box
                    var replyBox = $('#template_reply_container').html();
                    $comment.append(replyBox);         
                    $comment.find('.wcs-user-displayname').html(resp['display_name']);
                    $comment.find('.wcs-comment-item-date').html(resp['timeago']);
                    if(resp['active'] == 0){
                        $comment.find('.wcs-comment-item-text').html('<span class="wcs-comment-item-text-removed">This comment has been removed.</span>');
                    }else{
                        $comment.find('.wcs-comment-item-text').html(resp['generated_comment']);
                    }
                    if(WCS.USER_ID != resp['user_id']){
                        $comment.find('.wcs-delete-trigger').attr('style', 'display:none');                
                    }
                    if(resp.parent_id == 0){
                        $comment.find('.wcs-other-user').remove();
                        $comment.find('.wcs-comment-item-username i').remove();
                    }else{
                        $comment.find('.wcs-other-user').attr('data-userid', resp.parent_userid);
                        $comment.find('.wcs-other-user').html(resp.parent_username);                            
                    }                
                    
                    //xxxxxxxxxxxxxxxx
                    if(resp.is_admin == 1){
                       $comment.find('.wcs-user-displayname').addClass('wcs-verified-user');
                    }else{
                        $comment.find('.wcs-user-displayname').removeClass('wcs-verified-user');            
                    }

                    var totalText = "";
                    if(resp['upvotes'] > 0){
                        totalText = " (" + resp['upvotes'] + ')';
                    }
                    var html = "";
                    if(resp['upvoted']){                                        
                        html = '<i class="fas fa-heart"></i>' + " Unlike" + totalText;   
                        $comment.find('.wcs-like-trigger').addClass('wcs-like-btn-active');
                    }else{
                        html = '<i class="fas fa-heart"></i>' + " Like" + totalText;                                     
                    }     


                    $comment.find('.wcs-like-trigger').html(html);           
                    $comment.attr('data-id', resp['id']); 
                    $comment.attr('id',  "comment_" + resp['id']);
                    if($('.wcs-comment-container').find('#comment_' + resp['id']).length <= 0){
                        if(data['new_max'] > 0){
                            $('.wcs-comment-container').prepend($comment);
                        }else{
                            $('.wcs-comment-container').append($comment);                            
                        }
                    }
                });
                setTimeout(function(){

                    $(subComments).each(function(i, resp){
                        console.log("adding child ");
                        console.log(resp);
                        var $comment = $($('#template_acomment').html());

                        $comment.find('.wcs-user-trigger img').attr('src', resp['profile_image']);
                        $comment.find('.wcs-user-trigger').attr('data-userid', resp['user_id']);


                        $comment.find('.wcs-other-user').attr('data-userid', resp['parent_userid']);
                        $comment.attr('data-replyinfo', resp['parent_id'] + "|" + resp['parent_username']);  
                        $comment.attr('data-isadmin', resp['is_admin']); 

                        $comment.find('.wcs-other-user').html(resp['parent_username']);             
                        $comment.find('.wcs-user-displayname').html(resp['display_name']);
                        $comment.find('.wcs-comment-item-date').html(resp['timeago']);
                        $comment.find('.wcs-comment-item-text').html(resp['generated_comment']);
                        if(resp.is_admin == 1){
                           $comment.find('.wcs-user-displayname').addClass('wcs-verified-user');
                        }else{
                            $comment.find('.wcs-user-displayname').removeClass('wcs-verified-user');            
                        }                        
                        
                        var totalText = "";
                        if(resp['upvotes'] > 0){
                            totalText = " (" + resp['upvotes'] + ')';
                        }
                        var html = "";
                        if(resp['upvoted']){                                        
                            html = '<i class="fas fa-heart"></i>' + " Unlike" + totalText;
                            $comment.find('.wcs-like-trigger').addClass('wcs-like-btn-active');                            
                        }else{
                            html = '<i class="fas fa-heart"></i>' + " Like" + totalText;                              
                        }                    
                        $comment.find('.wcs-like-trigger').html(html);   

                        $comment.attr('data-id', resp['id']); 
                        $comment.attr('id',  "comment_" + resp['id']);
                        if(WCS.USER_ID != resp['user_id']){
                            $comment.find('.wcs-delete-trigger').attr('style', 'display:none');                
                        }

                        $comment.addClass('wcs-comment-item-reply');
                        var $container = $('#comment_' + resp['ancestor_id']);
                        
                        if($('.wcs-comment-container').find('#comment_' + resp['id']).length <= 0){
                            $container.find('.wcs-reply-container').before($comment);
                        }                        
                    });       
                    setTimeout(function(){
                        callback();                        
                    }, 50);
                }, 500);                
                WCS.LOADING_NEW_COMMENTS = false;
                $('.wcs-comments .wcs-loading-animation-overlay').remove();
            }
        },
        error: function(response) 
        {
            console.log(response.responseText);
            console.log(response);                    
        }
    });     
};


WCS.loadMoreProfileComments = function(){
    $.ajax({
        url:'/ajax_comments/load_more_profile_comments/',
        data:{
            page: WCS.PROFILE_COMMENT_PAGE,
            user_id: WCS.PROFILE_COMMENT_USER
        },
        dataType:'json',
        type:'POST',
        success:function(resp){    
            var comments = resp['comments'];
            var hasMore = resp['has_more'];
            WCS.appendProfileComments(comments, hasMore);
        },
        error: function(response) 
        {
            console.log(response.responseText);
            console.log(response);                    
        }
    });
}

WCS.appendProfileComments = function(comments, has_more){
    $(comments).each(function(){
        //console.log("comment");
        //console.log(this);        
        var $comment = $($('#template_listcomment').html());
        $comment.find('.wcs-comment-post-title a').attr('href', this.thread_url);
        $comment.find('.wcs-comment-post-title a').html(this.thread_title);
        $comment.find('.wcs-avatar-img').attr('src', this.profile_image);
        $comment.find('.wcs-user-displayname').html(this.display_name);
        $comment.find('.wcs-user-displayname').attr('data-userid', this.user_id);
        if(this.parent_id == 0){
            $comment.find('.wcs-other-user').remove();
            $comment.find('.wcs-comment-item-username i').remove();
        }else{
            $comment.find('.wcs-other-user').attr('data-userid', this.parent_userid);
            $comment.find('.wcs-other-user').html(this.parent_username);  
            if(this.parent_admin == 1){
                $comment.find('.wcs-other-user').addClass('wcs-verified-user');
            }else{
                $comment.find('.wcs-other-user').removeClass('wcs-verified-user');                
            }
        }
        $comment.find('.wcs-comment-item-date').html(this.timeago);
        $comment.find('.wcs-comment-item-text').html(this.generated_comment);
        $comment.find('.wcs-view-in-discussion-trigger').attr('data-url', this.thread_viewurl);
        $comment.find('.wcs-view-in-discussion-trigger').attr('data-ancestorid', this.ancestor_id);
        if(this.is_liked){
            $comment.find('.wcs-like-trigger').addClass('wcs-like-btn-active');
        }
        if(this.is_admin == 1){
            $comment.find('.wcs-user-displayname').addClass('wcs-verified-user');
        }else{
            $comment.find('.wcs-user-displayname').removeClass('wcs-verified-user');            
        }
        
        //actually prepend so before loadmore
        $('.wcs-profile-comments-wrap .wcs-profile-comments-load-more').before($comment);
    });    
    if(has_more){
        $('.wcs-profile-comments-load-more').show();
    }else{
        $('.wcs-profile-comments-load-more').hide();        
    }
    
};

WCS.refreshAllComments = function(){
    if(WCS.FILTER_PAGE == 0){
        var html = $('#template_loadinganimation').html();
        $('.wcs-comment-container').html(html);
        $('.view-more-topcomment').hide();
    }

    $.ajax({
        url:'/ajax_comments/reload_comments/?' + new Date().getTime(),
        data:{
            filter_type: WCS.FILTER_TYPE,
            filter_page: WCS.FILTER_PAGE,
            thread_id: WCS.THREAD_ID
        },
        dataType:'json',
        type:'POST',
        success:function(allData){
            if(WCS.FILTER_PAGE == 0){        
                $('.wcs-comment-container').html("");
            }
            var data = allData['comments'];
            var totalTop = allData['total_topcomments'];
            var hasMore = allData['has_more'];
            var hasExtraMore = allData['has_extra_more'];           
            var commentsLeft = allData['comments_left'];           
            //just do top comments for now
            $(data).each(function(i, resp){
                var $comment = $($('#template_acomment').html());
                if(resp['active'] == 0){
                    $comment = $($('#template_deleted_comment').html());
                    if(!resp['has_children']){
                        return;
                    }
                }

                $comment.find('.wcs-user-trigger img').attr('src', resp['profile_image']);
                $comment.find('.wcs-user-trigger').attr('data-userid', resp['user_id']);

                $comment.attr('data-replyinfo', resp['user_id'] + "|" + resp['display_name'] + "|" + resp['parent_id']);                  
                $comment.attr('data-isadmin', resp['is_admin']);                  
                
                $comment.addClass('wcs-comment-item-parent');
                //need to add reply box
                var replyBox = $('#template_reply_container').html();
                $comment.append(replyBox);         
                $comment.find('.wcs-user-displayname').html(resp['display_name']);
                $comment.find('.wcs-comment-item-date').html(resp['timeago']);
                if(resp['active'] == 0){
                    $comment.find('.wcs-comment-item-text').html('<span class="wcs-comment-item-text-removed">This comment has been removed.</span>');
                }else{
                    $comment.find('.wcs-comment-item-text').html(resp['generated_comment']);
                }
                if(WCS.USER_ID != resp['user_id']){
                    $comment.find('.wcs-delete-trigger').attr('style', 'display:none');                
                }
                if(resp.parent_id == 0){
                    $comment.find('.wcs-other-user').remove();
                    $comment.find('.wcs-comment-item-username i').remove();
                }else{
                    $comment.find('.wcs-other-user').attr('data-userid', resp.parent_userid);
                    $comment.find('.wcs-other-user').html(resp.parent_username);                            
                }                
                
                var totalText = "";
                if(resp['upvotes'] > 0){
                    totalText = " (" + resp['upvotes'] + ')';
                }
                var html = "";
                if(resp['upvoted']){                                        
                    html = '<i class="fas fa-heart"></i>' + " Unlike" + totalText;   
                    $comment.find('.wcs-like-trigger').addClass('wcs-like-btn-active');
                }else{
                    html = '<i class="fas fa-heart"></i>' + " Like" + totalText;                                     
                }     
                
                
                $comment.find('.wcs-like-trigger').html(html);           
                $comment.attr('data-id', resp['id']); 
                $comment.attr('id',  "comment_" + resp['id']);
                $('.wcs-comment-container').append($comment);
                                                      
            });
            setTimeout(function(){
                
                
                $(data).each(function(i, parentComment){
                    
                    if(parentComment['has_more']){
                        var moreHtml = '<a class="view-prev-replies view-more-subcomment" data-ancestorid="' + parentComment['id'] + '" href="#!">Load previous comments <i class="fas fa-angle-down"></i></a>';
                        var $container = $('#comment_' + parentComment['id']);
                        $container.find('.wcs-reply-container').before(moreHtml);
                    }
                    console.log("parent comment " + parentComment['id']);
                    console.log("has children " + parentComment['children'].length);
                    $(parentComment['children']).each(function(i, resp){
                        console.log("adding child ");
                        console.log(resp);
                        var $comment = $($('#template_acomment').html());

                        $comment.find('.wcs-user-trigger img').attr('src', resp['profile_image']);
                        $comment.find('.wcs-user-trigger').attr('data-userid', resp['user_id']);


                        $comment.find('.wcs-other-user').attr('data-userid', resp['parent_userid']);
                        $comment.attr('data-replyinfo', resp['user_id'] + "|" + resp['parent_username'] + "|" + resp['parent_id']);  
                        $comment.attr('data-isadmin', resp['is_admin']);  

                        $comment.find('.wcs-other-user').html(resp['parent_username']);             
                        $comment.find('.wcs-user-displayname').html(resp['display_name']);
                        $comment.find('.wcs-comment-item-date').html(resp['timeago']);
                        $comment.find('.wcs-comment-item-text').html(resp['generated_comment']);
                        var totalText = "";
                        if(resp['upvotes'] > 0){
                            totalText = " (" + resp['upvotes'] + ')';
                        }
                        var html = "";
                        if(resp['upvoted']){                                        
                            html = '<i class="fas fa-heart"></i>' + " Unlike" + totalText;
                            $comment.find('.wcs-like-trigger').addClass('wcs-like-btn-active');                            
                        }else{
                            html = '<i class="fas fa-heart"></i>' + " Like" + totalText;                              
                        }                    
                        $comment.find('.wcs-like-trigger').html(html);   

                        $comment.attr('data-id', resp['id']); 
                        $comment.attr('id',  "comment_" + resp['id']);
                        if(WCS.USER_ID != resp['user_id']){
                            $comment.find('.wcs-delete-trigger').attr('style', 'display:none');                
                        }
                        
                        $comment.addClass('wcs-comment-item-reply');
                        var $container = $('#comment_' + resp['ancestor_id']);
                        //alert("adding child to " + '#comment_' + resp['parent_id']);
                        $container.find('.wcs-reply-container').before($comment);
                    });                  
                });
            }, 500);
            
            if(hasMore && commentsLeft > 0){
                if(hasExtraMore){
                    var text = "Load more comments <i class='fas fa-angle-down'></i>"; //"Load next 10 out of " + commentsLeft + " comments left ";
                    $('.view-more-topcomment').html(text);
                     $('.view-more-topcomment').show();
                }else{
                    var text = "Load more comments <i class='fas fa-angle-down'></i>"; //"Load next " + commentsLeft + " comments";                    
                    $('.view-more-topcomment').html(text);         
                     $('.view-more-topcomment').show();
                }
            }else{
                //hide button completely
                $('.view-more-topcomment').hide();
            }
            
        }, error : function(data){

        }
    });
    
};

WCS.resetFormElement = function(e) {
  e.wrap('<form>').closest('form').get(0).reset();
  e.unwrap();

  // Prevent form submission
};


String.prototype.replaceAll = function(str1, str2, ignore)
{
    return this.replace(new RegExp(str1.replace(/([\/\,\!\\\^\$\{\}\[\]\(\)\.\*\+\?\|\<\>\-\&])/g,"\\$&"),(ignore?"gi":"g")),(typeof(str2)=="string")?str2.replace(/\$/g,"$$$$"):str2);
};

function load_providers(exactText)
{
     $("#provider").val(exactText);
    //var zipcode = $("#zipcode").val(exactText)
    /*
    var selbox = $("#provider");
    //$('#dk_container_channel').remove();

    if(zipcode.length > 4){
        provider_status("Searching providers...");
        
        $.ajax({
            url:'/ajax_comments/zipsearch/',
            data:{zipcode:zipcode},
            dataType:'json',
            type:'POST',
            success:function(data){
                var locators = data.channels;
                var count = data.count;
                console.log(locators);
                var formData = '';
                var val;
                if(count){
                    provider_status("");
                    if('' != 'provider not listed'){
                        $("#provider_input").fadeOut();
                    }

                    selbox.empty();
                    selbox.append('<option value="">-- Select from this list --</option>');
                    $("#provider_input_select").fadeIn();
                                  
                    if(exactText){
                        exactText = exactText.replaceAll(" ","_").replaceAll('/','').replaceAll('\/','');
                        exactText = exactText.replaceAll(" ", '').replaceAll('_', '');
                        exactText = exactText.replace(/(?:\r\n|\r|\n)/g, ''); 
                    }else{
                        exactText = "";
                    }
                    $.each(locators,function(index,channels){
                        if(index){
                            var key = index.replaceAll(" ","_").replaceAll('/','');
                            key = key.replace(" ", '');
                            key = key.replace(/(?:\r\n|\r|\n)/g, '');
                            selbox.append('<optgroup label="'+index+'" id="'+key+'"></optgroup>');
                            $.each(channels,function(c,channel){
                                if(channel.position.indexOf('-') !== -1){
                                    channel.position = channel.position.split('-')[0];
                                }
                                val = channel.id+'|' + index + '|' +channel.name+'|'+channel.position;
                                val = val.replaceAll(" ","").replaceAll('/','');
                                val = val.replaceAll(" ", '').replaceAll('_', '');
                                val = val.replace(/\//g, '');                                
                                val = val.replace(/(?:\r\n|\r|\n)/g, '');
                                if(exactText != '' && exactText == val){
                                   $("#"+key).append('<option value="'+val+'" selected>'+channel.name+': '+channel.position+'</option>');
                                }else{
                                   $("#"+key).append('<option value="'+val+'">'+channel.name+': '+channel.position+'</option>');
                                }
                             });
                        }
                    });
                    
                    if(exactText == 'provider not listed'){
                        selbox.append('<option selected="selected" value="provider not listed">Provider not listed</option>');                    
                    }else{
                        selbox.append('<option value="provider not listed">Provider not listed</option>');                                            
                    }
                } else {
                    provider_status("");                  
                    selbox.empty();
                    selbox.append('<option value=""></option>');  
                    if(exactText == 'provider not listed'){
                        selbox.append('<option selected="selected" value="provider not listed">Provider not listed</option>');                    
                    }else{
                        selbox.append('<option value="provider not listed">Provider not listed</option>');                                            
                    }
                }
                //selbox.dropkick('refresh');
            },
            error:function(packet){


            }
        });
    }
    */
}

function provider_status(){

}


function loginSuccess(loggeduser, noParse, skipDialogs){
    
    //need to have
    //id, display_name, profile_image, terms_accepted, email_confirmed
    
    var userData;        
    if(noParse){
        userData = loggeduser;
    }else{
        userData = JSON.parse(loggeduser);   
    }
    //console.log("user data");
    //console.log(userData);
    WCS.USER_ID = userData['id'];
    
    //if just registered shouldn't close the sidebar
    //could be on login page...
    if(WCS.SIDEBAR_PAGE != 'register'){
        WCS.CLOSE_SIDEBAR();
    }
    $('.wcs-post-comment-header .wcs-user-displayname').html(userData['display_name']);
    $('.wcs-post-comment-header .wcs-user-displayname').data('userid', WCS.USER_ID);
    $('.wcs-post-comment-user-settings').data('userid', WCS.USER_ID);
    $('.wcs-post-comment-header .wcs-avatar').attr('src', userData['profile_image']);
    $('.wcs-post-comment-header .wcs-avatar').data('userid', WCS.USER_ID);
    $('.wcs-profile-header-user-avatar .wcs-avatar').attr('src', userData['profile_image']);
    $('.wcs-post-comment-login').hide();
    $('.wcs-post-comment-header').show();   

    //go through each comment, activate delete if user matches
    $('.wcs-comment-item-reply').each(function(){
        var replyInfo = $(this).data('replyinfo');
        var userId = replyInfo.split('|')[0];
        //console.log("comment userid " + userId + " vs " + WCS.USER_ID);
        if(WCS.USER_ID == userId){
            //console.log("activating delete for subcomment " + this.id);
            $(this).find('.wcs-delete-trigger').show();
        }
    });
    $('.wcs-comment-item-parent').each(function(){
        var replyInfo = $(this).data('replyinfo');
        var userId = replyInfo.split('|')[0];
        //console.log("comment userid " + userId + " vs " + WCS.USER_ID);        
        if(WCS.USER_ID == userId){
            //console.log("activating delete for topcomment " + this.id);
            $(this).find('.wcs-delete-trigger').first().show();
        }
    });
    
    
    
    //should hide the other one
    //    $('.wcs-post-comment-header').show(); 
    $('.wcs-post-comment-header-loggedout').hide();
    
    $('.wcs-post-comment-logged-in-btns').show();  
    
    WCS.termsAccepted = userData['terms_accepted'];
    WCS.emailConfirmed = userData['email_confirmed'];
    if(!skipDialogs){
        if(WCS.termsAccepted == 0){
            WCS.force_action('accept_terms', true);
            return false;
        }else if(WCS.emailConfirmed == 0){
            WCS.force_action('confirm_email');
            return false;
        }    
    }    
};
     

</script>    

</section>


<script src="/js/wcs-comments.js"></script>

                                    <div class="mod-section-3-list-row mod-section content-related">
                <h1>Read More</h1>
                <div class="mod-section-3-inner clearfix">
                                        <div class="mod-section-3-list-item primary-content-box clearfix">
                        <a href="/news/south-bend-holds-swearing-in-ceremony-for-mayor-clerk-council"><img src="https://newscdn.weigelbroadcasting.com/bShqi-1577910991-154399-blog-jamesmueller.jpg" width="179" height="100"></a>
                        <div class="mod-section-3-item-title">
                            <a href="/news/south-bend-holds-swearing-in-ceremony-for-mayor-clerk-council">South Bend holds swearing in ceremony for mayor, clerk, council</a>
                        </div>
                    </div>
                                        <div class="mod-section-3-list-item primary-content-box clearfix">
                        <a href="/news/police-prepping-for-impaired-drivers-on-new-years-eve"><img src="https://newscdn.weigelbroadcasting.com/jS54w-1577839345-154349-blog-videoimage-D7xk8r.jpg" width="179" height="100"></a>
                        <div class="mod-section-3-item-title">
                            <a href="/news/police-prepping-for-impaired-drivers-on-new-years-eve">Police prepping for impaired drivers on New Year's Eve</a>
                        </div>
                    </div>
                                        <div class="mod-section-3-list-item primary-content-box clearfix">
                        <a href="/news/attorney-general-says-fetal-remains-found-at-klopfer-properties-cannot-be-identified"><img src="https://newscdn.weigelbroadcasting.com/UrhC2-1577806116-154311-blog-MGN_1280x720_90915P00-GKGKW.jpg" width="179" height="100"></a>
                        <div class="mod-section-3-item-title">
                            <a href="/news/attorney-general-says-fetal-remains-found-at-klopfer-properties-cannot-be-identified">Attorney General says fetal remains found at Klopfer properties cannot be identified</a>
                        </div>
                    </div>
                    
                </div>
            </div><!-- .mod-section-2 -->
                                    <!-- START ZergNet ad code -->
            
            <div id="zergnet-widget-56334" class="zergnet-ad-unit"></div>

			<script language="javascript" type="text/javascript">
                (function() {
                    var zergnet = document.createElement('script');
                    zergnet.type = 'text/javascript'; zergnet.async = true;
                    zergnet.src = (document.location.protocol == "https:" ? "https:" : "http:") + '//www.zergnet.com/zerg.js?id=56334';
                    var znscr = document.getElementsByTagName('script')[0];
                    znscr.parentNode.insertBefore(zergnet, znscr);
                })();
            </script>
                        <!-- END ZergNet ad code -->

                    </div><!-- #main-content -->

        <aside>
	<ul>
        
                                                                                                                                                                                                                                                                                             <h2>Top Stories</h2>
    <ul class="aside-sidebar-three-item-list">
                <li class="aside-sidebar-three-item-list-item primary-content-box callout-item-title-link">
            <a class="image-wrapper" href="/news/south-bend-holds-swearing-in-ceremony-for-mayor-clerk-council"><img src="https://newscdn.weigelbroadcasting.com/bShqi-1577910991-154399-blog-jamesmueller.jpg" width="166" height="93"></a>
            <a class="aside-sidebar-three-item-list-title" href="/news/south-bend-holds-swearing-in-ceremony-for-mayor-clerk-council">South Bend holds swearing in ceremony for mayor, clerk, council</a>
        </li>
                <li class="aside-sidebar-three-item-list-item primary-content-box callout-item-title-link">
            <a class="image-wrapper" href="/news/crews-searching-for-missing-kayaker-in-niles"><img src="https://newscdn.weigelbroadcasting.com/65wG9-1577898607-154385-blog-searchforkayaker.jpg" width="166" height="93"></a>
            <a class="aside-sidebar-three-item-list-title" href="/news/crews-searching-for-missing-kayaker-in-niles">Missing kayaker pulled from St. Joseph River in Niles has died</a>
        </li>
                <li class="aside-sidebar-three-item-list-item primary-content-box callout-item-title-link">
            <a class="image-wrapper" href="/news/police-investigating-early-morning-shooting-in-south-bend"><img src="https://newscdn.weigelbroadcasting.com/jsotX-1577894254-154365-blog-videoimage-601tIm.jpg" width="166" height="93"></a>
            <a class="aside-sidebar-three-item-list-title" href="/news/police-investigating-early-morning-shooting-in-south-bend">Investigators release names of victims of shooting on Michigan Street</a>
        </li>
        
    </ul>

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         

                        <div class="weather-app primary-content-box">
        <div class="weather-app-logo">
            <!-- weather logos -->
            <a href="/weather" title="Weather">
                                <img src="/images/first-warning-logo.png">
                            </a>
        </div>
                <!-- weather location and sponsor -->
        <div class="weather-forecast-container">
            <div class="weather-content-top-wrapper">
                <div class="weather-col-left">
                    <span class="weather-location">
                                            South Bend, IN
                                        </span>
                </div>
                <div class="weather-col-right">
                                        
                </div>
            </div>
            <!-- weather forecast -->
            <div class="weather-view-row forecast-row">
                <div class="weather-view-forecast-column">
                    <div class="weather-view-forecast-left">
                       <a href="/weather" title="weather"><img src="/images/weather_icons/66.png" width="40" height="20">
                       </a>
                    </div>
                    <div class="weather-view-forecast-right">
                        <a href="/weather" title="weather">
                            <span class="weather-view-time-text">
                                                            Today
                                                         </span>
                            <span class="weather-view-temperature-text">37°</span>
                            <span class="weather-view-description-text">Partly cloudy</span>
                        </a>
                    </div>
                </div>

                <div class="weather-view-divider"></div>
                <div class="weather-view-forecast-column">
                    <div class="weather-view-forecast-left">
                        <a href="/weather" title="weather"><img src="/images/weather_icons/69.png" width="40" height="20">
                        </a>
                    </div>
                    <div class="weather-view-forecast-right">
                        <a href="/weather" title="weather">
                            <span class="weather-view-time-text">
                                                            Tomorrow
                                                        </span>
                            <span class="weather-view-temperature-text">47°</span>
                            <span class="weather-view-description-text">Mostly cloudy</span>
                        </a>
                    </div>
                </div>
            </div>
                        <div class="secondary-tags"><a href="/weather/#feeditem_56">10 Day Forecast</a></div>
                    </div>
                            <div class="weather-view-video internal-page" href="/news/sunny-start-to-2020-rain-returns-thursday-night-010120">
              
            <a href="/videos/daily-forecast" class="video-thumbnail">
                <div class="weather-view-play"><i class="fa fa-play-circle" aria-hidden="true"></i></div>
                <img width="360" src="https://videoposters.weigelbroadcasting.com/abc57news/uploader sunny start to 2020 rain returns thursday night a5git 1577871601-ABC57 480x270.jpg?1577872266" class="video-thumb">
            </a>
                            <div class="callout-item-title-link"><a href="/videos/daily-forecast">First Warning Neighborhood Weather&nbsp;<i class="fa fa-play-circle" aria-hidden="true"></i></a></div>
                    </div>
                        <div class="weather-forecast-container">
            <div class="weather-view-row internal-page">
                            <div class="weather-view-column">
                                                                <a href="/weather/#feeditem_81" class="weather-links">
                        <a href="/weather/#feeditem_81" class="weather-links secondary-tags">                                        
                                        <span>Radar</span>
                    </a>
                </div>
                <div class="weather-view-column">
                                            <a href="/weather/#feeditem_79" class="weather-links">
                        <a href="/weather/#feeditem_79" class="weather-links secondary-tags">                    
                    
                                            <span>Maps</span>
                                        </a>
                </div>
                <div class="weather-view-column">
                                        <a href="/weather/#feeditem_80" class="weather-links">
                    <a href="/weather/#feeditem_80" class="weather-links secondary-tags">                    
                    
                                                 <span>Temps</span>
                                            </a>
                </div>
            </div>
                                </div>    </div>

        
                    <li>
                <div class="aside-ad-1">
                    <div id="abc57_sidebar1">
                        <script type='text/javascript'>
                            var width = window.innerWidth || document.documentElement.clientWidth;
                            if(width > 850){
                                googletag.cmd.push(function() { googletag.display('abc57_sidebar1'); });
                            }
                        </script>
                    </div>
                    <div id="abc57_btf2">
                        <script type='text/javascript'>
                            var width = window.innerWidth || document.documentElement.clientWidth;
                            if(width <= 850){                                         
                                googletag.cmd.push(function() { 
                                    
                                    googletag.display('abc57_btf2'); 
                                 });                   
                               $('#abc57_sidebar1').remove();       
                            }else{
                                $('#abc57_btf2').remove();       
                            }
                        </script>
                    </div>                            
                </div>
            </li>
        
        
                        
                                                                                                                                                                                                                                                                                                                                        
                                        
                        
            
                                                                                                                                                                                                                                                                
                                        
                        
            
                                                                                                                <li>
                            <div class="aside-ad-3">
                                <div id="abc57_sidebar3">
                                    <script type='text/javascript'>
                                        var width = window.innerWidth || document.documentElement.clientWidth;
                                        if(width > 1100){
                                            googletag.cmd.push(function() { googletag.display('abc57_sidebar3'); });
                                        }
                                    </script>
                                </div>
                            </div>
                        </li>
                                             
                                              
                                                                <li>
            <h2><span class="title-alert"></span>Latest</h2>
            <ul class="aside-sidebar-list-title-only">
                                <li class="callout-item-title-link"><a href="/news/south-bend-holds-swearing-in-ceremony-for-mayor-clerk-council">South Bend holds swearing in ceremony for mayor, clerk, council</a>
                	<div><span class="meta-text-subheading-small meta-text-timestamp-default"> 1h ago
                </li>
                                <li class="callout-item-title-link"><a href="/news/a-michigan-restaurant-server-got-a-2-020-tip-on-a-23-meal-for-the-new-year-its-part-of-the-2020-tip-challenge">Michigan restaurant server got a $2,020 tip on a $23 meal for the New Year</a>
                	<div><span class="meta-text-subheading-small meta-text-timestamp-default"> 3h ago
                </li>
                                <li class="callout-item-title-link"><a href="/news/from-plastic-bags-to-natural-hair-here-are-the-new-laws-coming-in-2020">From plastic bags to natural hair, here are the new laws coming in 2020</a>
                	<div><span class="meta-text-subheading-small meta-text-timestamp-default"> 3h ago
                </li>
                                <li class="callout-item-title-link"><a href="/news/local-hospitals-welcome-first-babies-of-2020">Local hospitals welcome first babies of 2020</a>
                	<div><span class="meta-text-subheading-small meta-text-timestamp-default"> 4h ago
                </li>
                                <li class="callout-item-title-link"><a href="/news/crews-searching-for-missing-kayaker-in-niles">Missing kayaker pulled from St. Joseph River in Niles has died</a>
                	<div><span class="meta-text-subheading-small meta-text-timestamp-default"> 3h ago
                </li>
                
            </ul>
        </li>
                                                                                                                                                        
                                        
                        
            
                                                                    
                                            <div class="aside-newsletter-signup">
            <div class="aside-newsletter-title">
                <i class="fas fa-envelope"></i>
                                <span>Sign up for the ABC 57</span><span>Newsletter</span>
                
            </div>
            <form id="newsletter_signup_form" action="" method="GET">
                <div class="aside-newsletter-signup-input-wrap">
                                            <input type="text" name="email" id="email" placeholder="Your email">
                                        <button id="newsletter_submit" name="submit" type="submit"><i class="fa fa-angle-right" aria-hidden="true"></i></button>
                </div>
            </form>
        </div>


        <script>
            var SUBMITTING_NEWSLETTER = false;
            
            $(document).ready(function(){
                $('#newsletter_signup_form').submit( function(e){    
                     e.preventDefault();
                     
                     if(SUBMITTING_NEWSLETTER){
                        //console.log('I made it this far!');
                         return;
                     }

                     SUBMITTING_NEWSLETTER = true;
                     
                     var emailAddress = $('#email').val();
                     if(emailAddress.length <= 2){
                         if(SITE_NAME == 'telemundowi'){
                             alert("Email Inválido");
                         }else{
                             alert("Enter a valid email");
                         }
                         return;
                     }
                     
                     //var height = $('#newsletter_submit').height();
                     //$('#newsletter_submit i').remove();                     
                     //$('#newsletter_submit').append('<img class="loading-dots" src="/images/loading-dots.gif"/>');   
                     
                     
                     $.ajax({
                         url: '/ajax/newsletter_signup/',
                         data: {
                             email: emailAddress
                         },
                         type: 'POST',
                         dataType: 'json',
                         success: function(data) 
                         {      
                             if(data.status == "success"){
                                 //recreate other div
                                if(SITE_NAME == 'telemundowi'){
                                    $('.aside-newsletter-signup').html('<span class="aside-newsletter-signup-thanks">Gracias por suscribirte a nuestro boletín</span>');
                                }
                                else {
                                    $('.aside-newsletter-signup').html('<span class="aside-newsletter-signup-thanks">Thank you for subscribing to our newsletter!</span>');
                                }
                                
                             }
                             else if(data.status == "failure"){
                                 $('#newsletter_submit').empty();
                                 $('#newsletter_submit').append('<i class="fa fa-angle-right" aria-hidden="true"></i>');                                 
                                 alert(data.msg);                                 
                             }
                             SUBMITTING_NEWSLETTER = false;
                         },
                         error : function(response)
                         {
                            //console.log('Boohoo...');
                            //alert('Error');
                            console.log(response); 
                         }
                     });

                 });  
            });
        </script>
                                        <h2>Trending</h2>
        <div class="aside-sidebar-main-callout-list primary-content-box">
            <div class="aside-sidebar-main-callout-item">
                <a href="/news/crews-searching-for-missing-kayaker-in-niles"><img src="https://newscdn.weigelbroadcasting.com/O4Ci5-1577898608-154385-blog-searchforkayaker.jpg" width="600" height="338"></a>
                <ul class="aside-sidebar-list-title-only">
                    <li class="trending-item">
                        <div class="trending-now-circle item-number"></div>
                        <div>
                            <div class="primary-tags-wrapper"><a href="/local-news-abc57" class="primary-tags">More news</a></div>                            <div class="callout-item-title-link"><a href="/news/crews-searching-for-missing-kayaker-in-niles">Missing kayaker pulled from St. Joseph River in Niles has died</a></div>
                            <div><span class="meta-text-subheading-small meta-text-timestamp-default"> 3h ago </span></div>
                        </div>
                    </li>
                           
                    <li class="trending-item">
                        <div class="trending-now-circle item-number"></div>
                        <div>
                            <div class="primary-tags-wrapper"><a href="/elkhart-county-news" class="primary-tags">Elkhart County</a></div>                            <div class="callout-item-title-link"><a href="/news/local-hospitals-welcome-first-babies-of-2020">Local hospitals welcome first babies of 2020</a></div>
                            <div><span class="meta-text-subheading-small meta-text-timestamp-default"> 4h ago </span></div>
                        </div>
                    </li>
                           
                    <li class="trending-item">
                        <div class="trending-now-circle item-number"></div>
                        <div>
                            <div class="primary-tags-wrapper"><a href="/elkhart-county-news" class="primary-tags">Elkhart County News </a></div>                            <div class="callout-item-title-link"><a href="/news/police-prepping-for-impaired-drivers-on-new-years-eve">Police prepping for impaired drivers on New Year's Eve <i class="fa fa-play-circle" aria-hidden="true"></i></a></div>
                            <div><span class="meta-text-subheading-small meta-text-timestamp-default"> 21h ago </span></div>
                        </div>
                    </li>
                    
                </ul>
            </div>
        </div>

                                                                                                                                                        
                                        
                        
            
                                                                                        <h2>ABC57 Investigates</h2>
    <ul class="aside-sidebar-three-item-list">
                <li class="aside-sidebar-three-item-list-item primary-content-box callout-item-title-link">
            <a class="image-wrapper" href="/news/abc57-investigates-a-south-bend-firefighter-cheating-scandal"><img src="https://newscdn.weigelbroadcasting.com/naCqi-1575418578-152409-blog-videoimage-2wbxMm.jpg" width="166" height="93"></a>
            <a class="aside-sidebar-three-item-list-title" href="/news/abc57-investigates-a-south-bend-firefighter-cheating-scandal">ABC57 investigates a South Bend Firefighter cheating scandal </a>
        </li>
                <li class="aside-sidebar-three-item-list-item primary-content-box callout-item-title-link">
            <a class="image-wrapper" href="/news/too-much-force-part-3"><img src="https://newscdn.weigelbroadcasting.com/tQ3MI-1574484378-151681-blog-videoimage-vhcnH2.jpg" width="166" height="93"></a>
            <a class="aside-sidebar-three-item-list-title" href="/news/too-much-force-part-3">Too much force? Part 3</a>
        </li>
                <li class="aside-sidebar-three-item-list-item primary-content-box callout-item-title-link">
            <a class="image-wrapper" href="/news/too-much-force-part-2"><img src="https://newscdn.weigelbroadcasting.com/bYBs5-1573870061-151264-blog-videoimage-QNZlRx.jpg" width="166" height="93"></a>
            <a class="aside-sidebar-three-item-list-title" href="/news/too-much-force-part-2">Too much force? Part 2</a>
        </li>
        
    </ul>

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                    
            <li>
                <div class="aside-ad-2">
                    <div id="abc57_sidebar2">
                        <script type='text/javascript'>
                            var width = window.innerWidth || document.documentElement.clientWidth;
                            if(width > 850){
                                googletag.cmd.push(function() {   
                                    googletag.display('abc57_sidebar2'); 
                                });                                
                            }
                        </script>
                    </div>
                    <div id="abc57_atf">
                        <script type='text/javascript'>
                            var width = window.innerWidth || document.documentElement.clientWidth;
                            if(width <= 850){                                         
                                googletag.cmd.push(function() { 
                                    
                                    googletag.display('abc57_atf'); 
                                 });                   
                               $('#abc57_sidebar2').remove();       
                            }else{
                                $('#abc57_atf').remove();       
                            }
                        </script>
                    </div>
                            
                            
                </div>
            </li>
                        
    </ul>


           <script src="https://www.metv.com/js/iframeheight.js"></script>
        <iframe id="affiliated-widget-iframe" src="https://www.metv.com/affiliatedwidget?market=46" width="100%" frameborder="0" scrolling="no"  seamless="seamless" marginwidth="0" marginheight="0" scrolling="no" frameborder="0"/> </iframe>
    </aside>


        </div><!-- #wrapper -->
    <footer>
    	<div class="section-inner">
        	<nav id="footer-nav">
            	<ul>
                                            <li><a href="/about">About</a></li>
                                            <li><a href="/contact">Contact</a></li>
                                            <li><a href="/privacy-policy">Privacy Policy</a></li>
                                            <li><a href="/terms-of-use">Terms of Use</a></li>
                    
                    <!---
                    <li><a href="#">About</a></li>
                    <li><a href="#">Contact</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">Terms of Use</a></li>
                    -->
                </ul>
            </nav>
            <div class="footer-apps">
                                                                                        <span>Download the abc57 app:</span>
                <a href="https://itunes.apple.com/us/app/abc-57-news/id973142739?mt=8"><img class="footer-app-ios" src="/images/app_badge_ios.png" width="135" height="40"></a>
                <a href="https://play.google.com/store/apps/details?id=com.weigel.wbndabc57"><img src="/images/app_badge_android.png" width="135" height="40"></a>
            </div>
            <img class="footer-logo footer-logo-abc57" src="/images/logo_abc57_stacked.png?ver2">
            <div class="footer-contact-info">
                                	53550 Generations Drive South Bend, IN 46635<br />
                    <span>News tip hotline:&nbsp;</span><a class="clicktocall" href="tel:+1-574-344-5557">(574) 344-5557</a><br />
                    <span>Local advertising:&nbsp;</span><a class="clicktocall" href="tel:+1-574-344-5563">(574) 344-5563</a><br /> 
                    <span>General info:&nbsp;</span><a class="clicktocall" href="tel:+1-574-344-5500">(574) 344-5500</a><br />
                    <span>Fax:&nbsp;</span><span class="footer-text">(574) 344-5094</span>
                            </div>
            <div class="footer-station-logos">
                    <a href="http://metv.com/setmarket.php?marketID=46" target="_blank" rel="noopener"><img src="/images/metv_logo_footer.png" alt="MeTV" width="124" height="82"></a>
                    <a href="http://decades.com/" target="_blank" rel="noopener"><img src="/images/decades_logo_footer.png" alt="Decades" width="124" height="82"></a>
                                                                                    <a href="http://www.thecw25.com/" target="_blank" rel="noopener"><img src="/images/cw25_logo_footer.png" alt="The CW25" width="124" height="82"></a>
                        <a href="http://mymichianatv.com/" target="_blank" rel="noopener"><img src="/images/mymichiana_logo_footer.png" alt="MyMichiana" width="124" height="82"></a>
                        <a href="http://moviestvnetwork.com/" target="_blank" rel="noopener"><img src="/images/movies_logo_footer.png" alt="Movies!" width="124" height="82"></a>
                        <a href="http://telemundo.com/" rel="noopener"><img src="/images/telemundomi_logo_footer.png" alt="Telemundo Michiana" width="124" height="82"></a></li>
                                                    </div>
            <div class="copyright">
            	All content &copy; Copyright 2020 WBND. All Rights Reserved.            </div>
        </div><!-- .section-inner -->
    </footer>

    <!-- Disqus -->
    
    

                <!-- QST ADS -->
        
        <script async src="https://powerad.ai/script.js"></script>
        
        <!-- END OF QST ADS -->
            

</body>
</html>

